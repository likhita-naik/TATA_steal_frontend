"use strict";(self.webpackChunktatasteel=self.webpackChunktatasteel||[]).push([[146],{4146:(Z,V,m)=>{m.r(V),m.d(V,{PpeviolationModule:()=>ft});var l=m(9569),S=m(5861),b=m(529),p=m(433),d=m(9646),C=m(8675),T=m(3900),D=m(2953),L=m(4327),M=m(1954),x=m(6948),e=m(4650),O=m(4179),y=m(6895);let H=(()=>{class i{constructor(t,n,a){this.http=t,this.snackbar=n,this.datePipe=a,this.logInterval=0;var o=this.loadConfigFile("assets/config.json");o=JSON.parse(o),this.IP=o.IP,this.logInterval=o.logInterval}loadConfigFile(t){return this.readConfigFile(t,"application/json")}readConfigFile(t,n){var a=new XMLHttpRequest;if(a.open("GET",t,!1),null!=n)return a.overrideMimeType&&a.overrideMimeType(n),a.send(),a.status?a.response:null}dateTransform(t){return this.datePipe.transform(t,"yyyy-MM-dd HH:mm:ss")}LivePPEViolationData(t,n,a,o){return"all_cameras"===n&&(n=null),"all_departments"===t&&(t=null),this.http.get(a&&o&&n?this.IP+"/live_data1PPE/"+n+"/"+a+"/"+o:a||o||!n?a&&o&&n?this.IP+"/live_data1PPE/cameraname/"+n+"/"+a+"/"+o:a&&o&&t?this.IP+"/live_data1PPE/department/"+t+"/"+a+"/"+o:a&&o&&!n?this.IP+"/live_data1PPE/pagination/"+a+"/"+o:a||o||!n?a||o||!t?this.IP+"/live_data1PPE":this.IP+"/live_data1PPE/department/"+t:this.IP+"/live_data1PPE/cameraname/"+n:this.IP+"/live_data1PPE/"+n)}DatewisePPEViolations(t,n,a,o,c,h){var P=this.dateTransform(t),E=this.dateTransform(n);return"all_cameras"===h&&(h=null),"all_departments"===c&&(c="none"),this.http.post(a&&o&&h?this.IP+"/datewisePPE/"+h+"/"+a+"/"+o:a&&o&&!h?this.IP+"/datewisePPE/"+a+"/"+o:a||o||!h?this.IP+"/datewisePPE":this.IP+"/datewisePPE/"+h,{from_date:P,to_date:E,cameraName:h,department_name:c})}ChangePPEFiltersData(t){return this.http.post(this.IP+"/PPEviolationPercentage",t)}GetPPEFiltersData(){return this.http.get(this.IP+"/PPEviolationPercentage")}CreatePPEViolationExcel(t){return this.http.post(this.IP+"/create_violation_excelPPE",t)}DownloadViolationExcel(){return this.http.get(this.IP+"/violation_excel_download",{observe:"response",responseType:"arraybuffer"})}GetLatestPPEData(t){return this.http.get(t?this.IP+"/latest_dataPPE/"+t:this.IP+"/latest_dataPPE")}GetPPECameraDetails(t,n){return null===t&&null===n?this.http.get(this.IP+"/camera_detailsPPE"):this.http.post(this.IP+"/camera_detailsPPE",{from_date:t,to_date:n})}GetPPEDepartmentDetails(t,n){return null===t&&null===n?this.http.get(this.IP+"/department_detailsPPE"):this.http.post(this.IP+"/department_detailsPPE",{from_date:t,to_date:n})}GetViolationList(){return this.http.get(this.IP+"/violation_type_details")}VerifyViolation(t,n){return this.http.get(this.IP+"/violation_verification/"+t+"/"+n)}notification(t,n){this.snackbar.open(t,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"center",verticalPosition:"bottom"})}DeleteViolationData(t){return this.http.get(this.IP+"/Deleteviolation/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(b.eN),e.\u0275\u0275inject(O.ux),e.\u0275\u0275inject(y.DatePipe))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var f=m(7185),_=m(1305),r=m(2216),u=m(4153),g=m(64),v=m(2435),F=m(8177),j=m(1968);const R=["dangerAlert"];function U(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275text(1,"The minimum allowed value is 30"),e.\u0275\u0275elementEnd())}function G(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275text(1,"value should be number "),e.\u0275\u0275elementEnd())}function W(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,U,2,0,"span",71),e.\u0275\u0275template(2,G,2,0,"span",71),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.helmetFilterValue.errors.min&&null==t.helmetFilterValue.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.helmetFilterValue.errors.pattern)}}function K(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275text(1,"The minimum allowed value is 30"),e.\u0275\u0275elementEnd())}function Q(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275text(1,"Value should be number "),e.\u0275\u0275elementEnd())}function J(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,K,2,0,"span",71),e.\u0275\u0275template(2,Q,2,0,"span",71),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.vestFilterValue.errors.min&&null==t.vestFilterValue.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.vestFilterValue.errors.pattern)}}function X(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.Reset())}),e.\u0275\u0275text(1," \xd7 Cancel Filters "),e.\u0275\u0275elementEnd()}}function q(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Submit"),e.\u0275\u0275elementEnd())}function ee(i,s){1&i&&e.\u0275\u0275element(0,"span",74)}function te(i,s){1&i&&e.\u0275\u0275element(0,"fa-icon",75)}function ne(i,s){1&i&&e.\u0275\u0275element(0,"span",76)}function ie(i,s){1&i&&e.\u0275\u0275element(0,"fa-icon",79)}function ae(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"\xa0 Live \xa0"),e.\u0275\u0275elementEnd())}function oe(i,s){1&i&&e.\u0275\u0275element(0,"span",74)}function se(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",77),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.BackToToday())}),e.\u0275\u0275template(1,ie,1,0,"fa-icon",78),e.\u0275\u0275template(2,ae,2,0,"span",34),e.\u0275\u0275template(3,oe,1,0,"span",42),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loader2)}}function le(i,s){1&i&&e.\u0275\u0275element(0,"span",83)}function re(i,s){1&i&&e.\u0275\u0275element(0,"fa-icon",84)}function ce(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",80),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.GetLatestPPEData())}),e.\u0275\u0275template(1,le,1,0,"span",81),e.\u0275\u0275template(2,re,1,0,"fa-icon",82),e.\u0275\u0275text(3,"Latest "),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loaderLatest),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loaderLatest)}}function de(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span",24),e.\u0275\u0275element(1,"span",85),e.\u0275\u0275text(2,"Live Data"),e.\u0275\u0275elementEnd())}function me(i,s){1&i&&(e.\u0275\u0275elementStart(0,"span",86)(1,"b"),e.\u0275\u0275text(2,"Show:"),e.\u0275\u0275elementEnd()())}function pe(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",87),e.\u0275\u0275listener("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.pageSize=a)})("ngModelChange",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.sliceVD())}),e.\u0275\u0275elementStart(1,"option",88),e.\u0275\u0275text(2,"30 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"option",89),e.\u0275\u0275text(4,"40 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"option",90),e.\u0275\u0275text(6,"50 items per page"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngModel",t.pageSize)}}function ue(i,s){1&i&&(e.\u0275\u0275elementStart(0,"th",93),e.\u0275\u0275text(1,"Is Valid?"),e.\u0275\u0275elementEnd())}function he(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",106),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.imageCarousal(a))}),e.\u0275\u0275text(1," \xa0\xa0 "),e.\u0275\u0275element(2,"fa-icon",107),e.\u0275\u0275text(3," More Images \xa0\xa0 "),e.\u0275\u0275elementEnd()}}function fe(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",113),e.\u0275\u0275element(1,"input",114),e.\u0275\u0275elementStart(2,"label",115),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","Vest"===t?"vest"==n[t].toLowerCase()&&"null"!==n[t]&&"none"!==n[t]:n[t]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("Vest"===t?n[t]:t)}}function ge(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,fe,4,2,"div",112),e.\u0275\u0275elementEnd()),2&i){const t=s.$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Helmet"===t?"none"!==n[t]&&!1===n[t]:"vest"===t.toLowerCase()&&"null"!==n[t]&&"none"!==n[t]&&"vest"!==n[t])}}function _e(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",108)(1,"div")(2,"div",109),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ul",110)(5,"li"),e.\u0275\u0275template(6,ge,2,1,"div",111),e.\u0275\u0275elementEnd()()()()),2&i){const t=s.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.violation_count),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.objectKeys(t))}}function ve(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",119)(1,"div",120)(2,"input",121),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.VerifyTrueViol(a,o))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",122),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",123)(6,"input",121),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.VerifyFalseViol(a,o))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",124),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+t.SNo),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","yes"+t.SNo),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+t.SNo),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","no"+t.SNo)}}function xe(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",119)(1,"div",120)(2,"input",126),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(3).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.VerifyTrueViol(a,o))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",122),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",123)(6,"input",126),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(3).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.VerifyFalseViol(a,o))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",124),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+t.SNo)("defaultChecked",!0===t.violation_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","yes"+t.SNo),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+t.SNo)("defaultChecked",!1===t.violation_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","no"+t.SNo)}}function be(i,s){if(1&i&&e.\u0275\u0275template(0,xe,9,10,"div",125),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngIf",t.violation_verificaton_status)}}function Ce(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"td",116),e.\u0275\u0275template(1,ve,9,8,"div",117),e.\u0275\u0275template(2,be,1,1,"ng-template",null,118,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275reference(3),n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.violation_verificaton_status)("ngIfElse",t)}}function ye(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",92)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",96)(4,"div",36)(5,"div",2)(6,"img",97),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.imageCarousal(o))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275template(8,he,4,0,"button",98),e.\u0275\u0275text(9," \xa0"),e.\u0275\u0275elementStart(10,"button",99),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.downloadImage(c.API+"/image/"+o.imagename))}),e.\u0275\u0275text(11," Download Image "),e.\u0275\u0275element(12,"fa-icon",75),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(13,"td")(14,"ng-scrollbar",100,101)(16,"div"),e.\u0275\u0275template(17,_e,7,2,"div",102),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"dateFormater"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,Ce,4,2,"td",103),e.\u0275\u0275elementStart(26,"td")(27,"div",104)(28,"fa-icon",105),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext(2),h=e.\u0275\u0275reference(108);return e.\u0275\u0275resetView(c.IsDeleteData(h,o))}),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=s.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.SNo),e.\u0275\u0275advance(4),e.\u0275\u0275property("src",n.API+"/image/"+t.imagename[0],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.imagename.length<1),e.\u0275\u0275advance(6),e.\u0275\u0275property("autoHeightDisabled",!1)("disabled",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.object_data),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.department?t.department:"null"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.camera_name?t.camera_name:"null"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,10,t.timestamp)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isEditTable)}}function Ie(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"table",91)(1,"thead",92)(2,"tr")(3,"th",93)(4,"b"),e.\u0275\u0275text(5,"SNo."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"th",93)(7,"b"),e.\u0275\u0275text(8," Violation Image "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"th",93)(10,"b"),e.\u0275\u0275text(11," Violation Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"th",93)(13,"b"),e.\u0275\u0275text(14," Department "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"th",93)(16,"b"),e.\u0275\u0275text(17," Camera Name "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"th",93)(19,"b"),e.\u0275\u0275text(20," Detected Time "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(21,ue,2,0,"th",94),e.\u0275\u0275element(22,"th",93),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"tbody"),e.\u0275\u0275template(24,ye,29,12,"tr",95),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(21),e.\u0275\u0275property("ngIf",t.isEditTable),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(25,2,t.violData))}}function Pe(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",127)(1,"div",3)(2,"div",47),e.\u0275\u0275element(3,"img",128),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",129)(5,"h5")(6,"span",130),e.\u0275\u0275text(7," Camera Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"b")(9,"span",131),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"h5")(12,"span",130),e.\u0275\u0275text(13," Detected Time : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"b")(15,"span",131),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.API+"/image/"+t.currentViol.imagename,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.currentViol.camera_name?t.currentViol.camera_name:"null"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentViol.timestamp?t.currentViol.timestamp:"--")}}function we(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",143),e.\u0275\u0275element(1,"input",144),e.\u0275\u0275elementStart(2,"label",145),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","Vest"===t?"no_vest"==n[t]:n[t]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("Vest"===t?"Vest":t)}}function Se(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,we,4,2,"div",142),e.\u0275\u0275elementEnd()),2&i){const t=s.$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Helmet"===t?"none"!==n[t]&&!1===n[t]:"Vest"===t&&"no_vest"===n[t])}}function De(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",108)(1,"div")(2,"div",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"ul",141)(6,"li"),e.\u0275\u0275template(7,Se,2,1,"div",111),e.\u0275\u0275elementEnd()()()()),2&i){const t=s.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.violation_count),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",n.objectKeys(t))}}function Ee(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",140),e.\u0275\u0275template(1,De,8,2,"div",102),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.editViol.object_data)}}function Te(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",132)(1,"div",3)(2,"div",133)(3,"div",134),e.\u0275\u0275element(4,"img",135),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",136)(6,"div",137)(7,"div",138)(8,"h5",2),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"br"),e.\u0275\u0275template(11,Ee,2,1,"div",139),e.\u0275\u0275elementEnd()()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("src",t.API+"/image/"+t.editViol.imagename[0],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.editViol.analyticstype),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","PPE"===t.editViol.analyticstype||"RA"===t.editViol.analyticstype)}}function Me(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"p"),e.\u0275\u0275text(2,"This is a custom overlay template."),e.\u0275\u0275elementEnd()())}function ke(i,s){}function Ve(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",127)(1,"div",146)(2,"div",147)(3,"div",148)(4,"div",149)(5,"i",150),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",151),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",127)(10,"p"),e.\u0275\u0275text(11," Do you really want to delete this violation Details? This process cannot be undone. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",152)(13,"button",153),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(14," Cancel "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",154),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.DeleteViolationData())}),e.\u0275\u0275text(16," Delete "),e.\u0275\u0275elementEnd()()()()()}}function Le(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div",36)(1,"h4"),e.\u0275\u0275text(2,"Violation Details are Not Found."),e.\u0275\u0275elementEnd()())}function Oe(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275element(1,"span",157),e.\u0275\u0275elementStart(2,"h4"),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()())}function Fe(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div",36)(1,"h4"),e.\u0275\u0275text(2,"Loading..."),e.\u0275\u0275elementEnd()())}function Ae(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div",36)(1,"h4"),e.\u0275\u0275text(2,"Error While Fetching the Data."),e.\u0275\u0275elementEnd()())}function He(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",155)(1,"div",155),e.\u0275\u0275template(2,Le,3,0,"div",156),e.\u0275\u0275template(3,Oe,4,0,"div",156),e.\u0275\u0275template(4,Fe,3,0,"div",156),e.\u0275\u0275template(5,Ae,3,0,"div",156),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","success"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","init"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Loading"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Error"==t.dataFetchStatus)}}const N=function(){return{"min-width":"100%"}},z=function(){return{standalone:!0}},B=function(i){return{"is-invalid":i}},je=[{path:"",component:(()=>{class i{constructor(t,n,a,o,c,h,P,E,w,A){this.http=t,this.webServer=n,this.datepipe=a,this.toasterService=o,this._lightbox=c,this._lightBoxConfig=h,this.router=P,this.snackbar=E,this.modalService=w,this.Router=A,this.data=[],this.activeIndex=0,this.isalert=!1,this.prevLiveCount=0,this.helmetFilterValue=new p.NI(30,[p.kI.pattern(new RegExp("^(?!-)[0-9]+$")),p.kI.min(30)]),this.vestFilterValue=new p.NI(30,[p.kI.pattern(new RegExp("^(?!-)[0-9]+$")),p.kI.min(30)]),this.tempdata=[],this.page=1,this.pageSize=30,this.cameraDetails=[],this.audioOff=!1,this.alertmessage="",this.total=(0,d.of)(0),this.violData=(0,d.of)([]),this.loading=!1,this.filterOut=new p.NI,this.excelLoader=!1,this.violLength=0,this.updatedLen=0,this.violdata=[],this.show1=30,this.show2=40,this.show3=50,this.dataFetchStatus="init",this.fromDate=new Date,this.toDate=new Date,this.isdatewise=!1,this.loader2=!1,this.Excel=!1,this.Edata=[],this.isExcel=!1,this.excelLoad=!1,this.alert=!0,this.imageData=[],this.objectKeys=Object.keys,this.isdate=!1,this.selectedViolType=null,this.selectedCameraId=null,this.selectedDepartment=null,this.dropdownList=(0,d.of)([]),this.dropdownList1=(0,d.of)([]),this.fromDateControl=new p.NI((new Date).getTime(),p.kI.required),this.toDateControl=new p.NI(new Date,p.kI.required),this.excelFromDate=new p.NI(new Date,p.kI.required),this.excelToDate=new p.NI(new Date,p.kI.required),this.Images=[],this.loc2=new p.NI("",p.kI.required),this.violationTypeList=(0,d.of)([{key:"0",label:"All Violations",icon:"pi",data:"all_violations"}]),this.loaderLatest=!1,this.isLatest=!1,this.latest=!1,this.isEditTable=!0,this.violationsList=[],this.ranges={Today:[(0,x.Z)().hour(0).minute(0).second(0),(0,x.Z)()],Yesterday:[(0,x.Z)().subtract(1,"days").hour(0).minute(0).second(0),(0,x.Z)().subtract(1,"days")],"Last 7 Days":[(0,x.Z)().subtract(6,"days").hour(0).minute(0).second(0),(0,x.Z)()],"Last 30 Days":[(0,x.Z)().subtract(29,"days").hour(0).minute(0).second(0),(0,x.Z)()],"This Month":[(0,x.Z)().startOf("month").hour(0).minute(0).second(0),(0,x.Z)().endOf("month")],"Last Month":[(0,x.Z)().subtract(1,"month").startOf("month").hour(0).minute(0).second(0),(0,x.Z)().subtract(1,"month").endOf("month")]},this.selectedMoments=null,console.log("ppe violations component"),this.audioOff="true"==localStorage.getItem("audioOff"),this.alert="true"==localStorage.getItem("alert"),console.log(localStorage.getItem("audioOff"),localStorage.getItem("alert")),this.delay=this.webServer.logInterval,this.getCameraList(),this.getDepartmentList(),this.ExcelRange=0,this._lightBoxConfig.showDownloadButton=!1,this._lightBoxConfig.showZoom=!0,this._lightBoxConfig.showImageNumberLabel=!0,this._lightBoxConfig.fitImageInViewPort=!0,this._lightBoxConfig.disableScrolling=!1,this._lightBoxConfig.centerVertically=!1,this.API=n.IP,this.filterOut.valueChanges.pipe(((0,C.O)(""),(0,T.w)(I=>this.matches(I.strip())))).subscribe(I=>{this.tempdata=I,this.violData=(0,d.of)(I),this.sliceVD()}),this.excelFromDate.valueChanges.subscribe(I=>{this.isalert=!1}),this.excelToDate.valueChanges.subscribe(I=>{this.isalert=!1})}ngOnInit(){this.helmetFilterValue.valueChanges.subscribe(a=>{console.log(this.helmetFilterValue)});var t=this.webServer.dateTransform(new Date)+" 00:00:00",n=this.webServer.dateTransform(new Date)+" 23:59:59";this.fromDateControl.setValue(t),this.toDateControl.setValue(n),this.dropdownSettings={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0},this.dropdownSettings2={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No violation types detected",maxHeight:197},this.violLength=Number(localStorage.getItem("updatedLen")),this.GetPPEFilterValues(),(!this.latest||this.isLatest)&&this.webServer.LivePPEViolationData().subscribe(a=>{a.success?(this.prevLiveCount=a.now_live_count,this.imageData=a.message,this.tempdata=a.message,Number(localStorage.setItem("updatedLen",a.message.length?a.message.length:0)),this.tempdata=a.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(a.message),this.sliceVD()):(this.dataFetchStatus="success",this.notification(a.message))},a=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})}Reset(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.BackToToday()}ngAfterViewInit(){this.dataread()}openDatePicker(t){document.getElementById("dateInput").click()}dataread(){console.log("dataread"),this.interval=setInterval(()=>{console.log("this is from the dataread function"),this.isdate?(this.violData=(0,d.of)(),this.dataFetchStatus="success"):(Number(localStorage.getItem("updatedLen"))&&(this.violLength=Number(localStorage.getItem("updatedLen"))),this.Subsciption=this.webServer.LivePPEViolationData(this.selectedDepartment,this.selectedCameraId).subscribe(t=>{if(t.success){var n={...t},a=[...t.message];console.log(this.isLatest),console.log(t.message),localStorage.setItem("updatedLen",JSON.stringify(a.length));var o=Number(localStorage.getItem("updatedLen"));console.log(o),console.log(this.violLength),n.now_live_count-n.previous_live_count>0&&(this.violData=(0,d.of)(n.message))}},t=>{this.dataFetchStatus="Error"}))},this.delay)}showViol(){this.toasterService.error(this.Violation.nativeElement.innerHTML," ",{enableHtml:!0,positionClass:"toast-top-right"})}notification(t,n){this.snackbar.open(t,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"end",verticalPosition:"bottom"})}getDismissReason(t){return t===D.If.ESC?"by pressing ESC":t===D.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}matches(t){var n=this.tempdata.filter(o=>o.cameraid.includes(t)||o.roi_violation_name.includes(t)||o.deviceid.includes(t)||o.camera_name.includes(t));return this.tempdata=n,this.sliceVD(),(0,d.of)(n)}sliceVD(){if(this.isdate||(this.total=(0,d.of)(this.tempdata.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize).length),this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(this.tempdata.map((n,a)=>({SNo:a+1,...n})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize))),this.isdate){var t=document.getElementById("dataTable");t?.classList.add("loading"),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(n=>{n.success&&(t?.classList.remove("loading"),0===n.message.length&&(this.dataFetchStatus="success",this.notification("No violations found")),this.tempdata=n.message,this.violData=(0,d.of)(this.tempdata))})}}Submit(){clearInterval(this.interval),this.dataFetchStatus="Loading",this.isLatest=!1,this.selectedCameraId=this.selectedItems?this.selectedItems.data:null,this.selectedDepartment=this.selectedItems1?this.selectedItems1.data:null,this.Images=[],this.fromDate=this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.toDate=this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.getCameraList(),this.getDepartmentList(),this.Subsciption&&this.Subsciption.unsubscribe();var t=document.getElementById("dataTable");t?.classList.add("loading"),this.pageSize=30,this.page=1,this.isdate=!0,this.loading=!0,this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(n=>{n.success?(0==n.message.length&&(this.tempdata=[],this.violData=(0,d.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,d.of)(0),t?.classList.remove("loading"),this.notification("No violations found for entered date and time")),n.message.length>0&&(this.imageData=n.message,this.total=(0,d.of)(n.message.length),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(a=>{a.success&&(this.loading=!1,t?.classList.remove("loading"),0===a.message.length?(this.dataFetchStatus="success",this.notification("No violations found"),this.violData=(0,d.of)([]),this.isdatewise=!0,this.loading=!1):(this.tempdata=a.message,this.isdatewise=!0,this.violData=(0,d.of)(this.tempdata),this.sliceVD(),this.loading=!1)),this.loading=!1},a=>{this.dataFetchStatus="Error",this.loading=!1,this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,d.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,d.of)(0),t?.classList.remove("loading"),t?.classList.remove("loading"),this.dataFetchStatus="success",this.notification("No violations found"),this.loading=!1)},n=>{this.dataFetchStatus="Error",this.loading=!1})}SetPPEFilters(){this.webServer.ChangePPEFiltersData({ppepercentage:{helmet:this.helmetFilterValue.value,vest:this.vestFilterValue.value}}).subscribe(t=>{if(this.dataFetchStatus="success",this.GetPPEFilterValues(),this.isdatewise)this.Submit();else{this.tempdata=[],this.total=(0,d.of)(0),this.violData=(0,d.of)([]);var n=document.getElementById("dataTable");n?.classList.add("loading"),this.webServer.LivePPEViolationData().subscribe(a=>{a.success?(n?.classList.remove("loading"),this.imageData=a.message,this.tempdata=a.message,Number(localStorage.setItem("updatedLen",a.message.length?a.message.length:0)),this.tempdata=a.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(a.message),this.sliceVD()):(n?.classList.remove("loading"),this.notification(a.message),this.dataFetchStatus="success")},a=>{this.dataFetchStatus="Error",n?.classList.remove("loading"),this.notification("Error While fetching the data")})}})}GetPPEFilterValues(){this.webServer.GetPPEFiltersData().subscribe(t=>{t.success&&(this.vestFilterValue.setValue(t.message.vest),this.helmetFilterValue.setValue(t.message.helmet))},t=>{})}BackToToday(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.page=1,this.Images=[],this.latest=!1;var t=document.getElementById("dataTable");t?.classList.add("loading"),this.loader2=!0,this.isdate=!1,this.tempdata=[],this.total=(0,d.of)(0),this.isdate=!1,this.tempdata=[],this.total=(0,d.of)(0),this.webServer.LivePPEViolationData().subscribe(n=>{if(this.loader2=!1,this.dataFetchStatus="success",n){this.isLatest=!1,t?.classList.remove("loading"),this.imageData=n.message,this.total=(0,d.of)(n.message.length),n.success||(this.notification(n.message),this.dataFetchStatus="success");var a=n.message;this.tempdata=n.success?n.message:[],this.sliceVD(),this.isdatewise=!1,localStorage.setItem("updatedLen",JSON.stringify(a.length)),Number(localStorage.getItem("updatedLen"))}},n=>{this.dataFetchStatus="Error"}),this.dataread()}dateTransform(t){const n=new Date(t.year,t.month-1,t.day);return this.datepipe.transform(n,"dd/MM/yyyy")}onCameraIdSelect(t){this.isdatewise||(this.page=1),this.selectedCameraId=this.selectedItems.data,console.log(this.selectedItems),console.log(t),this.Submit()}onDepartmentIdSelect(t){this.isdatewise||(this.page=1),this.selectedDepartment=this.selectedItems1.data,console.log(this.selectedItems1),console.log(t),this.Submit()}imageCarousal(t){this.Images=[],t.imagename.forEach((n,a)=>{console.log(n),this.Images[a]={src:this.API+"/image/"+n,thumb:this.API+"/image/"+n,caption:n}}),this.open(0)}open(t){this._lightbox.open(this.Images,t)}close(){this._lightbox.close()}submitForm(){var t=this;return(0,S.Z)(function*(){t.isalert=!1,t.excelLoad=!0,t.isExcel=!1,t.selectedCameraId=t.selectedItems?t.selectedItems.data:null,t.selectedDepartment=t.selectedItems1?t.selectedItems1.data:null;var n={from_date:t.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),to_date:t.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),cameraname:t.selectedItems?"all_cameras"==t.selectedItems.data?null:t.selectedItems.data:null,department:t.selectedItems1?"all_departments"==t.selectedItems1.data?null:t.selectedItems1.data:null},a=new Date(t.excelFromDate.value);new Date(t.excelToDate.value).getTime(),a.getTime(),t.webServer.CreatePPEViolationExcel(n).subscribe(P=>{P.success?t.webServer.DownloadViolationExcel().subscribe(E=>{const A=new Blob([E.body],{type:".xlsx"});var I="violation report "+t.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss")+".xlsx";new File([A],I,{type:".xlsx"}),(0,L.saveAs)(A,I),t.excelLoad=!1,t.isExcel=!0},E=>{t.excelLoad=!1,t.excelLoader=!1}):(t.notification(P.message,"Retry"),t.excelLoad=!1,t.isExcel=!1,t.alertmessage=P.message,t.isalert=!0)},P=>{t.excelLoad=!1,t.isExcel=!1,t.alertmessage="Error while creating excel",t.notification(t.alertmessage,"Retry"),t.isalert=!0})})()}GetViolationLength(t,n,a,o){var c;return this.excelLoader=!0,this.webServer.DatewisePPEViolations(t,n,null,null,o||null,a||null).subscribe(h=>{h.success&&(c=h.message.length)}),c}settings(){this.router.navigate(["app/Settings"])}alertSound(){let t=new Audio;t.src="../../../assets/audio/alert.mp3",t.load(),t.play()}volumeToggle(){this.alert?(this.audioOff=!this.audioOff,localStorage.setItem("audioOff",this.audioOff?"true":"false")):(this.audioOff=!0,localStorage.setItem("audioOff","true"))}alertToggle(){this.alert=!this.alert,localStorage.setItem("alert",this.alert?"true":"false"),this.alert||(this.audioOff=!0,localStorage.setItem("alert","false"),localStorage.setItem("audioOff","true"),this.toasterService.clear())}GetLatestPPEData(){this.loader2=!1,this.loaderLatest=!0,this.latest=!0;var t=document.getElementById("dataTable");t?.classList.add("loading"),console.log(this.selectedViolType),this.webServer.GetLatestPPEData(this.selectedCameraId).subscribe(n=>{n.success?(this.isLatest=!0,t?.classList.remove("loading"),this.loaderLatest=!1,0===n.message.length?this.notification("No violations found"):this.dataFetchStatus="success",this.imageData=n.message,this.tempdata=n.message,console.log(this.tempdata),this.tempdata=n.message,this.total=(0,d.of)(n.message.length),this.violData=(0,d.of)(n.message),this.sliceVD()):(this.loaderLatest=!1,t?.classList.remove("loading"),this.notification("Error while fetching the data","Retry"))},n=>{this.loaderLatest=!1,t?.classList.remove("loading"),this.notification("Error While fetching the data","Retry")})}downloadImage(t){const n=t;new b.WM({responseType:"blob"}),console.log(n);const o=n.substr(n.lastIndexOf("/")+1);this.http.get(n,{responseType:"blob"}).subscribe(c=>{console.log("image url data",c),(0,L.saveAs)(c,o)},c=>{console.log("error",c)})}getCameraList(){var t=[],n=[];t[0]={key:"0",label:"All Cameras",data:"all_cameras"},this.webServer.GetPPECameraDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(a=>{!0===a.success&&(a.message.forEach((o,c)=>{n.push({cameraid:c,cameraname:o})}),(n=n.filter((o,c,h)=>c===h.indexOf(o))).forEach((o,c)=>{var h;h={key:(c+1).toString(),label:o.cameraname,data:o.cameraname},t.push(h)}),this.dropdownList=(0,d.of)(t))})}getDepartmentList(){var t=[],n=[];t[0]={key:"0",label:"All Departments",data:"all_departments"},this.webServer.GetPPEDepartmentDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(a=>{!0===a.success&&(a.message.forEach((o,c)=>{n.push({departmentid:c,department:o})}),(n=n.filter((o,c,h)=>c===h.indexOf(o))).forEach((o,c)=>{var h;h={key:(c+1).toString(),label:o.department,data:o.department},t.push(h)}),this.dropdownList1=(0,d.of)(t))})}SelectViol(t,n){this.editViol=t,this.modalService.open(n,{size:"xl",centered:!0})}VerifyTrueViol(t,n){this.editViol=n,this.webServer.VerifyViolation(this.editViol._id.$oid,!0).subscribe(a=>{this.webServer.notification(a.message),a.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},a=>{this.webServer.notification("Error while the  Process","Retry")})}VerifyFalseViol(t,n){this.editViol=n,this.webServer.VerifyViolation(this.editViol._id.$oid,!1).subscribe(a=>{this.webServer.notification(a.message),a.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},a=>{this.webServer.notification("Error while the  Process","Retry")})}IsDeleteData(t,n){this.selectedViolation=n,this.modalService.open(t)}DeleteViolationData(){this.webServer.DeleteViolationData(this.selectedViolation._id.$oid).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.RefreshViolationData(),this.webServer.notification(t.message)):(this.modalService.dismissAll(),this.webServer.notification(t.message,"Retry"))},t=>{this.webServer.notification("Error while the process","Retry")})}RefreshViolationData(){if(this.isdatewise||this.isLatest)if(this.isdatewise&&!this.isLatest){var t;(t=document.getElementById("dataTable"))?.classList.add("loading"),this.pageSize=30,this.page=1,this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(a=>{this.dataFetchStatus="success",a.success?(0==a.message.length&&(this.tempdata=[],this.violData=(0,d.of)([]),this.total=(0,d.of)(0),t?.classList.remove("loading"),this.notification("No violations found for entered date and time")),a.message.length>0&&(this.imageData=a.message,this.total=(0,d.of)(a.message.length),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(o=>{o.success&&(t?.classList.remove("loading"),0===o.message.length?(this.notification("No violations found"),this.dataFetchStatus="success",this.violData=(0,d.of)([])):(this.tempdata=o.message,this.violData=(0,d.of)(this.tempdata),this.sliceVD()))},o=>{this.dataFetchStatus="Error",this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,d.of)([]),this.total=(0,d.of)(0),t?.classList.remove("loading"),t?.classList.remove("loading"),this.notification("No violations found"),this.dataFetchStatus="success")},a=>{})}else(this.isLatest||this.latest)&&this.GetLatestPPEData();else(t=document.getElementById("dataTable"))?.classList.add("loading"),this.webServer.LivePPEViolationData().subscribe(n=>{this.latest||(t.classList.remove("loading"),!0!==n.success)||(this.imageData=n.message,this.tempdata=n.message,this.total=(0,d.of)(this.violdata.length),this.violData=(0,d.of)(n.message),this.sliceVD(),this.violdata=n.message,this.tempdata.length>0&&(this.Excel=!0),this.sliceVD())},n=>{t.classList.remove("loading"),console.log(n)})}GetViolationData(){var t=document.getElementById("content");t?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.LivePPEViolationData().subscribe(n=>{n.success?(t?.classList.remove("loading"),this.imageData=n.message,this.tempdata=n.message,Number(localStorage.setItem("updatedLen",n.message.length?n.message.length:0)),this.tempdata=n.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(n.message),this.sliceVD()):(t?.classList.remove("loading"),this.notification(n.message),this.dataFetchStatus="success")},n=>{t?.classList.remove("loading"),this.notification("Error While fetching the data")})}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.interval),this.isalert=!1}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(b.eN),e.\u0275\u0275directiveInject(H),e.\u0275\u0275directiveInject(y.DatePipe),e.\u0275\u0275directiveInject(f._W),e.\u0275\u0275directiveInject(_.ey),e.\u0275\u0275directiveInject(_.xm),e.\u0275\u0275directiveInject(l.F0),e.\u0275\u0275directiveInject(O.ux),e.\u0275\u0275directiveInject(D.FF),e.\u0275\u0275directiveInject(l.F0))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-ppeviolation"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(R,5),e.\u0275\u0275viewQuery(M.SP,5)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.Violation=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.pickerDirective=a)}},decls:111,vars:61,consts:[["id","content",1,"container-fluid","dashboard-content"],["datatable",""],[1,""],[1,"row"],["id","data-card",1,"d-flex","flex-row","align-items-center","card","p-2",2,"border-radius","7px !important"],[1,"me-3"],[1,"container","p-3"],["icon","filter"],[1,"col-10"],[1,"row","d-flex","align-items-center"],[1,"col-2"],[1,"dl-date-time-picker"],[1,"datePickerContainer",3,"click"],["type","text","ngxDaterangepickerMd","","placeholder","Select Date","required","","id","dateInput","autocomplete","off",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","ngModel","ngModelChange","datesUpdated"],["datepicker",""],[1,"input-group-append"],["type","button",1,"ngx-daterangepicker-action","btn","default"],["icon","calendar",1,"ngx-daterangepicker-action",3,"click"],["id","filter",1,"col-2"],["containerStyleClass","flex d-flex w-100","placeholder","Select Department",1,"w-100","w-full",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],["containerStyleClass","flex d-flex w-100","placeholder","Select Camera",1,"w-100","w-full",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],[1,"container","w-100","p-2",3,"click"],[1,"w-100","d-flex","justify-content-between","align-items-center"],[1,"text-black",2,"font-size","1rem !important"],[1,"float-end"],["icon","angle-down",1,"text-muted"],[3,"showCloseIcon","appendTo"],["overlay",""],[1,"border","rounded","p-3","m-3"],[1,"column-flex"],[1,"m-2"],[1,"mb-2"],["type","text","pInputText","",1,"form-control",3,"formControl","value","ngClass"],[1,"w-full",3,"formControl"],[4,"ngIf"],["type","text","pInputText","",1,"form-control",3,"ngClass","formControl","value"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","default","m-2",3,"disabled","click"],[1,"col-xl-4","col-sm-12","col-lg-12","col-xs-12","col-md-12"],[1,"d-flex","align-items-center"],["class","btn default-outline ms-3 me-3","style","white-space: nowrap",3,"click",4,"ngIf"],[1,"btn","default","text-white","me-3","ms-1",2,"width","80px",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","submit",1,"btn","default","text-white","me-3",2,"white-space","nowrap",3,"disabled","click"],["icon","download","class","ms-1 me-1","style","cursor: pointer",4,"ngIf"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],["class","btn default text-white","style","width: 100px",3,"click",4,"ngIf"],[1,"col-12"],["id","data-card",1,"card"],[1,"form-group"],["class","btn default me-2 text-white float-start",3,"click",4,"ngIf"],["class","float-end",4,"ngIf"],[1,"float-start","ms-2","mt-2","me-2"],[1,"d-flex","justify-content-end","p-1"],["class","mr-2 mt-2",4,"ngIf"],["class","custom-select col-2","style","width: auto",3,"ngModel","ngModelChange",4,"ngIf"],["id","dataTable",1,"",2,"width","100%","overflow","auto"],["class","table table-bordered","style","width: 100%; overflow: auto",4,"ngIf","ngIfElse"],[1,"d-flex","mx-auto","justify-content-center","p-1"],[2,"width","95vw","overflow-x","auto",3,"collectionSize","page","pageSize","pageChange"],[2,"display","none"],["dangerAlert",""],[1,"mb-0",2,"border","2px solid rgba(121, 20, 20, 0.699)","background-color","rgba(214, 148, 148, 0.459)"],[1,"modal-header",2,"text-align","center","color","rgba(121, 20, 20, 0.699)"],[1,"",2,"color","rgb(196, 54, 54) !important"],["class","modal-body",4,"ngIf"],["editViolation",""],["customTemplate",""],["popupTemplate",""],["deleteModal",""],["noData",""],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"btn","default-outline","ms-3","me-3",2,"white-space","nowrap",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["icon","download",1,"ms-1","me-1",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"btn","default","text-white",2,"width","100px",3,"click"],["icon","chart-area","class","text-white me-2",4,"ngIf"],["icon","chart-area",1,"text-white","me-2"],[1,"btn","default","me-2","text-white","float-start",3,"click"],["class","spinner-border spinner-border-sm me-2 ms-1","role","status","aria-hidden","true",4,"ngIf"],["icon","filter","class","ms-1 me-2 text-white","style","cursor: pointer",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","ms-1"],["icon","filter",1,"ms-1","me-2","text-white",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm","me-2","text-danger"],[1,"mr-2","mt-2"],[1,"custom-select","col-2",2,"width","auto",3,"ngModel","ngModelChange"],["ngValue","30"],["ngValue","40"],["ngValue","50"],[1,"table","table-bordered",2,"width","100%","overflow","auto"],[2,"text-align","center"],["scope","col"],["scope","col",4,"ngIf"],["style","text-align: center",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center"],["loading","lazy",1,"image",3,"src","click"],["class","btn btn-sm mt-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","default","text-white","mt-2",3,"click"],["track","vertical","pointerEventsMethod","scrollbar",2,"max-height","12rem !important",3,"autoHeightDisabled","disabled"],["scrollable",""],["class","border-bottom",4,"ngFor","ngForOf"],["id","verify","style","width: 3rem",4,"ngIf"],[1,"d-flex","justify-centent-center","align-items-center","mt-3"],["icon","trash",1,"text-danger",3,"click"],[1,"btn","btn-sm","mt-2",3,"click"],["icon","images",1,"mr-1"],[1,"border-bottom"],[1,"mb-3"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],["class","items",4,"ngIf"],[1,"items"],["id","item1","type","checkbox",3,"checked"],["for","item1"],["id","verify",2,"width","3rem"],["class","mt-1",4,"ngIf","ngIfElse"],["verified",""],[1,"mt-1"],["id","right",1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","change"],[1,"form-check-label","text-success",3,"for"],["id","wrong",1,"form-check","form-check-inline"],[1,"form-check-label","text-danger",3,"for"],["class","mt-1",4,"ngIf"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","defaultChecked","change"],[1,"modal-body"],["alt","","width","100%",1,"violImage",2,"width","30%","height","30%","object-fit","fill","border-radius","5px 5px 5px 5px",3,"src"],[1,"col-xl-12","col-md-12","col-lg-12","col-xs-12","text-white","mt-2"],[1,"text-muted"],[1,"text-white"],[1,"card","p-2"],[1,"col-6","d-flex","align-items-center"],[1,"card-img-top"],["alt","",2,"width","100%","height","auto","object-fit","contain",3,"src"],[1,"col-6"],[2,"height","90%","overflow","scroll"],[1,"",2,"width","100%"],["style","width: 100%",4,"ngIf"],[2,"width","100%"],[1,"list-unstyled","p-4"],["style","width: 5rem","class","d-inline","id","editViol",4,"ngIf"],["id","editViol",1,"d-inline",2,"width","5rem"],["id","item1","type","checkbox",1,"me-4",3,"checked"],["for","item1",1,"ms-4"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"],["id","data-card",1,"row","card","card-body"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,n){if(1&t){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"h5"),e.\u0275\u0275text(4,"Personal Protective Equipment Violations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",3)(7,"div",2)(8,"div",4)(9,"div",5)(10,"div",6),e.\u0275\u0275element(11,"fa-icon",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",8)(13,"div",9)(14,"span",10)(15,"div",11)(16,"div",12),e.\u0275\u0275listener("click",function(c){return n.openDatePicker(c)}),e.\u0275\u0275elementStart(17,"span")(18,"input",13,14),e.\u0275\u0275listener("ngModelChange",function(c){return n.selectedMoments=c})("datesUpdated",function(){return n.Submit()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"span",15)(21,"button",16)(22,"fa-icon",17),e.\u0275\u0275listener("click",function(c){return n.openDatePicker(c)}),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(23,"div",18)(24,"div",2)(25,"p-treeSelect",19),e.\u0275\u0275listener("ngModelChange",function(c){return n.selectedItems1=c})("onNodeSelect",function(c){return n.onDepartmentIdSelect(c)}),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",18)(28,"div",2)(29,"p-treeSelect",20),e.\u0275\u0275listener("ngModelChange",function(c){return n.selectedItems=c})("onNodeSelect",function(c){return n.onCameraIdSelect(c)}),e.\u0275\u0275pipe(30,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"span",10)(32,"div",21),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(a);const h=e.\u0275\u0275reference(39);return e.\u0275\u0275resetView(h.toggle(c))}),e.\u0275\u0275elementStart(33,"div",22)(34,"div",23),e.\u0275\u0275text(35," Violation Percentage "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",24),e.\u0275\u0275element(37,"fa-icon",25),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(38,"p-overlayPanel",26,27)(40,"div",28)(41,"div",29)(42,"div",30)(43,"div",31)(44,"b"),e.\u0275\u0275text(45,"Helmet"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(46,"input",32)(47,"p-slider",33),e.\u0275\u0275template(48,W,3,2,"div",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",30)(50,"div",31)(51,"b"),e.\u0275\u0275text(52,"Vest"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(53,"input",35)(54,"p-slider",33),e.\u0275\u0275template(55,J,3,2,"div",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"div",36)(57,"button",37),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275reference(39).hide(),e.\u0275\u0275resetView(n.SetPPEFilters())}),e.\u0275\u0275text(58," Apply "),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(59,"div",38)(60,"div",39),e.\u0275\u0275template(61,X,2,0,"button",40),e.\u0275\u0275elementStart(62,"button",41),e.\u0275\u0275listener("click",function(){return n.Submit()}),e.\u0275\u0275template(63,q,2,0,"span",34),e.\u0275\u0275template(64,ee,1,0,"span",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(65,"\xa0 "),e.\u0275\u0275elementStart(66,"button",43),e.\u0275\u0275listener("click",function(){return n.submitForm()}),e.\u0275\u0275template(67,te,1,0,"fa-icon",44),e.\u0275\u0275template(68,ne,1,0,"span",45),e.\u0275\u0275text(69," Excel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(70,"\xa0 "),e.\u0275\u0275elementStart(71,"div",2),e.\u0275\u0275template(72,se,4,3,"button",46),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(73,"div",3)(74,"div",47)(75,"div",48),e.\u0275\u0275element(76,"div",2),e.\u0275\u0275elementStart(77,"div",2)(78,"div",49)(79,"div",2),e.\u0275\u0275template(80,ce,4,2,"button",50),e.\u0275\u0275template(81,de,3,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(82,"span",52),e.\u0275\u0275elementStart(83,"span",53),e.\u0275\u0275template(84,me,3,0,"span",54),e.\u0275\u0275template(85,pe,7,1,"select",55),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(86,"div",56),e.\u0275\u0275template(87,Ie,26,4,"table",57),e.\u0275\u0275pipe(88,"async"),e.\u0275\u0275elementStart(89,"div",58)(90,"ngb-pagination",59),e.\u0275\u0275listener("pageChange",function(c){return n.page=c})("pageChange",function(){return n.sliceVD()}),e.\u0275\u0275pipe(91,"async"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(92,"div",60)(93,"div",47)(94,"div",null,61)(96,"div",62)(97,"div",63)(98,"h3",64),e.\u0275\u0275text(99," Violation "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(100,Pe,17,3,"div",65),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(101,Te,12,3,"ng-template",null,66,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(103,Me,3,0,"ng-template",null,67,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(105,ke,0,0,"ng-template",null,68,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(107,Ve,17,0,"ng-template",null,69,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(109,He,6,4,"ng-template",null,70,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()}if(2&t){const a=e.\u0275\u0275reference(110);e.\u0275\u0275advance(18),e.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",n.ranges)("timePicker",!0)("ngModel",n.selectedMoments),e.\u0275\u0275advance(7),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(53,N)),e.\u0275\u0275property("ngModel",n.selectedItems1)("ngModelOptions",e.\u0275\u0275pureFunction0(54,z))("options",e.\u0275\u0275pipeBind1(26,45,n.dropdownList1)),e.\u0275\u0275advance(4),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(55,N)),e.\u0275\u0275property("ngModel",n.selectedItems)("ngModelOptions",e.\u0275\u0275pureFunction0(56,z))("options",e.\u0275\u0275pipeBind1(30,47,n.dropdownList)),e.\u0275\u0275advance(9),e.\u0275\u0275property("showCloseIcon",!0)("appendTo","body"),e.\u0275\u0275advance(8),e.\u0275\u0275property("formControl",n.helmetFilterValue)("value",n.helmetFilterValue.value)("ngClass",e.\u0275\u0275pureFunction1(57,B,n.helmetFilterValue.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",n.helmetFilterValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=n.helmetFilterValue.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(59,B,n.vestFilterValue.invalid))("formControl",n.vestFilterValue)("value",n.vestFilterValue.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",n.vestFilterValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=n.vestFilterValue.errors),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.helmetFilterValue.invalid||n.vestFilterValue.invalid),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null!=n.selectedItems||null!=n.selectedMoments.startDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",null===n.selectedMoments.startDate||null===n.selectedMoments.endDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",null===n.selectedMoments.startDate||null===n.selectedMoments.endDate||n.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.excelLoad),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.isdatewise||n.isLatest),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",!n.isdatewise),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(n.isdatewise||n.isLatest)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.isdatewise),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isdatewise),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(88,49,n.violData).length>0)("ngIfElse",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",e.\u0275\u0275pipeBind1(91,51,n.total))("page",n.page)("pageSize",n.pageSize),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",n.currentViol)}},dependencies:[p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.Q7,p.oH,r.BN,y.NgClass,y.NgForOf,y.NgIf,p.On,D.N9,u.KC,M.SP,g.mP,v.T,F.iR,j.J,y.AsyncPipe],styles:['.image[_ngcontent-%COMP%]{border-radius:7px!important;margin-left:0;margin-right:0;height:174px;width:330px;object-fit:fill}.container[_ngcontent-%COMP%]{position:relative;background-color:#fff!important;font-size:1rem!important;opacity:1;padding:5px;border-radius:10px;border:1px solid #ccc;display:flex;height:2.9em;justify-content:space-between;align-items:center;box-shadow:5px 5px 8px #5e68794d!important}.container-temp[_ngcontent-%COMP%]{width:100%;max-width:100%;display:flex;height:2.9em;justify-content:space-between;align-items:center;padding:5px}.task-input[_ngcontent-%COMP%]{padding:0 25px;position:relative}.task-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 35px 5px 5px;height:40px}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}input[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{height:20px;width:20px}.task-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:50%;position:absolute;transform:translate(170px,-50%)}input[type=checkbox][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;top:5px;outline:none;counter-increment:undone-items}input[_ngcontent-%COMP%]:checked{pointer-events:none;order:2;counter-increment:done-items}label[_ngcontent-%COMP%]{pointer-events:none;display:block;position:relative;padding:15px 10px 15px 0;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s}label[_ngcontent-%COMP%]:before{content:"\\f10c";display:block;position:absolute;margin-right:10px;margin-left:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2713"}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2716"}#editViol[_ngcontent-%COMP%]{text-align:center;align-content:center}td[_ngcontent-%COMP%]{text-align:center!important;align-content:center!important}input[type=radio][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;outline:none;position:relative;counter-increment:undone-items}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{pointer-events:all;display:block;position:relative;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s;margin-left:10px!important}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"\\25ef";display:block;position:absolute;margin-right:10px!important;right:2rem;font-weight:500;color:#c9c9c9}#verify[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}#verify[_ngcontent-%COMP%]   #wrong[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:500;color:#cc1d1d;content:"\\2713"}#verify[_ngcontent-%COMP%]   #right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:700;color:#1dc41d;content:"\\2713"}.w-full[_ngcontent-%COMP%]{width:inherit!important;color:#000!important}.custom-popup[_ngcontent-%COMP%]{position:fixed;width:inherit!important;top:50%;left:50%;transform:translate(-50%,-50%,-20%);background-color:#fff;padding:20px;border:1px solid #ccc;box-shadow:0 2px 4px #0000001a}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}td[_ngcontent-%COMP%]{align-items:center!important;align-content:center!important;text-align:center!important}']}),i})()}];let Ne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.Bz.forChild(je),l.Bz]}),i})();var ze=m(9174),Be=m(1795),$=m(3608);let ht=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[y.CommonModule,l.Bz,Be.T,$.z,l.Bz,$.z]}),i})(),ft=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[ze.A,f.Rh,M.n1,g.o6,Ne,v.y,ht,F.JH]}),i})()},2435:(Z,V,m)=>{m.d(V,{T:()=>y,y:()=>H});var l=m(4650),S=m(6895),b=m(9592),p=m(805),d=m(1795),C=m(7340),T=m(982);function D(f,_){1&f&&l.\u0275\u0275elementContainer(0)}function L(f,_){if(1&f){const r=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",5),l.\u0275\u0275listener("click",function(g){l.\u0275\u0275restoreView(r);const v=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(v.onCloseClick(g))})("keydown.enter",function(){l.\u0275\u0275restoreView(r);const g=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(g.hide())}),l.\u0275\u0275element(1,"span",6),l.\u0275\u0275elementEnd()}if(2&f){const r=l.\u0275\u0275nextContext(2);l.\u0275\u0275attribute("aria-label",r.ariaCloseLabel)}}const M=function(f,_){return{showTransitionParams:f,hideTransitionParams:_}},x=function(f,_){return{value:f,params:_}};function e(f,_){if(1&f){const r=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",1),l.\u0275\u0275listener("click",function(g){l.\u0275\u0275restoreView(r);const v=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(v.onOverlayClick(g))})("@animation.start",function(g){l.\u0275\u0275restoreView(r);const v=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(v.onAnimationStart(g))})("@animation.done",function(g){l.\u0275\u0275restoreView(r);const v=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(v.onAnimationEnd(g))}),l.\u0275\u0275elementStart(1,"div",2),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(r);const g=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(g.onContentClick())})("mousedown",function(){l.\u0275\u0275restoreView(r);const g=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(g.onContentClick())}),l.\u0275\u0275projection(2),l.\u0275\u0275template(3,D,1,0,"ng-container",3),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(4,L,2,1,"button",4),l.\u0275\u0275elementEnd()}if(2&f){const r=l.\u0275\u0275nextContext();l.\u0275\u0275classMap(r.styleClass),l.\u0275\u0275property("ngClass","p-overlaypanel p-component")("ngStyle",r.style)("@animation",l.\u0275\u0275pureFunction2(10,x,r.overlayVisible?"open":"close",l.\u0275\u0275pureFunction2(7,M,r.showTransitionOptions,r.hideTransitionOptions))),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngTemplateOutlet",r.contentTemplate),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",r.showCloseIcon)}}const O=["*"];let y=(()=>{class f{constructor(r,u,g,v,F,j){this.el=r,this.renderer=u,this.cd=g,this.zone=v,this.config=F,this.overlayService=j,this.dismissable=!0,this.appendTo="body",this.autoZIndex=!0,this.baseZIndex=0,this.focusOnShow=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onShow=new l.EventEmitter,this.onHide=new l.EventEmitter,this.overlayVisible=!1,this.render=!1,this.isOverlayAnimationInProgress=!1,this.selfClick=!1}ngAfterContentInit(){this.templates.forEach(r=>{r.getType(),this.contentTemplate=r.template,this.cd.markForCheck()})}bindDocumentClickListener(){!this.documentClickListener&&this.dismissable&&this.zone.runOutsideAngular(()=>{let r=b.p.isIOS()?"touchstart":"click";this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",r,g=>{!this.container.contains(g.target)&&this.target!==g.target&&!this.target.contains(g.target)&&!this.selfClick&&this.zone.run(()=>{this.hide()}),this.selfClick=!1,this.cd.markForCheck()})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(r,u){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(r,u)&&(this.destroyCallback=()=>{this.show(null,u||r.currentTarget||r.target)}),this.hide()):this.show(r,u))}show(r,u){this.isOverlayAnimationInProgress||(this.target=u||r.currentTarget||r.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(r){this.overlayService.add({originalEvent:r,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(){this.selfClick=!0}hasTargetChanged(r,u){return null!=this.target&&this.target!==(u||r.currentTarget||r.target)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.container):b.p.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.container)}align(){this.autoZIndex&&T.P9.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),b.p.absolutePosition(this.container,this.target);const r=b.p.getOffset(this.container),u=b.p.getOffset(this.target);let g=0;r.left<u.left&&(g=u.left-r.left),this.container.style.setProperty("--overlayArrowLeft",`${g}px`),r.top<u.top&&(b.p.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&(this.container.style.marginTop="30px"))}onAnimationStart(r){"open"===r.toState&&(this.container=r.element,this.onShow.emit(null),this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=u=>{this.container&&this.container.contains(u.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(r){switch(r.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&T.P9.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1}this.isOverlayAnimationInProgress=!1}focus(){let r=b.p.findSingle(this.container,"[autofocus]");r&&this.zone.runOutsideAngular(()=>{setTimeout(()=>r.focus(),5)})}hide(){this.isOverlayAnimationInProgress||(this.overlayVisible=!1,this.cd.markForCheck())}onCloseClick(r){this.hide(),r.preventDefault()}onWindowResize(r){this.overlayVisible&&!b.p.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new b.V(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&T.P9.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}}return f.\u0275fac=function(r){return new(r||f)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject(l.Renderer2),l.\u0275\u0275directiveInject(l.ChangeDetectorRef),l.\u0275\u0275directiveInject(l.NgZone),l.\u0275\u0275directiveInject(p.b4),l.\u0275\u0275directiveInject(p.F0))},f.\u0275cmp=l.\u0275\u0275defineComponent({type:f,selectors:[["p-overlayPanel"]],contentQueries:function(r,u,g){if(1&r&&l.\u0275\u0275contentQuery(g,p.jx,4),2&r){let v;l.\u0275\u0275queryRefresh(v=l.\u0275\u0275loadQuery())&&(u.templates=v)}},hostAttrs:[1,"p-element"],inputs:{dismissable:"dismissable",showCloseIcon:"showCloseIcon",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",ariaCloseLabel:"ariaCloseLabel",baseZIndex:"baseZIndex",focusOnShow:"focusOnShow",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},ngContentSelectors:O,decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[1,"p-overlaypanel-close-icon","pi","pi-times"]],template:function(r,u){1&r&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275template(0,e,5,13,"div",0)),2&r&&l.\u0275\u0275property("ngIf",u.render)},dependencies:[S.NgClass,S.NgIf,S.NgTemplateOutlet,S.NgStyle,d.H],styles:['.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}\n'],encapsulation:2,data:{animation:[(0,C.X$)("animation",[(0,C.SB)("void",(0,C.oB)({transform:"scaleY(0.8)",opacity:0})),(0,C.SB)("close",(0,C.oB)({opacity:0})),(0,C.SB)("open",(0,C.oB)({transform:"translateY(0)",opacity:1})),(0,C.eR)("void => open",(0,C.jt)("{{showTransitionParams}}")),(0,C.eR)("open => close",(0,C.jt)("{{hideTransitionParams}}"))])]},changeDetection:0}),f})(),H=(()=>{class f{}return f.\u0275fac=function(r){return new(r||f)},f.\u0275mod=l.\u0275\u0275defineNgModule({type:f}),f.\u0275inj=l.\u0275\u0275defineInjector({imports:[S.CommonModule,d.T,p.m8,p.m8]}),f})()}}]);