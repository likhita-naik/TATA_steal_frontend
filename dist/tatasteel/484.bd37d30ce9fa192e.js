"use strict";(self.webpackChunktatasteel=self.webpackChunktatasteel||[]).push([[484],{2484:(St,b,c)=>{c.r(b),c.d(b,{CrowdCountViolationsModule:()=>bt});var f=c(9569),E=c(5861),C=c(529),m=c(433),d=c(9646),x=c(4327),v=c(1954),p=c(6948),t=c(4650),w=c(4179),g=c(6895);let M=(()=>{class i{constructor(e,n,o){this.http=e,this.snackbar=n,this.datePipe=o,this.logInterval=0;var a=this.loadConfigFile("assets/config.json");a=JSON.parse(a),this.logInterval=a.logInterval,this.IP=a.IP}loadConfigFile(e){return this.readConfigFile(e,"application/json")}readConfigFile(e,n){var o=new XMLHttpRequest;if(o.open("GET",e,!1),null!=n)return o.overrideMimeType&&o.overrideMimeType(n),o.send(),o.status?o.response:null}dateTransform(e){return this.datePipe.transform(e,"yyyy-MM-dd HH:mm:ss")}LiveCCViolationData(e,n,o,a){return"all_cameras"===n&&(n=null),"all_departments"===e&&(e=null),this.http.get(o&&a&&n&&e?this.IP+"/live_data1CC/"+n+"/"+e+"/"+o+"/"+a:!o&&!a&&n&&e?this.IP+"/live_data1CC/"+n+"/"+e:o&&a&&n&&!e?this.IP+"/live_data1CC/cameraname/"+n+"/"+o+"/"+a:o&&a&&!n&&e?this.IP+"/live_data1CC/department/"+e+"/"+o+"/"+a:o&&a&&!n&&!e?this.IP+"/live_data1CC/pagination/"+o+"/"+a:o||a||!n||e?o||a||n||!e?this.IP+"/live_data1CC":this.IP+"/live_data1CC/department/"+e:this.IP+"/live_data1CC/cameraname/"+n)}DatewiseCCViolations(e,n,o,a,l,r){var u=this.dateTransform(e),_=this.dateTransform(n);return"all_cameras"===r&&(r=null),"all_departments"===l&&(l="none"),this.http.post(o&&a&&r?this.IP+"/datewiseCC/"+r+"/"+o+"/"+a:o&&a&&!r&&!l?this.IP+"/datewiseCC/"+o+"/"+a:o||a||!r||l?this.IP+"/datewiseCC":this.IP+"/datewiseCC/"+r,{from_date:u,to_date:_,cameraName:r,department_name:l})}CreateCCViolationExcel(e){return this.http.post(this.IP+"/create_violation_excelCRDCNT",e)}DownloadViolationExcel(){return this.http.get(this.IP+"/violation_excel_download",{observe:"response",responseType:"arraybuffer"})}GetLatestCCData(e){return this.http.get(e?this.IP+"/latest_dataCC/"+e:this.IP+"/latest_dataCC")}GetCCCameraDetails(e,n){return null===e&&null===n?this.http.get(this.IP+"/camera_detailsCRDCNT"):this.http.post(this.IP+"/camera_detailsCRDCNT",{from_date:e,to_date:n})}GetCCDepartmentDetails(e,n){return null===e&&null===n?this.http.get(this.IP+"/department_detailsCRDCNT"):this.http.post(this.IP+"/department_detailsCRDCNT",{from_date:e,to_date:n})}GetViolationList(){return this.http.get(this.IP+"/violation_type_details")}VerifyViolation(e,n){return this.http.get(this.IP+"/violation_verification/"+e+"/"+n)}notification(e,n){this.snackbar.open(e,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"center",verticalPosition:"bottom"})}DeleteViolationData(e){return this.http.get(this.IP+"/Deleteviolation/"+e)}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275inject(C.eN),t.\u0275\u0275inject(w.ux),t.\u0275\u0275inject(g.DatePipe))},i.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var S=c(7185),y=c(1305),V=c(2953),T=c(2216),I=c(64),L=c(1968);const P=["dangerAlert"];function k(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",50),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.ResetFilters())}),t.\u0275\u0275text(1,"\xd7 Cancel Filters"),t.\u0275\u0275elementEnd()}}function O(i,s){1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"Submit"),t.\u0275\u0275elementEnd())}function F(i,s){1&i&&t.\u0275\u0275element(0,"span",51)}function j(i,s){1&i&&t.\u0275\u0275element(0,"fa-icon",52)}function N(i,s){1&i&&t.\u0275\u0275element(0,"span",53)}function Y(i,s){1&i&&t.\u0275\u0275element(0,"fa-icon",56)}function A(i,s){1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1," Live "),t.\u0275\u0275elementEnd())}function B(i,s){1&i&&t.\u0275\u0275element(0,"span",51)}function $(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",54),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.BackToToday())}),t.\u0275\u0275template(1,Y,1,0,"fa-icon",55),t.\u0275\u0275template(2,A,2,0,"span",22),t.\u0275\u0275template(3,B,1,0,"span",23),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loader2),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loader2),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loader2)}}function H(i,s){1&i&&t.\u0275\u0275element(0,"span",60)}function G(i,s){1&i&&t.\u0275\u0275element(0,"fa-icon",61)}function z(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.GetLatestCCData())}),t.\u0275\u0275template(1,H,1,0,"span",58),t.\u0275\u0275template(2,G,1,0,"fa-icon",59),t.\u0275\u0275text(3,"Latest "),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loaderLatest),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loaderLatest)}}function Z(i,s){1&i&&(t.\u0275\u0275elementStart(0,"span",62),t.\u0275\u0275element(1,"span",63),t.\u0275\u0275text(2,"Live Data"),t.\u0275\u0275elementEnd())}function J(i,s){1&i&&(t.\u0275\u0275elementStart(0,"span",64)(1,"b"),t.\u0275\u0275text(2,"Show:"),t.\u0275\u0275elementEnd()())}function Q(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"select",65),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.pageSize=o)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.sliceVD())}),t.\u0275\u0275elementStart(1,"option",66),t.\u0275\u0275text(2,"30 items per page"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"option",67),t.\u0275\u0275text(4,"40 items per page"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"option",68),t.\u0275\u0275text(6,"50 items per page"),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",e.pageSize)}}function U(i,s){1&i&&(t.\u0275\u0275elementStart(0,"th",71),t.\u0275\u0275text(1," Is Valid? "),t.\u0275\u0275elementEnd())}function W(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",80),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.imageCarousal(o))}),t.\u0275\u0275text(1,"\xa0\xa0 "),t.\u0275\u0275element(2,"fa-icon",81),t.\u0275\u0275text(3," More Images \xa0\xa0"),t.\u0275\u0275elementEnd()}}function K(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",83),t.\u0275\u0275text(1," Minimum "),t.\u0275\u0275elementStart(2,"span",84),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4," peop1e should be there,But only "),t.\u0275\u0275elementStart(5,"span",85),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(7,"people detected "),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.crowdcountdetails.data_object[0].min_count),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.analytics_data.data[0].count)}}function X(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",83),t.\u0275\u0275text(1," Maximum "),t.\u0275\u0275elementStart(2,"span",84),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4," people can be there,But "),t.\u0275\u0275elementStart(5,"span",85),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(7,"people detected "),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.crowdcountdetails.data_object[0].max_count),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.analytics_data.data[0].count)}}function q(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,K,8,2,"div",82),t.\u0275\u0275template(2,X,8,2,"div",82),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","MIN"==e.analytics_data.data[0].violation_type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","MAX"==e.analytics_data.data[0].violation_type)}}function R(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div",89)(2,"input",90),t.\u0275\u0275listener("change",function(o){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.VerifyTrueViol(o,a))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"label",91),t.\u0275\u0275text(4,"Yes "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",92)(6,"input",90),t.\u0275\u0275listener("change",function(o){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.VerifyFalseViol(o,a))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"label",93),t.\u0275\u0275text(8,"No "),t.\u0275\u0275elementEnd()()()}if(2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+e.SNo),t.\u0275\u0275advance(1),t.\u0275\u0275property("for","yes"+e.SNo),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+e.SNo),t.\u0275\u0275advance(1),t.\u0275\u0275property("for","no"+e.SNo)}}function tt(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div",89)(2,"input",94),t.\u0275\u0275listener("change",function(o){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.VerifyTrueViol(o,a))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"label",91),t.\u0275\u0275text(4,"Yes "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",92)(6,"input",94),t.\u0275\u0275listener("change",function(o){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.VerifyFalseViol(o,a))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"label",93),t.\u0275\u0275text(8,"No "),t.\u0275\u0275elementEnd()()()}if(2&i){const e=t.\u0275\u0275nextContext(3).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+e.SNo)("defaultChecked",!0===e.violation_status),t.\u0275\u0275advance(1),t.\u0275\u0275property("for","yes"+e.SNo),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+e.SNo)("defaultChecked",!1===e.violation_status),t.\u0275\u0275advance(1),t.\u0275\u0275property("for","no"+e.SNo)}}function et(i,s){if(1&i&&t.\u0275\u0275template(0,tt,9,10,"div",22),2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275property("ngIf",e.violation_verificaton_status)}}function nt(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",86),t.\u0275\u0275template(1,R,9,8,"div",87),t.\u0275\u0275template(2,et,1,1,"ng-template",null,88,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275reference(3),n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.violation_verificaton_status)("ngIfElse",e)}}function it(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr",70)(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",74),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.imageCarousal(a))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"br"),t.\u0275\u0275template(6,W,4,0,"button",75),t.\u0275\u0275text(7," \xa0"),t.\u0275\u0275elementStart(8,"button",76),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.downloadImage(l.API+"/image/"+a.imagename))}),t.\u0275\u0275text(9," Download Image "),t.\u0275\u0275element(10,"fa-icon",52),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"td"),t.\u0275\u0275template(12,q,3,2,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"td"),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"td"),t.\u0275\u0275text(16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"td"),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"dateFormater"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(20,nt,4,2,"td",77),t.\u0275\u0275elementStart(21,"td")(22,"div",1)(23,"div",78),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2),r=t.\u0275\u0275reference(73);return t.\u0275\u0275resetView(l.IsDeleteData(r,a))}),t.\u0275\u0275element(24,"fa-icon",79),t.\u0275\u0275elementEnd()()()()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.SNo),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",n.API+"/image/"+e.imagename[0],t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.imagename.length<1),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",null!=e.crowdcountdetails),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.department?e.department:"null"," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.camera_name?e.camera_name:"null"," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,8,e.timestamp)," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isEditTable)}}function ot(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"table",69)(1,"thead",70)(2,"tr")(3,"th",71)(4,"b"),t.\u0275\u0275text(5,"SNo."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"th",71)(7,"b"),t.\u0275\u0275text(8," Violation Image "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"th",71)(10,"b"),t.\u0275\u0275text(11," Violation Details "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"th",71)(13,"b"),t.\u0275\u0275text(14," Department "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"th",71)(16,"b"),t.\u0275\u0275text(17," Camera Name "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"th",71)(19,"b"),t.\u0275\u0275text(20," Detected Time "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(21,U,2,0,"th",72),t.\u0275\u0275element(22,"th",71),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"tbody"),t.\u0275\u0275template(24,it,25,10,"tr",73),t.\u0275\u0275pipe(25,"async"),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(21),t.\u0275\u0275property("ngIf",e.isEditTable),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(25,2,e.violData))}}function at(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",97)(1,"h4"),t.\u0275\u0275text(2," Violation Details are Not Found."),t.\u0275\u0275elementEnd()())}function st(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",97),t.\u0275\u0275element(1,"span",98),t.\u0275\u0275elementStart(2,"h4"),t.\u0275\u0275text(3,"Loading..."),t.\u0275\u0275elementEnd()())}function lt(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",97)(1,"h4"),t.\u0275\u0275text(2,"Loading..."),t.\u0275\u0275elementEnd()())}function rt(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",97)(1,"h4"),t.\u0275\u0275text(2," Error While Fetching the Data."),t.\u0275\u0275elementEnd()())}function dt(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",95)(1,"div",95),t.\u0275\u0275template(2,at,3,0,"div",96),t.\u0275\u0275template(3,st,4,0,"div",96),t.\u0275\u0275template(4,lt,3,0,"div",96),t.\u0275\u0275template(5,rt,3,0,"div",96),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","success"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","init"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Loading"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Error"==e.dataFetchStatus)}}function ct(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",99)(1,"div",2)(2,"div",28),t.\u0275\u0275element(3,"img",100),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",101)(5,"h5")(6,"span",102),t.\u0275\u0275text(7," Camera Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"b")(9,"span",103),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"h5")(12,"span",102),t.\u0275\u0275text(13," Detected Time : "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"b")(15,"span",103),t.\u0275\u0275text(16),t.\u0275\u0275elementEnd()()()()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("src",e.API+"/image/"+e.currentViol.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(e.currentViol.camera_name?e.currentViol.camera_name:"null"),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(e.currentViol.timestamp?e.currentViol.timestamp:"--")}}function mt(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",118),t.\u0275\u0275element(1,"input",119),t.\u0275\u0275elementStart(2,"label",120),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("checked","Vest"===e?"no_vest"==n[e]:n[e]),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate("Vest"===e?"Vest":e)}}function pt(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,mt,4,2,"div",117),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Helmet"===e?"none"!==n[e]&&!1===n[e]:"Vest"===e&&"no_vest"===n[e])}}function ht(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",114)(1,"div")(2,"div",1),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"br"),t.\u0275\u0275elementStart(5,"ul",115)(6,"li"),t.\u0275\u0275template(7,pt,2,1,"div",116),t.\u0275\u0275elementEnd()()()()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",e.violation_count,""),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngForOf",n.objectKeys(e))}}function ut(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",112),t.\u0275\u0275template(1,ht,8,2,"div",113),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.editViol.object_data)}}function gt(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",104)(1,"div",2)(2,"div",105)(3,"div",106),t.\u0275\u0275element(4,"img",107),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",108)(6,"div",109)(7,"div",110)(8,"h5",1),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"br"),t.\u0275\u0275template(11,ut,2,1,"div",111),t.\u0275\u0275elementEnd()()()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("src",e.API+"/image/"+e.editViol.imagename[0],t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.editViol.analyticstype),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","PPE"===e.editViol.analyticstype||"RA"===e.editViol.analyticstype)}}function ft(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",99)(1,"div",121)(2,"div",122)(3,"div",123)(4,"div",124)(5,"i",125),t.\u0275\u0275text(6,"\ue5cd"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"h4",126),t.\u0275\u0275text(8,"Are you sure?"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",99)(10,"p"),t.\u0275\u0275text(11,"Do you really want to delete this violation Details? This process cannot be undone. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",127)(13,"button",128),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(a.close("Cross click"))}),t.\u0275\u0275text(14,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",129),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.DeleteViolationData())}),t.\u0275\u0275text(16,"Delete"),t.\u0275\u0275elementEnd()()()()()}}const D=function(){return{standalone:!0}},_t=[{path:"",component:(()=>{class i{constructor(e,n,o,a,l,r,u,_,h,xt){this.http=e,this.webServer=n,this.datepipe=o,this.toasterService=a,this._lightbox=l,this._lightBoxConfig=r,this.router=u,this.snackbar=_,this.modalService=h,this.Router=xt,this.isAlert=!1,this.isalert=!1,this.dataFetchStatus="",this.tempdata=[],this.page=1,this.pageSize=30,this.audioOff=!1,this.alertmessage="",this.prevViolCount=0,this.total=(0,d.of)(0),this.violData=(0,d.of)([]),this.loading=!1,this.violLength=0,this.updatedLen=0,this.violdata=[],this.currentViol=null,this.show1=30,this.show2=40,this.show3=50,this.fromDate=new Date,this.toDate=new Date,this.isdatewise=!1,this.loader2=!1,this.Excel=!1,this.isExcel=!1,this.excelLoad=!1,this.alert=!0,this.imageData=[],this.objectKeys=Object.keys,this.isdate=!1,this.selectedViolType=null,this.selectedCameraId=null,this.selectedDepartment=null,this.dropdownList=(0,d.of)([]),this.dropdownList1=(0,d.of)([]),this.excelFromDate=new m.NI(new Date,m.kI.required),this.excelToDate=new m.NI(new Date,m.kI.required),this.Images=[],this.loc2=new m.NI("",m.kI.required),this.selectedItems=null,this.selectedItems1=null,this.violationTypeList=(0,d.of)([{key:"0",label:"All Violations",icon:"pi",data:"all_violations"}]),this.loaderLatest=!1,this.isLatest=!1,this.latest=!1,this.isEditTable=!0,this.violationsList=[],this.ranges={Today:[(0,p.Z)().hour(0).minute(0).second(0),(0,p.Z)()],Yesterday:[(0,p.Z)().subtract(1,"days").hour(0).minute(0).second(0),(0,p.Z)().subtract(1,"days")],"Last 7 Days":[(0,p.Z)().subtract(6,"days").hour(0).minute(0).second(0),(0,p.Z)()],"Last 30 Days":[(0,p.Z)().subtract(29,"days").hour(0).minute(0).second(0),(0,p.Z)()],"This Month":[(0,p.Z)().startOf("month").hour(0).minute(0).second(0),(0,p.Z)().endOf("month")],"Last Month":[(0,p.Z)().subtract(1,"month").startOf("month").hour(0).minute(0).second(0),(0,p.Z)().subtract(1,"month").endOf("month")]},this.selectedMoments=null,this.audioOff="true"==localStorage.getItem("audioOff"),this.alert="true"==localStorage.getItem("alert"),console.log(localStorage.getItem("audioOff"),localStorage.getItem("alert")),this.delay=this.webServer.logInterval,this.getCameraList(),this.getDepartmentList(),this.ExcelRange=0,this._lightBoxConfig.showDownloadButton=!1,this._lightBoxConfig.showZoom=!0,this._lightBoxConfig.showImageNumberLabel=!0,this._lightBoxConfig.fitImageInViewPort=!0,this._lightBoxConfig.disableScrolling=!1,this._lightBoxConfig.centerVertically=!1,this.API=n.IP,this.excelFromDate.valueChanges.subscribe(wt=>{this.isalert=!1}),this.excelToDate.valueChanges.subscribe(wt=>{this.isalert=!1})}ngOnInit(){this.dropdownSettings={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0},this.dropdownSettings2={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No violation types detected",maxHeight:197},this.violLength=Number(localStorage.getItem("updatedLen")),(!this.latest||this.isLatest)&&this.webServer.LiveCCViolationData(this.selectedDepartment,this.selectedCameraId).subscribe(e=>{this.dataFetchStatus="success",e.success?(this.prevViolCount=e.now_live_count,this.imageData=e.message,this.tempdata=e.message,Number(localStorage.setItem("updatedLen",e.message.length?e.message.length:0)),this.tempdata=e.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(e.message),this.sliceVD()):this.notification(e.message)},e=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})}ngAfterViewInit(){this.dataread()}openDatePicker(e){document.getElementById("dateInput").click()}dataread(){this.interval=setInterval(()=>{this.isdate?this.dataFetchStatus="success":(Number(localStorage.getItem("updatedLen"))&&(this.violLength=Number(localStorage.getItem("updatedLen"))),this.Subsciption=this.webServer.LiveCCViolationData(this.selectedDepartment,this.selectedCameraId).subscribe(e=>{if(this.dataFetchStatus="success",e.success){var n={...e};n.now_live_count-this.prevViolCount>0&&(this.prevViolCount=n.now_live_count,this.violData=(0,d.of)(n.message))}},e=>{this.dataFetchStatus="Error"}))},this.delay)}showViol(){this.toasterService.error(this.Violation.nativeElement.innerHTML," ",{enableHtml:!0,positionClass:"toast-top-right"})}notification(e,n){this.snackbar.open(e,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"end",verticalPosition:"bottom"})}sliceVD(){if(this.isdate||(this.total=(0,d.of)(this.tempdata.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize).length),this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(this.tempdata.map((n,o)=>({SNo:o+1,...n})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize))),this.isdate){var e=document.getElementById("dataTable");e?.classList.add("loading"),this.webServer.DatewiseCCViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(n=>{n.success&&(e?.classList.remove("loading"),0===n.message.length&&this.notification("No violations found"),this.tempdata=n.message,this.violData=(0,d.of)(this.tempdata))})}}Submit(){clearInterval(this.interval),this.dataFetchStatus="Loading",this.isLatest=!1,this.selectedCameraId=this.selectedItems?this.selectedItems.data:null,this.selectedDepartment=this.selectedItems1?this.selectedItems1.data:null,this.Images=[],this.fromDate=this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.toDate=this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.getCameraList(),this.getDepartmentList(),this.Subsciption&&this.Subsciption.unsubscribe();var e=document.getElementById("dataTable");e?.classList.add("loading"),this.pageSize=30,this.page=1,this.isdate=!0,this.loading=!0,this.webServer.DatewiseCCViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(n=>{n.success?(0===n.message.length&&(this.tempdata=[],this.violData=(0,d.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,d.of)(0),e?.classList.remove("loading"),this.dataFetchStatus="success",this.notification("No violations found for entered date and time")),n.message.length>0&&(this.imageData=n.message,this.total=(0,d.of)(n.message.length),this.webServer.DatewiseCCViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(o=>{o.success?(this.loading=!1,e?.classList.remove("loading"),0===o.message.length?(this.notification("No violations found"),this.dataFetchStatus="success",this.violData=(0,d.of)([]),this.isdatewise=!0,this.loading=!1,e?.classList.remove("loading")):(this.tempdata=o.message,this.isdatewise=!0,this.violData=(0,d.of)(this.tempdata),this.sliceVD(),this.loading=!1,e?.classList.remove("loading"))):(this.loading=!1,this.violData=(0,d.of)([]),e?.classList.remove("loading"),this.dataFetchStatus="success",this.notification(o.message))},o=>{this.dataFetchStatus="Error",this.loading=!1,e?.classList.remove("loading"),this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,d.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,d.of)(0),e?.classList.remove("loading"),e?.classList.remove("loading"),this.dataFetchStatus="success",this.notification("No violations found"),this.loading=!1)},n=>{this.loading=!1,e?.classList.remove("loading"),this.dataFetchStatus="success"}),this.interval2=setInterval(()=>{this.isdate&&(Number(localStorage.getItem("updatedLen"))&&(this.violLength=Number(localStorage.getItem("updatedLen"))),this.webServer.LiveCCViolationData(this.selectedDepartment,this.selectedCameraId).subscribe(n=>{if(n.success){var a={...n};a.now_live_count-this.prevViolCount>0&&(this.violdata=n.message,this.imageData=n.message,this.prevViolCount=a.now_live_count,this.violData=(0,d.of)(a.message))}}))},this.delay)}BackToToday(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.page=1,this.Images=[],this.latest=!1;var e=document.getElementById("dataTable");e?.classList.add("loading"),this.loader2=!0,this.interval2&&clearInterval(this.interval2),this.isdate=!1,this.tempdata=[],this.total=(0,d.of)(0),this.interval2&&clearInterval(this.interval2),this.isdate=!1,this.tempdata=[],this.total=(0,d.of)(0),this.webServer.LiveCCViolationData(this.selectedDepartment,this.selectedCameraId).subscribe(n=>{if(this.loader2=!1,n){this.isLatest=!1,e?.classList.remove("loading"),this.imageData=n.message,this.total=(0,d.of)(n.message.length),n.success||(this.dataFetchStatus="success",this.notification(n.message));var o=n.message;this.tempdata=n.success?n.message:[],this.sliceVD(),this.isdatewise=!1,localStorage.setItem("updatedLen",JSON.stringify(o.length)),Number(localStorage.getItem("updatedLen"))}}),this.dataread()}dateTransform(e){const n=new Date(e.year,e.month-1,e.day);return this.datepipe.transform(n,"dd/MM/yyyy")}onCameraIdSelect(e){this.isdatewise||(this.page=1),this.selectedCameraId=this.selectedItems.data,console.log(this.selectedItems),console.log(e),this.Submit()}onDepartmentIdSelect(e){this.isdatewise||(this.page=1),this.selectedDepartment=this.selectedItems1.data,console.log(this.selectedItems1),console.log(e),this.Submit()}onViolationTypeSelect(e){console.log(this.selectedViolation),console.log(e),console.log(e.item_id),this.isdatewise||(this.page=1),this.selectedViolType=this.selectedViolation.data,console.log(this.selectedViolType),console.log(e)}imageCarousal(e){this.Images=[],e.imagename.forEach((n,o)=>{console.log(n),this.Images[o]={src:this.API+"/image/"+n,thumb:this.API+"/image/"+n,caption:n}}),this.open(0)}open(e){this._lightbox.open(this.Images,e)}close(){this._lightbox.close()}submitForm(){var e=this;return(0,E.Z)(function*(){e.isalert=!1,e.excelLoad=!0,e.isExcel=!1,e.selectedViolType=e.selectedViolation?e.selectedViolation.data:null,e.selectedCameraId=e.selectedItems?e.selectedItems.data:null,e.selectedDepartment=e.selectedItems1?e.selectedItems1.data:null;var n={from_date:e.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),to_date:e.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),cameraname:e.selectedItems?"all_cameras"==e.selectedItems.data?null:e.selectedItems.data:null,department:e.selectedItems1?"all_departments"==e.selectedItems1.data?null:e.selectedItems1.data:null};e.webServer.CreateCCViolationExcel(n).subscribe(o=>{o.success?e.webServer.DownloadViolationExcel().subscribe(a=>{const r=new Blob([a.body],{type:".xlsx"});var u="violation report "+e.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss")+".xlsx";new File([r],u,{type:".xlsx"}),(0,x.saveAs)(r,u),e.excelLoad=!1,e.isExcel=!0},a=>{e.excelLoad=!1}):(e.notification(o.message,"Retry"),e.excelLoad=!1,e.isExcel=!1,e.alertmessage=o.message,e.isalert=!0)},o=>{e.excelLoad=!1,e.isExcel=!1,e.alertmessage="Error while creating excel",e.notification(e.alertmessage,"Retry"),e.isalert=!0})})()}GetViolationLength(e,n,o,a){var l;return this.webServer.DatewiseCCViolations(e,n,null,null,a||null,o||null).subscribe(r=>{r.success&&(l=r.message.length)}),l}settings(){this.router.navigate(["app/Settings"])}alertSound(){let e=new Audio;e.src="../../../assets/audio/alert.mp3",e.load(),e.play()}volumeToggle(){this.alert?(this.audioOff=!this.audioOff,localStorage.setItem("audioOff",this.audioOff?"true":"false")):(this.audioOff=!0,localStorage.setItem("audioOff","true"))}alertToggle(){this.alert=!this.alert,localStorage.setItem("alert",this.alert?"true":"false"),this.alert||(this.audioOff=!0,localStorage.setItem("alert","false"),localStorage.setItem("audioOff","true"))}GetLatestCCData(){this.loader2=!1,this.loaderLatest=!0,this.latest=!0;var e=document.getElementById("dataTable");e?.classList.add("loading"),console.log(this.selectedViolType),this.webServer.GetLatestCCData(this.selectedCameraId).subscribe(n=>{n.success?(this.isLatest=!0,e?.classList.remove("loading"),this.loaderLatest=!1,0===n.message.length&&this.notification("No violations found"),this.imageData=n.message,this.tempdata=n.message,console.log(this.tempdata),this.tempdata=n.message,this.total=(0,d.of)(n.message.length),this.violData=(0,d.of)(n.message),this.sliceVD()):(this.loaderLatest=!1,e?.classList.remove("loading"),this.notification(n.message,"Retry"))},n=>{this.loaderLatest=!1,e?.classList.remove("loading"),this.notification("Error While fetching the data","Retry")})}downloadImage(e){const n=e;new C.WM({responseType:"blob"}),console.log(n);const a=n.substr(n.lastIndexOf("/")+1);this.http.get(n,{responseType:"blob"}).subscribe(l=>{console.log("image url data",l),(0,x.saveAs)(l,a)},l=>{console.log("error",l)})}getCameraList(){var e=[],n=[];e[0]={key:"0",label:"All Cameras",data:"all_cameras"},this.webServer.GetCCCameraDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(o=>{!0===o.success&&(o.message.forEach((a,l)=>{n.push({cameraid:l,cameraname:a})}),(n=n.filter((a,l,r)=>l===r.indexOf(a))).forEach((a,l)=>{var r;r={key:(l+1).toString(),label:a.cameraname,data:a.cameraname},e.push(r)}),this.dropdownList=(0,d.of)(e))})}getDepartmentList(){var e=[],n=[];e[0]={key:"0",label:"All Departments",data:"all_departments"},this.webServer.GetCCDepartmentDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(o=>{!0===o.success&&(o.message.forEach((a,l)=>{n.push({departmentid:l,department:a})}),(n=n.filter((a,l,r)=>l===r.indexOf(a))).forEach((a,l)=>{var r;r={key:(l+1).toString(),label:a.department,data:a.department},e.push(r)}),this.dropdownList1=(0,d.of)(e))})}getViolationTypes(){var n=[];this.violationsList[0]={key:"0",label:"All Violations",data:"all_violations"},this.webServer.GetViolationList().subscribe(o=>{o.success&&(o.message.forEach(a=>{n.push(a)}),n.forEach((a,l)=>{var r;r={key:(l+1).toString(),icon:"pi",label:a,data:a},this.violationsList.push(r)}),this.violationTypeList=(0,d.of)(this.violationsList))})}SelectViol(e,n){this.editViol=e,this.modalService.open(n,{size:"xl",centered:!0})}VerifyTrueViol(e,n){this.editViol=n,this.webServer.VerifyViolation(this.editViol._id.$oid,!0).subscribe(o=>{this.webServer.notification(o.message),o.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},o=>{this.webServer.notification("Error while the  Process","Retry")})}VerifyFalseViol(e,n){this.editViol=n,this.webServer.VerifyViolation(this.editViol._id.$oid,!1).subscribe(o=>{this.webServer.notification(o.message),o.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},o=>{this.webServer.notification("Error while the  Process","Retry")})}ResetFilters(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.selectedCameraId=null,this.selectedDepartment=null,this.BackToToday()}GetViolationData(){var e=document.getElementById("content");e?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.LiveCCViolationData(this.selectedDepartment,this.selectedCameraId).subscribe(n=>{n.success?(e?.classList.remove("loading"),this.imageData=n.message,this.tempdata=n.message,Number(localStorage.setItem("updatedLen",n.message.length?n.message.length:0)),this.tempdata=n.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(n.message),this.sliceVD()):(e?.classList.remove("loading"),this.notification(n.message))},n=>{e?.classList.remove("loading"),this.notification("Error While fetching the data")})}IsDeleteData(e,n){this.selectedViolation=n,this.modalService.open(e)}DeleteViolationData(){this.webServer.DeleteViolationData(this.selectedViolation._id.$oid).subscribe(e=>{e.success?(this.modalService.dismissAll(),this.webServer.notification(e.message),this.dataread()):(this.modalService.dismissAll(),this.webServer.notification(e.message,"Retry"))},e=>{this.webServer.notification("Error while the process","Retry")})}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.interval),clearInterval(this.interval2),this.isalert=!1}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(C.eN),t.\u0275\u0275directiveInject(M),t.\u0275\u0275directiveInject(g.DatePipe),t.\u0275\u0275directiveInject(S._W),t.\u0275\u0275directiveInject(y.ey),t.\u0275\u0275directiveInject(y.xm),t.\u0275\u0275directiveInject(f.F0),t.\u0275\u0275directiveInject(w.ux),t.\u0275\u0275directiveInject(V.FF),t.\u0275\u0275directiveInject(f.F0))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-crowd-count-violations"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(P,5),t.\u0275\u0275viewQuery(v.SP,5)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.Violation=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.pickerDirective=o)}},decls:74,vars:38,consts:[["id","content",1,"container-fluid","dashboard-content"],[1,""],[1,"row"],["id","data-card",1,"d-flex","flex-row","card","p-2",2,"border-radius","7px !important"],[1,"me-3"],[1,"container","p-3"],["icon","filter"],[1,"col-10"],[1,"row","d-flex","align-items-center"],[1,"col-2"],[1,"datePickerContainer",3,"click"],["type","text","ngxDaterangepickerMd","","placeholder","Select Date","required","","id","dateInput","autocomplete","off",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","ngModel","ngModelChange","datesUpdated"],["datepicker",""],[1,"input-group-append"],["type","button",1,"ngx-daterangepicker-action","btn","default"],["icon","calendar",1,"ngx-daterangepicker-action",3,"click"],["id","filter",1,"col-2"],["containerStyleClass","w-100","placeholder","Select Department",1,"w-100",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],["containerStyleClass","w-100","placeholder","Select Camera",1,"w-100",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],[1,"col-xl-5","col-sm-12","col-lg-12","col-xs-12","col-md-12","d-flex","align-items-center"],["class","btn default-outline ms-3 me-3",3,"click",4,"ngIf"],[1,"btn","default","text-white","me-3","ms-1",2,"width","80px",3,"disabled","click"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","submit",1,"btn","default","text-white","me-3",3,"disabled","click"],["icon","download","class","ms-1 me-1","style","cursor: pointer;",4,"ngIf"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],["class","btn default text-white","style","width:100px",3,"click",4,"ngIf"],[1,"col-12"],["id","data-card",1,"card"],[1,"form-group"],["class","btn default me-2 text-white float-start",3,"click",4,"ngIf"],["class","float-end",4,"ngIf"],[1,"float-start","ms-2","mt-2","me-2"],[1,"d-flex","justify-content-end","p-1"],["class","mr-2 mt-2",4,"ngIf"],["class","custom-select col-2","style","width: auto",3,"ngModel","ngModelChange",4,"ngIf"],["id","dataTable",1,"",2,"width","100%","overflow","auto"],["class","table table-bordered","style","width:100%;overflow: auto;",4,"ngIf","ngIfElse"],["noData",""],[1,"d-flex","mx-auto","justify-content-center","p-1"],[2,"width","95vw","overflow-x","auto",3,"collectionSize","page","pageSize","pageChange"],[2,"display","none"],["dangerAlert",""],[1,"mb-0",2,"border","2px solid rgba(121, 20, 20, 0.699)","background-color","rgba(214, 148, 148, 0.459)"],[1,"modal-header",2,"text-align","center","color","rgba(121, 20, 20, 0.699)"],[1,"",2,"color","rgb(196, 54, 54) !important"],["class","modal-body",4,"ngIf"],["editViolation",""],["deleteModal",""],[1,"btn","default-outline","ms-3","me-3",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["icon","download",1,"ms-1","me-1",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"btn","default","text-white",2,"width","100px",3,"click"],["icon","chart-area","class","text-white me-2",4,"ngIf"],["icon","chart-area",1,"text-white","me-2"],[1,"btn","default","me-2","text-white","float-start",3,"click"],["class","spinner-border spinner-border-sm me-2 ms-1","role","status","aria-hidden","true",4,"ngIf"],["icon","filter","class","ms-1 me-2 text-white","style","cursor: pointer;",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","ms-1"],["icon","filter",1,"ms-1","me-2","text-white",2,"cursor","pointer"],[1,"float-end"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm","me-2","text-danger"],[1,"mr-2","mt-2"],[1,"custom-select","col-2",2,"width","auto",3,"ngModel","ngModelChange"],["ngValue","30"],["ngValue","40"],["ngValue","50"],[1,"table","table-bordered",2,"width","100%","overflow","auto"],[2,"text-align","center"],["scope","col"],["scope","col",4,"ngIf"],["style","text-align: center;",4,"ngFor","ngForOf"],["loading","lazy",1,"image",3,"src","click"],["class","btn btn-sm  mt-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","default","text-white","mt-2",3,"click"],["id","verify","style","width:3rem",4,"ngIf"],[1,"btn",3,"click"],["icon","trash",1,"text-danger"],[1,"btn","btn-sm","mt-2",3,"click"],["icon","images",1,"mr-1"],["class","m-1",4,"ngIf"],[1,"m-1"],[1,"success-badge"],[1,"danger-badge"],["id","verify",2,"width","3rem"],[4,"ngIf","ngIfElse"],["verified",""],["id","right",1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","change"],[1,"form-check-label","text-success",3,"for"],["id","wrong",1,"form-check","form-check-inline"],[1,"form-check-label","text-danger",3,"for"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","defaultChecked","change"],["id","data-card",1,"row","card","card-body"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"modal-body"],["loading","lazy","alt","","width","100%",1,"violImage",2,"width","30%","height","30%","object-fit","fill","border-radius","5px 5px 5px 5px",3,"src"],[1,"col-xl-12","col-md-12","col-lg-12","col-xs-12","text-white","mt-2"],[1,"text-muted"],[1,"text-white"],[1,"card","p-2"],[1,"col-6","d-flex","align-items-center"],[1,"card-img-top"],["alt","",2,"width","100%","height","auto","object-fit","contain",3,"src"],[1,"col-6"],[2,"height","90%","overflow","scroll"],[1,"",2,"width","100%"],["style","width:100%;",4,"ngIf"],[2,"width","100%"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"list-unstyled","p-4"],[4,"ngFor","ngForOf"],["style","width:5rem","class","d-inline","id","editViol",4,"ngIf"],["id","editViol",1,"d-inline",2,"width","5rem"],["id","item1","type","checkbox",1,"me-4",3,"checked"],["for","item1",1,"ms-4"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h5"),t.\u0275\u0275text(3," Crowd Count Violations "),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"br"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",2)(6,"div",1)(7,"div",3)(8,"div",4)(9,"div",5),t.\u0275\u0275element(10,"fa-icon",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"div",7)(12,"div",8)(13,"span",9)(14,"div",10),t.\u0275\u0275listener("click",function(a){return n.openDatePicker(a)}),t.\u0275\u0275elementStart(15,"span")(16,"input",11,12),t.\u0275\u0275listener("ngModelChange",function(a){return n.selectedMoments=a})("datesUpdated",function(){return n.Submit()}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"span",13)(19,"button",14)(20,"fa-icon",15),t.\u0275\u0275listener("click",function(a){return n.openDatePicker(a)}),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(21,"span",16)(22,"p-treeSelect",17),t.\u0275\u0275listener("ngModelChange",function(a){return n.selectedItems1=a})("onNodeSelect",function(a){return n.onDepartmentIdSelect(a)}),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"span",16)(25,"p-treeSelect",18),t.\u0275\u0275listener("ngModelChange",function(a){return n.selectedItems=a})("onNodeSelect",function(a){return n.onCameraIdSelect(a)}),t.\u0275\u0275pipe(26,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",19),t.\u0275\u0275template(28,k,2,0,"button",20),t.\u0275\u0275elementStart(29,"button",21),t.\u0275\u0275listener("click",function(){return n.Submit()}),t.\u0275\u0275template(30,O,2,0,"span",22),t.\u0275\u0275template(31,F,1,0,"span",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(32,"\xa0 "),t.\u0275\u0275elementStart(33,"button",24),t.\u0275\u0275listener("click",function(){return n.submitForm()}),t.\u0275\u0275template(34,j,1,0,"fa-icon",25),t.\u0275\u0275template(35,N,1,0,"span",26),t.\u0275\u0275text(36," Excel "),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(37,"\xa0 "),t.\u0275\u0275elementStart(38,"div",1),t.\u0275\u0275template(39,$,4,3,"button",27),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(40,"div",2)(41,"div",28)(42,"div",29),t.\u0275\u0275element(43,"div",1),t.\u0275\u0275elementStart(44,"div",1)(45,"div",30)(46,"div",1),t.\u0275\u0275template(47,z,4,2,"button",31),t.\u0275\u0275template(48,Z,3,0,"span",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(49,"span",33),t.\u0275\u0275elementStart(50,"span",34),t.\u0275\u0275template(51,J,3,0,"span",35),t.\u0275\u0275template(52,Q,7,1,"select",36),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(53,"div",37),t.\u0275\u0275template(54,ot,26,4,"table",38),t.\u0275\u0275pipe(55,"async"),t.\u0275\u0275template(56,dt,6,4,"ng-template",null,39,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(58,"div",40)(59,"ngb-pagination",41),t.\u0275\u0275listener("pageChange",function(a){return n.page=a})("pageChange",function(){return n.sliceVD()}),t.\u0275\u0275pipe(60,"async"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(61,"div",42)(62,"div",28)(63,"div",null,43)(65,"div",44)(66,"div",45)(67,"h3",46),t.\u0275\u0275text(68,"Violation"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(69,ct,17,3,"div",47),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275template(70,gt,12,3,"ng-template",null,48,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(72,ft,17,0,"ng-template",null,49,t.\u0275\u0275templateRefExtractor)),2&e){const o=t.\u0275\u0275reference(57);t.\u0275\u0275advance(16),t.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",n.ranges)("timePicker",!0)("ngModel",n.selectedMoments),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",n.selectedItems1)("ngModelOptions",t.\u0275\u0275pureFunction0(36,D))("options",t.\u0275\u0275pipeBind1(23,28,n.dropdownList1)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngModel",n.selectedItems)("ngModelOptions",t.\u0275\u0275pureFunction0(37,D))("options",t.\u0275\u0275pipeBind1(26,30,n.dropdownList)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",null!==n.selectedItems||null!=n.selectedMoments.startDate),t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",null===n.selectedMoments.startDate||null===n.selectedMoments.endDate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.loading),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",null===n.selectedMoments.startDate||null===n.selectedMoments.endDate||n.excelLoad),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.excelLoad),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.excelLoad),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.isdatewise||n.isLatest),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",!n.isdatewise),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(n.isdatewise||n.isLatest)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isdatewise),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isdatewise),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(55,32,n.violData).length>0)("ngIfElse",o),t.\u0275\u0275advance(5),t.\u0275\u0275property("collectionSize",t.\u0275\u0275pipeBind1(60,34,n.total))("page",n.page)("pageSize",n.pageSize),t.\u0275\u0275advance(10),t.\u0275\u0275property("ngIf",n.currentViol)}},dependencies:[m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.Q7,T.BN,g.NgForOf,g.NgIf,m.On,V.N9,v.SP,I.mP,L.J,g.AsyncPipe],styles:['.image[_ngcontent-%COMP%]{margin-left:0;margin-right:0;height:174px;width:330px;object-fit:cover;border-radius:2px!important}.task-input[_ngcontent-%COMP%]{padding:0 25px;position:relative}.task-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 35px 5px 5px;height:40px}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}input[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{height:20px;width:20px}.task-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:50%;position:absolute;transform:translate(170px,-50%)}input[type=checkbox][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;top:5px;outline:none;counter-increment:undone-items}input[_ngcontent-%COMP%]:checked{pointer-events:none;order:2;counter-increment:done-items}label[_ngcontent-%COMP%]{pointer-events:none;display:block;position:relative;padding:15px 10px 15px 0;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s}label[_ngcontent-%COMP%]:before{content:"\\f10c";display:block;position:absolute;margin-right:10px;margin-left:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2713"}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2716"}#editViol[_ngcontent-%COMP%]{text-align:center;align-content:center}td[_ngcontent-%COMP%]{text-align:center!important;align-content:center!important}input[type=radio][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;outline:none;position:relative;counter-increment:undone-items}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{pointer-events:all;display:block;position:relative;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s;margin-left:10px!important}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"\\25ef";display:block;position:absolute;margin-right:10px!important;right:2rem;font-weight:500;color:#c9c9c9}#verify[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}#verify[_ngcontent-%COMP%]   #wrong[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:500;color:#cc1d1d;content:"\\2713"}#verify[_ngcontent-%COMP%]   #right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:700;color:#1dc41d;content:"\\2713"}.w-full[_ngcontent-%COMP%]{width:inherit!important;color:#000!important}.container[_ngcontent-%COMP%]{position:relative;background-color:#fff!important;opacity:1;padding:5px;border-radius:10px;border:1px solid #ccc;display:flex;height:2.9em;justify-content:space-between;align-items:center;box-shadow:5px 5px 8px #5e68794d!important}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}.image[_ngcontent-%COMP%]{margin-left:0;margin-right:0;height:174px;width:330px;object-fit:cover;border-radius:5px!important}']}),i})()}];let Ct=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.Bz.forChild(_t),f.Bz]}),i})();var vt=c(9174);let bt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[vt.A,S.Rh,v.n1,I.o6,Ct]}),i})()}}]);