var fabric=fabric||{version:"5.3.0"};if(typeof exports<"u"?exports.fabric=fabric:"function"==typeof define&&define.amd&&define([],function(){return fabric}),typeof document<"u"&&typeof window<"u")fabric.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),fabric.window=window;else{var jsdom=require("jsdom"),virtualWindow=new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;fabric.document=virtualWindow.document,fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,fabric.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas,fabric.window=virtualWindow,DOMParser=fabric.window.DOMParser}function resizeCanvasIfNeeded(h){var n=h.targetCanvas,t=h.destinationWidth,e=h.destinationHeight;n.width===t&&n.height===e||(n.width=t,n.height=e)}function copyGLTo2DDrawImage(h,n){var a=h.canvas,l=n.targetCanvas,t=l.getContext("2d");t.translate(0,l.height),t.scale(1,-1),t.drawImage(a,0,a.height-l.height,l.width,l.height,0,0,l.width,l.height)}function copyGLTo2DPutImageData(h,n){var a=n.targetCanvas.getContext("2d"),l=n.destinationWidth,t=n.destinationHeight,e=l*t*4,i=new Uint8Array(this.imageBuffer,0,e),r=new Uint8ClampedArray(this.imageBuffer,0,e);h.readPixels(0,0,l,t,h.RGBA,h.UNSIGNED_BYTE,i);var s=new ImageData(r,l,t);a.putImageData(s,0,0)}fabric.isTouchSupported="ontouchstart"in fabric.window||"ontouchstart"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints,fabric.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",fabric.commaWsp="(?:\\s+,?\\s*|,\\s*)",fabric.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,fabric.reNonWord=/[ \n\.,;!\?\-]/,fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.svgNS="http://www.w3.org/2000/svg",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.disableStyleCopyPaste=!1,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.forceGLPutImageData=!1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=fabric),function(){function h(a,l){if(this.__eventListeners[a]){var t=this.__eventListeners[a];l?t[t.indexOf(l)]=!1:fabric.util.array.fill(t,!1)}}function n(a,l){var t=function(){l.apply(this,arguments),this.off(a,t)}.bind(this);this.on(a,t)}fabric.Observable={fire:function(a,l){if(!this.__eventListeners)return this;var t=this.__eventListeners[a];if(!t)return this;for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].call(this,l||{});return this.__eventListeners[a]=t.filter(function(r){return!1!==r}),this},on:function(a,l){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var t in a)this.on(t,a[t]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(l);return this},once:function(a,l){if(1===arguments.length)for(var t in a)n.call(this,t,a[t]);else n.call(this,a,l);return this},off:function(a,l){if(!this.__eventListeners)return this;if(0===arguments.length)for(a in this.__eventListeners)h.call(this,a);else if(1===arguments.length&&"object"==typeof a)for(var t in a)h.call(this,t,a[t]);else h.call(this,a,l);return this}}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,n=arguments.length;h<n;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,n,a){var l=this._objects;return a?l[n]=h:l.splice(n,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h,n=this._objects,a=!1,l=0,t=arguments.length;l<t;l++)-1!==(h=n.indexOf(arguments[l]))&&(a=!0,n.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[l]));return this.renderOnAddRemove&&a&&this.requestRenderAll(),this},forEachObject:function(h,n){for(var a=this.getObjects(),l=0,t=a.length;l<t;l++)h.call(n,a[l],l,a);return this},getObjects:function(h){return void 0===h?this._objects.concat():this._objects.filter(function(n){return n.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(h,n){return-1<this._objects.indexOf(h)||!!n&&this._objects.some(function(a){return"function"==typeof a.contains&&a.contains(h,!0)})},complexity:function(){return this._objects.reduce(function(h,n){return h+(n.complexity?n.complexity():0)},0)}},fabric.CommonMethods={_setOptions:function(h){for(var n in h)this.set(n,h[n])},_initGradient:function(h,n){!h||!h.colorStops||h instanceof fabric.Gradient||this.set(n,new fabric.Gradient(h))},_initPattern:function(h,n,a){!h||!h.source||h instanceof fabric.Pattern?a&&a():this.set(n,new fabric.Pattern(h,a))},_setObject:function(h){for(var n in h)this._set(n,h[n])},set:function(h,n){return"object"==typeof h?this._setObject(h):this._set(h,n),this},_set:function(h,n){this[h]=n},toggle:function(h){var n=this.get(h);return"boolean"==typeof n&&this.set(h,!n),this},get:function(h){return this[h]}},function(h){var n=Math.sqrt,a=Math.atan2,l=Math.pow,t=Math.PI/180,e=Math.PI/2;fabric.util={cos:function(i){if(0===i)return 1;switch(i<0&&(i=-i),i/e){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(0===i)return 0;var r=1;switch(i<0&&(r=-1),i/e){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(i)},removeFromArray:function(i,r){var s=i.indexOf(r);return-1!==s&&i.splice(s,1),i},getRandomInt:function(i,r){return Math.floor(Math.random()*(r-i+1))+i},degreesToRadians:function(i){return i*t},radiansToDegrees:function(i){return i/t},rotatePoint:function(i,r,s){var o=new fabric.Point(i.x-r.x,i.y-r.y),u=fabric.util.rotateVector(o,s);return new fabric.Point(u.x,u.y).addEquals(r)},rotateVector:function(i,r){var s=fabric.util.sin(r),o=fabric.util.cos(r);return{x:i.x*o-i.y*s,y:i.x*s+i.y*o}},createVector:function(i,r){return new fabric.Point(r.x-i.x,r.y-i.y)},calcAngleBetweenVectors:function(i,r){return Math.acos((i.x*r.x+i.y*r.y)/(Math.hypot(i.x,i.y)*Math.hypot(r.x,r.y)))},getHatVector:function(i){return new fabric.Point(i.x,i.y).multiply(1/Math.hypot(i.x,i.y))},getBisector:function(i,r,s){var o=fabric.util.createVector(i,r),u=fabric.util.createVector(i,s),g=fabric.util.calcAngleBetweenVectors(o,u),v=g*(0===fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(o,g),u)?1:-1)/2;return{vector:fabric.util.getHatVector(fabric.util.rotateVector(o,v)),angle:g}},projectStrokeOnPoints:function(i,r,s){var o=[],u=r.strokeWidth/2,g=r.strokeUniform?new fabric.Point(1/r.scaleX,1/r.scaleY):new fabric.Point(1,1),v=function(b){var _=u/Math.hypot(b.x,b.y);return new fabric.Point(b.x*_*g.x,b.y*_*g.y)};return i.length<=1||i.forEach(function(b,_){var S,E,M=new fabric.Point(b.x,b.y);0===_?(E=i[_+1],S=s?v(fabric.util.createVector(E,M)).addEquals(M):i[i.length-1]):_===i.length-1?(S=i[_-1],E=s?v(fabric.util.createVector(S,M)).addEquals(M):i[0]):(S=i[_-1],E=i[_+1]);var F,G,q=fabric.util.getBisector(M,S,E),k=q.vector;if("miter"===r.strokeLineJoin&&(F=-u/Math.sin(q.angle/2),G=new fabric.Point(k.x*F*g.x,k.y*F*g.y),Math.hypot(G.x,G.y)/u<=r.strokeMiterLimit))return o.push(M.add(G)),void o.push(M.subtract(G));F=-u*Math.SQRT2,G=new fabric.Point(k.x*F*g.x,k.y*F*g.y),o.push(M.add(G)),o.push(M.subtract(G))}),o},transformPoint:function(i,r,s){return s?new fabric.Point(r[0]*i.x+r[2]*i.y,r[1]*i.x+r[3]*i.y):new fabric.Point(r[0]*i.x+r[2]*i.y+r[4],r[1]*i.x+r[3]*i.y+r[5])},makeBoundingBoxFromPoints:function(i,r){if(r)for(var s=0;s<i.length;s++)i[s]=fabric.util.transformPoint(i[s],r);var o=[i[0].x,i[1].x,i[2].x,i[3].x],u=fabric.util.array.min(o),g=fabric.util.array.max(o)-u,v=[i[0].y,i[1].y,i[2].y,i[3].y],b=fabric.util.array.min(v);return{left:u,top:b,width:g,height:fabric.util.array.max(v)-b}},invertTransform:function(i){var r=1/(i[0]*i[3]-i[1]*i[2]),s=[r*i[3],-r*i[1],-r*i[2],r*i[0]],o=fabric.util.transformPoint({x:i[4],y:i[5]},s,!0);return s[4]=-o.x,s[5]=-o.y,s},toFixed:function(i,r){return parseFloat(Number(i).toFixed(r))},parseUnit:function(i,r){var s=/\D{0,2}$/.exec(i),o=parseFloat(i);switch(r||(r=fabric.Text.DEFAULT_SVG_FONT_SIZE),s[0]){case"mm":return o*fabric.DPI/25.4;case"cm":return o*fabric.DPI/2.54;case"in":return o*fabric.DPI;case"pt":return o*fabric.DPI/72;case"pc":return o*fabric.DPI/72*12;case"em":return o*r;default:return o}},falseFunction:function(){return!1},getKlass:function(i,r){return i=fabric.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),fabric.util.resolveNamespace(r)[i]},getSvgAttributes:function(i){var r=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":r=r.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":r=r.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":r=r.concat(["offset","stop-color","stop-opacity"])}return r},resolveNamespace:function(i){if(!i)return fabric;var r,s=i.split("."),o=s.length,u=h||fabric.window;for(r=0;r<o;++r)u=u[s[r]];return u},loadImage:function(i,r,s,o){if(i){var u=fabric.util.createImage(),g=function(){r&&r.call(s,u,!1),u=u.onload=u.onerror=null};u.onload=g,u.onerror=function(){fabric.log("Error loading "+u.src),r&&r.call(s,null,!0),u=u.onload=u.onerror=null},0!==i.indexOf("data")&&null!=o&&(u.crossOrigin=o),"data:image/svg"===i.substring(0,14)&&(u.onload=null,fabric.util.loadImageInDom(u,g)),u.src=i}else r&&r.call(s,i)},loadImageInDom:function(i,r){var s=fabric.document.createElement("div");s.style.width=s.style.height="1px",s.style.left=s.style.top="-100%",s.style.position="absolute",s.appendChild(i),fabric.document.querySelector("body").appendChild(s),i.onload=function(){r(),s.parentNode.removeChild(s),s=null}},enlivenObjects:function(i,r,s,o){var u=[],g=0,v=(i=i||[]).length;function b(){++g===v&&r&&r(u.filter(function(_){return _}))}v?i.forEach(function(_,S){_&&_.type?fabric.util.getKlass(_.type,s).fromObject(_,function(E,M){M||(u[S]=E),o&&o(_,E,M),b()}):b()}):r&&r(u)},enlivenObjectEnlivables:function(i,r,s){var o=fabric.Object.ENLIVEN_PROPS.filter(function(u){return!!i[u]});fabric.util.enlivenObjects(o.map(function(u){return i[u]}),function(u){var g={};o.forEach(function(v,b){g[v]=u[b],r&&(r[v]=u[b])}),s&&s(g)})},enlivenPatterns:function(i,r){function s(){++u===g&&r&&r(o)}var o=[],u=0,g=(i=i||[]).length;g?i.forEach(function(v,b){v&&v.source?new fabric.Pattern(v,function(_){o[b]=_,s()}):(o[b]=v,s())}):r&&r(o)},groupSVGElements:function(i,r,s){var o;return i&&1===i.length?(void 0!==s&&(i[0].sourcePath=s),i[0]):(r&&(r.width&&r.height?r.centerPoint={x:r.width/2,y:r.height/2}:(delete r.width,delete r.height)),o=new fabric.Group(i,r),void 0!==s&&(o.sourcePath=s),o)},populateWithProperties:function(i,r,s){if(s&&Array.isArray(s))for(var o=0,u=s.length;o<u;o++)s[o]in i&&(r[s[o]]=i[s[o]])},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(i){var r=fabric.util.createCanvasElement();return r.width=i.width,r.height=i.height,r.getContext("2d").drawImage(i,0,0),r},toDataURL:function(i,r,s){return i.toDataURL("image/"+r,s)},createImage:function(){return fabric.document.createElement("img")},multiplyTransformMatrices:function(i,r,s){return[i[0]*r[0]+i[2]*r[1],i[1]*r[0]+i[3]*r[1],i[0]*r[2]+i[2]*r[3],i[1]*r[2]+i[3]*r[3],s?0:i[0]*r[4]+i[2]*r[5]+i[4],s?0:i[1]*r[4]+i[3]*r[5]+i[5]]},qrDecompose:function(i){var r=a(i[1],i[0]),s=l(i[0],2)+l(i[1],2),o=n(s),u=(i[0]*i[3]-i[2]*i[1])/o,g=a(i[0]*i[2]+i[1]*i[3],s);return{angle:r/t,scaleX:o,scaleY:u,skewX:g/t,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return fabric.iMatrix.concat();var r=fabric.util.degreesToRadians(i.angle),s=fabric.util.cos(r),o=fabric.util.sin(r);return[s,o,-o,s,0,0]},calcDimensionsMatrix:function(i){var r=void 0===i.scaleX?1:i.scaleX,s=void 0===i.scaleY?1:i.scaleY,o=[i.flipX?-r:r,0,0,i.flipY?-s:s,0,0],u=fabric.util.multiplyTransformMatrices,g=fabric.util.degreesToRadians;return i.skewX&&(o=u(o,[1,0,Math.tan(g(i.skewX)),1],!0)),i.skewY&&(o=u(o,[1,Math.tan(g(i.skewY)),0,1],!0)),o},composeMatrix:function(i){var r=[1,0,0,1,i.translateX||0,i.translateY||0],s=fabric.util.multiplyTransformMatrices;return i.angle&&(r=s(r,fabric.util.calcRotateMatrix(i))),(1!==i.scaleX||1!==i.scaleY||i.skewX||i.skewY||i.flipX||i.flipY)&&(r=s(r,fabric.util.calcDimensionsMatrix(i))),r},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,r,s,o){0<o&&(o<r?r-=o:r=0,o<s?s-=o:s=0);var u,g=!0,v=i.getImageData(r,s,2*o||1,2*o||1),b=v.data.length;for(u=3;u<b&&(g=v.data[u]<=0);u+=4);return v=null,g},parsePreserveAspectRatioAttribute:function(i){var r,s="meet",o=i.split(" ");return o&&o.length&&("meet"!==(s=o.pop())&&"slice"!==s?(r=s,s="meet"):o.length&&(r=o.pop())),{meetOrSlice:s,alignX:"none"!==r?r.slice(1,4):"none",alignY:"none"!==r?r.slice(5,8):"none"}},clearFabricFontCache:function(i){(i=(i||"").toLowerCase())?fabric.charWidthsCache[i]&&delete fabric.charWidthsCache[i]:fabric.charWidthsCache={}},limitDimsByArea:function(i,r){var s=Math.sqrt(r*i),o=Math.floor(r/s);return{x:Math.floor(s),y:o}},capValue:function(i,r,s){return Math.max(i,Math.min(r,s))},findScaleToFit:function(i,r){return Math.min(r.width/i.width,r.height/i.height)},findScaleToCover:function(i,r){return Math.max(r.width/i.width,r.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(r){return fabric.util.toFixed(r,fabric.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,r){var s=fabric.util.invertTransform(r),o=fabric.util.multiplyTransformMatrices(s,i.calcOwnMatrix());fabric.util.applyTransformToObject(i,o)},addTransformToObject:function(i,r){fabric.util.applyTransformToObject(i,fabric.util.multiplyTransformMatrices(r,i.calcOwnMatrix()))},applyTransformToObject:function(i,r){var s=fabric.util.qrDecompose(r),o=new fabric.Point(s.translateX,s.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",s.scaleX),i.set("scaleY",s.scaleY),i.skewX=s.skewX,i.skewY=s.skewY,i.angle=s.angle,i.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(i,r,s){var o=i/2,u=r/2,g=[{x:-o,y:-u},{x:o,y:-u},{x:-o,y:u},{x:o,y:u}],v=fabric.util.calcDimensionsMatrix(s),b=fabric.util.makeBoundingBoxFromPoints(g,v);return{x:b.width,y:b.height}},mergeClipPaths:function(i,r){var s=i,o=r;s.inverted&&!o.inverted&&(s=r,o=i),fabric.util.applyTransformToObject(o,fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(s.calcTransformMatrix()),o.calcTransformMatrix()));var u=s.inverted&&o.inverted;return u&&(s.inverted=o.inverted=!1),new fabric.Group([s],{clipPath:o,inverted:u})},hasStyleChanged:function(i,r,s){return s=s||!1,i.fill!==r.fill||i.stroke!==r.stroke||i.strokeWidth!==r.strokeWidth||i.fontSize!==r.fontSize||i.fontFamily!==r.fontFamily||i.fontWeight!==r.fontWeight||i.fontStyle!==r.fontStyle||i.textBackgroundColor!==r.textBackgroundColor||i.deltaY!==r.deltaY||s&&(i.overline!==r.overline||i.underline!==r.underline||i.linethrough!==r.linethrough)},stylesToArray:function(i,r){i=fabric.util.object.clone(i,!0);for(var s=r.split("\n"),o=-1,u={},g=[],v=0;v<s.length;v++)if(i[v])for(var b=0;b<s[v].length;b++){o++;var _=i[v][b];_&&0<Object.keys(_).length&&(fabric.util.hasStyleChanged(u,_,!0)?g.push({start:o,end:o+1,style:_}):g[g.length-1].end++),u=_||{}}else o+=s[v].length;return g},stylesFromArray:function(i,r){if(!Array.isArray(i))return i;for(var s=r.split("\n"),o=-1,u=0,g={},v=0;v<s.length;v++)for(var b=0;b<s[v].length;b++)o++,i[u]&&i[u].start<=o&&o<i[u].end&&(g[v]=g[v]||{},g[v][b]=Object.assign({},i[u].style),o===i[u].end-1&&u++);return g}}}(typeof exports<"u"?exports:this),function(){var h=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:"l",M:"L"};function l(b,_,S,E){var M=Math.atan2(_,b),F=Math.atan2(E,S);return M<=F?F-M:2*Math.PI-(M-F)}function t(b,_,S){for(var k=function(X,K,it,B,P,V,nt){var J=Math.PI,st=nt*J/180,ft=fabric.util.sin(st),ut=fabric.util.cos(st),dt=0,yt=0,U=-ut*X*.5-ft*K*.5,pt=-ut*K*.5+ft*X*.5,mt=(it=Math.abs(it))*it,Dt=(B=Math.abs(B))*B,jt=pt*pt,Xt=U*U,Zt=mt*Dt-mt*jt-Dt*Xt,qt=0;if(Zt<0){var gt=Math.sqrt(1-Zt/(mt*Dt));it*=gt,B*=gt}else qt=(P===V?-1:1)*Math.sqrt(Zt/(mt*jt+Dt*Xt));var Kt=qt*it*pt/B,Qt=-qt*B*U/it,Be=ut*Kt-ft*Qt+.5*X,Me=ft*Kt+ut*Qt+.5*K,Se=l(1,0,(U-Kt)/it,(pt-Qt)/B),fe=l((U-Kt)/it,(pt-Qt)/B,(-U-Kt)/it,(-pt-Qt)/B);0===V&&0<fe?fe-=2*J:1===V&&fe<0&&(fe+=2*J);for(var Le,Fe,pe,ee,be,xe,Ot,de,$e,ri,Te,Oe,Jt,se,le,ye,fi,Ee=Math.ceil(Math.abs(fe/J*2)),T=[],j=fe/Ee,N=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2),Y=Se+j,ot=0;ot<Ee;ot++)T[ot]=(Fe=Y,pe=ut,ee=ft,be=it,xe=B,Ot=Be,de=Me,$e=N,ri=dt,Te=yt,Oe=fabric.util.cos(Le=Se),["C",ri+$e*(-pe*be*(Jt=fabric.util.sin(Le))-ee*xe*Oe),Te+$e*(-ee*be*Jt+pe*xe*Oe),(ye=pe*be*(se=fabric.util.cos(Fe))-ee*xe*(le=fabric.util.sin(Fe))+Ot)+$e*(pe*be*le+ee*xe*se),(fi=ee*be*se+pe*xe*le+de)+$e*(ee*be*le-pe*xe*se),ye,fi]),dt=T[ot][5],yt=T[ot][6],Se=Y,Y+=j;return T}(S[6]-b,S[7]-_,S[1],S[2],S[4],S[5],S[3]),d=0,H=k.length;d<H;d++)k[d][1]+=b,k[d][2]+=_,k[d][3]+=b,k[d][4]+=_,k[d][5]+=b,k[d][6]+=_;return k}function e(b,_,S,E){return Math.sqrt((S-b)*(S-b)+(E-_)*(E-_))}function i(b,_,S,E,M,F,G,q){return function(k){var d,H,X,K,it=(K=k)*K*K,B=3*(X=k)*X*(1-X),P=3*(H=k)*(1-H)*(1-H),V=(1-(d=k))*(1-d)*(1-d);return{x:G*it+M*B+S*P+b*V,y:q*it+F*B+E*P+_*V}}}function r(b,_,S,E,M,F,G,q){return function(k){var d=1-k;return Math.atan2(3*d*d*(E-_)+6*d*k*(F-E)+3*k*k*(q-F),3*d*d*(S-b)+6*d*k*(M-S)+3*k*k*(G-M))}}function s(b,_,S,E,M,F){return function(G){var q,k,d,H=(d=G)*d,X=2*(k=G)*(1-k),K=(1-(q=G))*(1-q);return{x:M*H+S*X+b*K,y:F*H+E*X+_*K}}}function o(b,_,S,E,M,F){return function(G){var q=1-G;return Math.atan2(2*q*(E-_)+2*G*(F-E),2*q*(S-b)+2*G*(M-S))}}function u(b,_,S){var E,M,F={x:_,y:S},G=0;for(M=1;M<=100;M+=1)E=b(M/100),G+=e(F.x,F.y,E.x,E.y),F=E;return G}function v(b){for(var _,S,E,M,F=0,G=b.length,q=0,k=0,d=0,H=0,X=[],K=0;K<G;K++){switch(E={x:q,y:k,command:(_=b[K])[0]},_[0]){case"M":E.length=0,d=q=_[1],H=k=_[2];break;case"L":E.length=e(q,k,_[1],_[2]),q=_[1],k=_[2];break;case"C":S=i(q,k,_[1],_[2],_[3],_[4],_[5],_[6]),M=r(q,k,_[1],_[2],_[3],_[4],_[5],_[6]),E.iterator=S,E.angleFinder=M,E.length=u(S,q,k),q=_[5],k=_[6];break;case"Q":S=s(q,k,_[1],_[2],_[3],_[4]),M=o(q,k,_[1],_[2],_[3],_[4]),E.iterator=S,E.angleFinder=M,E.length=u(S,q,k),q=_[3],k=_[4];break;case"Z":case"z":E.destX=d,E.destY=H,E.length=e(q,k,d,H),q=d,k=H}F+=E.length,X.push(E)}return X.push({length:F,x:q,y:k}),X}fabric.util.joinPath=function(b){return b.map(function(_){return _.join(" ")}).join(" ")},fabric.util.parsePath=function(b){var _,S,E,M,F,G=[],q=[],k=fabric.rePathCommand,d="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",H="("+d+")"+fabric.commaWsp,X="([01])"+fabric.commaWsp+"?",K=new RegExp(H+"?"+H+"?"+H+X+X+H+"?("+d+")","g");if(!b||!b.match)return G;for(var it,B=0,P=(F=b.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;B<P;B++){M=(_=F[B]).slice(1).trim(),q.length=0;var V=_.charAt(0);if(it=[V],"a"===V.toLowerCase())for(var nt;nt=K.exec(M);)for(var J=1;J<nt.length;J++)q.push(nt[J]);else for(;E=k.exec(M);)q.push(E[0]);J=0;for(var st=q.length;J<st;J++)S=parseFloat(q[J]),isNaN(S)||it.push(S);var ft=n[V.toLowerCase()],ut=a[V]||V;if(it.length-1>ft)for(var dt=1,yt=it.length;dt<yt;dt+=ft)G.push([V].concat(it.slice(dt,dt+ft))),V=ut;else G.push(it)}return G},fabric.util.makePathSimpler=function(b){var _,S,E,M,F,G,q=0,k=0,d=b.length,H=0,X=0,K=[];for(S=0;S<d;++S){switch(E=!1,(_=b[S].slice(0))[0]){case"l":_[0]="L",_[1]+=q,_[2]+=k;case"L":q=_[1],k=_[2];break;case"h":_[1]+=q;case"H":_[0]="L",_[2]=k,q=_[1];break;case"v":_[1]+=k;case"V":_[0]="L",k=_[1],_[1]=q,_[2]=k;break;case"m":_[0]="M",_[1]+=q,_[2]+=k;case"M":q=_[1],k=_[2],H=_[1],X=_[2];break;case"c":_[0]="C",_[1]+=q,_[2]+=k,_[3]+=q,_[4]+=k,_[5]+=q,_[6]+=k;case"C":F=_[3],G=_[4],q=_[5],k=_[6];break;case"s":_[0]="S",_[1]+=q,_[2]+=k,_[3]+=q,_[4]+=k;case"S":"C"===M?(F=2*q-F,G=2*k-G):(F=q,G=k),q=_[3],k=_[4],_[0]="C",_[5]=_[3],_[6]=_[4],_[3]=_[1],_[4]=_[2],_[1]=F,_[2]=G,F=_[3],G=_[4];break;case"q":_[0]="Q",_[1]+=q,_[2]+=k,_[3]+=q,_[4]+=k;case"Q":F=_[1],G=_[2],q=_[3],k=_[4];break;case"t":_[0]="T",_[1]+=q,_[2]+=k;case"T":"Q"===M?(F=2*q-F,G=2*k-G):(F=q,G=k),_[0]="Q",q=_[1],k=_[2],_[1]=F,_[2]=G,_[3]=q,_[4]=k;break;case"a":_[0]="A",_[6]+=q,_[7]+=k;case"A":E=!0,K=K.concat(t(q,k,_)),q=_[6],k=_[7];break;case"z":case"Z":q=H,k=X}E||K.push(_),M=_[0]}return K},fabric.util.getSmoothPathFromPoints=function(b,_){var S,E=[],M=new fabric.Point(b[0].x,b[0].y),F=new fabric.Point(b[1].x,b[1].y),G=b.length,q=1,k=0,d=2<G;for(d&&(q=b[2].x<F.x?-1:b[2].x===F.x?0:1,k=b[2].y<F.y?-1:b[2].y===F.y?0:1),E.push(["M",M.x-q*(_=_||0),M.y-k*_]),S=1;S<G;S++){if(!M.eq(F)){var H=M.midPointFrom(F);E.push(["Q",M.x,M.y,H.x,H.y])}M=b[S],S+1<b.length&&(F=b[S+1])}return d&&(q=M.x>b[S-2].x?1:M.x===b[S-2].x?0:-1,k=M.y>b[S-2].y?1:M.y===b[S-2].y?0:-1),E.push(["L",M.x+q*_,M.y+k*_]),E},fabric.util.getPathSegmentsInfo=v,fabric.util.getBoundsOfCurve=function(b,_,S,E,M,F,G,q){var k;if(fabric.cachesBoundsOfCurve&&(k=h.call(arguments),fabric.boundsOfCurveCache[k]))return fabric.boundsOfCurveCache[k];var d,H,X,K,it,B,P,V,nt=Math.sqrt,J=Math.min,st=Math.max,ft=Math.abs,ut=[],dt=[[],[]];H=6*b-12*S+6*M,d=-3*b+9*S-9*M+3*G,X=3*S-3*b;for(var yt=0;yt<2;++yt)if(0<yt&&(H=6*_-12*E+6*F,d=-3*_+9*E-9*F+3*q,X=3*E-3*_),ft(d)<1e-12){if(ft(H)<1e-12)continue;0<(K=-X/H)&&K<1&&ut.push(K)}else(P=H*H-4*X*d)<0||(0<(it=(-H+(V=nt(P)))/(2*d))&&it<1&&ut.push(it),0<(B=(-H-V)/(2*d))&&B<1&&ut.push(B));for(var U,mt,Dt=ut.length,jt=Dt;Dt--;)U=(mt=1-(K=ut[Dt]))*mt*mt*b+3*mt*mt*K*S+3*mt*K*K*M+K*K*K*G,dt[0][Dt]=U,dt[1][Dt]=mt*mt*mt*_+3*mt*mt*K*E+3*mt*K*K*F+K*K*K*q;dt[0][jt]=b,dt[1][jt]=_,dt[0][jt+1]=G,dt[1][jt+1]=q;var Xt=[{x:J.apply(null,dt[0]),y:J.apply(null,dt[1])},{x:st.apply(null,dt[0]),y:st.apply(null,dt[1])}];return fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[k]=Xt),Xt},fabric.util.getPointOnPath=function(b,_,S){S||(S=v(b));for(var E=0;0<_-S[E].length&&E<S.length-2;)_-=S[E].length,E++;var M,F=S[E],G=_/F.length,k=b[E];switch(F.command){case"M":return{x:F.x,y:F.y,angle:0};case"Z":case"z":return(M=new fabric.Point(F.x,F.y).lerp(new fabric.Point(F.destX,F.destY),G)).angle=Math.atan2(F.destY-F.y,F.destX-F.x),M;case"L":return(M=new fabric.Point(F.x,F.y).lerp(new fabric.Point(k[1],k[2]),G)).angle=Math.atan2(k[2]-F.y,k[1]-F.x),M;case"C":case"Q":return function g(b,_){for(var S,E,M,F=0,G=0,q=b.iterator,k={x:b.x,y:b.y},d=.01,H=b.angleFinder;G<_&&1e-4<d;)S=q(F),M=F,_<(E=e(k.x,k.y,S.x,S.y))+G?(F-=d,d/=2):(k=S,F+=d,G+=E);return S.angle=H(M),S}(F,_)}},fabric.util.transformPath=function(b,_,S){return S&&(_=fabric.util.multiplyTransformMatrices(_,[1,0,0,1,-S.x,-S.y])),b.map(function(E){for(var M=E.slice(0),F={},G=1;G<E.length-1;G+=2)F.x=E[G],F.y=E[G+1],F=fabric.util.transformPoint(F,_),M[G]=F.x,M[G+1]=F.y;return M})}}(),function(){var h=Array.prototype.slice;function n(a,l,t){if(a&&0!==a.length){var e=a.length-1,i=l?a[e][l]:a[e];if(l)for(;e--;)t(a[e][l],i)&&(i=a[e][l]);else for(;e--;)t(a[e],i)&&(i=a[e]);return i}}fabric.util.array={fill:function(a,l){for(var t=a.length;t--;)a[t]=l;return a},invoke:function(a,l){for(var t=h.call(arguments,2),e=[],i=0,r=a.length;i<r;i++)e[i]=t.length?a[i][l].apply(a[i],t):a[i][l].call(a[i]);return e},min:function(a,l){return n(a,l,function(t,e){return t<e})},max:function(a,l){return n(a,l,function(t,e){return e<=t})}}}(),function(){function h(n,a,l){if(l)if(!fabric.isLikelyNode&&a instanceof Element)n=a;else if(a instanceof Array){n=[];for(var t=0,e=a.length;t<e;t++)n[t]=h({},a[t],l)}else if(a&&"object"==typeof a)for(var i in a)"canvas"===i||"group"===i?n[i]=null:a.hasOwnProperty(i)&&(n[i]=h({},a[i],l));else n=a;else for(var i in a)n[i]=a[i];return n}fabric.util.object={extend:h,clone:function(n,a){return h({},n,a)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function h(n,a){var l=n.charCodeAt(a);if(isNaN(l))return"";if(l<55296||57343<l)return n.charAt(a);if(55296<=l&&l<=56319){if(n.length<=a+1)throw"High surrogate without following low surrogate";var t=n.charCodeAt(a+1);if(t<56320||57343<t)throw"High surrogate without following low surrogate";return n.charAt(a)+n.charAt(a+1)}if(0===a)throw"Low surrogate without preceding high surrogate";var e=n.charCodeAt(a-1);if(e<55296||56319<e)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:function(n){return n.replace(/-+(.)?/g,function(a,l){return l?l.toUpperCase():""})},capitalize:function(n,a){return n.charAt(0).toUpperCase()+(a?n.slice(1):n.slice(1).toLowerCase())},escapeXml:function(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(n){var a,l=0,t=[];for(l=0;l<n.length;l++)!1!==(a=h(n,l))&&t.push(a);return t}}}(),function(){var h=Array.prototype.slice,n=function(){},a=function(){for(var i in{toString:1})if("toString"===i)return!1;return!0}(),l=function(i,r,s){for(var o in r)i.prototype[o]=o in i.prototype&&"function"==typeof i.prototype[o]&&-1<(r[o]+"").indexOf("callSuper")?function(u){return function(){var g=this.constructor.superclass;this.constructor.superclass=s;var v=r[u].apply(this,arguments);if(this.constructor.superclass=g,"initialize"!==u)return v}}(o):r[o],a&&(r.toString!==Object.prototype.toString&&(i.prototype.toString=r.toString),r.valueOf!==Object.prototype.valueOf&&(i.prototype.valueOf=r.valueOf))};function t(){}function e(i){for(var r=null,s=this;s.constructor.superclass;){var o=s.constructor.superclass.prototype[i];if(s[i]!==o){r=o;break}s=s.constructor.superclass.prototype}return r?1<arguments.length?r.apply(this,h.call(arguments,1)):r.call(this):console.log("tried to callSuper "+i+", method not found in prototype chain",this)}fabric.util.createClass=function(){var i=null,r=h.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"==typeof r[0]&&(i=r.shift()),s.superclass=i,s.subclasses=[],i&&(t.prototype=i.prototype,s.prototype=new t,i.subclasses.push(s));for(var o=0,u=r.length;o<u;o++)l(s,r[o],i);return s.prototype.initialize||(s.prototype.initialize=n),(s.prototype.constructor=s).prototype.callSuper=e,s}}(),function(){var h=!!fabric.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];fabric.util.addListener=function(a,l,t,e){a&&a.addEventListener(l,t,!h&&e)},fabric.util.removeListener=function(a,l,t,e){a&&a.removeEventListener(l,t,!h&&e)},fabric.util.getPointer=function(a){var l,t,i=fabric.util.getScrollLeftTop(a.target),r=(t=(l=a).changedTouches)&&t[0]?t[0]:l;return{x:r.clientX+i.left,y:r.clientY+i.top}},fabric.util.isTouchEvent=function(a){return-1<n.indexOf(a.type)||"touch"===a.pointerType}}(),function(){var h=fabric.document.createElement("div"),l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,t=function(e){return e};"string"==typeof h.style.opacity?t=function(e,i){return e.style.opacity=i,e}:"string"==typeof h.style.filter&&(t=function(e,i){var r=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(r.zoom=1),l.test(r.filter)?r.filter=r.filter.replace(l,i=.9999<=i?"":"alpha(opacity="+100*i+")"):r.filter+=" alpha(opacity="+100*i+")",e}),fabric.util.setStyle=function(e,i){var r=e.style;if(!r)return e;if("string"==typeof i)return e.style.cssText+=";"+i,-1<i.indexOf("opacity")?t(e,i.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var s in i)"opacity"===s?t(e,i[s]):r.setProperty("float"===s||"cssFloat"===s?void 0===r.styleFloat?"cssFloat":"styleFloat":s,i[s]);return e}}(),function(){var n,a,l,t,h=Array.prototype.slice,e=function(s){return h.call(s,0)};try{n=e(fabric.document.childNodes)instanceof Array}catch{}function i(s,o){var u=fabric.document.createElement(s);for(var g in o)"class"===g?u.className=o[g]:"for"===g?u.htmlFor=o[g]:u.setAttribute(g,o[g]);return u}function r(s){for(var o=0,u=0,g=fabric.document.documentElement,v=fabric.document.body||{scrollLeft:0,scrollTop:0};s&&(s.parentNode||s.host)&&((s=s.parentNode||s.host)===fabric.document?(o=v.scrollLeft||g.scrollLeft||0,u=v.scrollTop||g.scrollTop||0):(o+=s.scrollLeft||0,u+=s.scrollTop||0),1!==s.nodeType||"fixed"!==s.style.position););return{left:o,top:u}}n||(e=function(s){for(var o=new Array(s.length),u=s.length;u--;)o[u]=s[u];return o}),a=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(s,o){var u=fabric.document.defaultView.getComputedStyle(s,null);return u?u[o]:void 0}:function(s,o){var u=s.style[o];return!u&&s.currentStyle&&(u=s.currentStyle[o]),u},t="userSelect"in(l=fabric.document.documentElement.style)?"userSelect":"MozUserSelect"in l?"MozUserSelect":"WebkitUserSelect"in l?"WebkitUserSelect":"KhtmlUserSelect"in l?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(s){return void 0!==s.onselectstart&&(s.onselectstart=fabric.util.falseFunction),t?s.style[t]="none":"string"==typeof s.unselectable&&(s.unselectable="on"),s},fabric.util.makeElementSelectable=function(s){return void 0!==s.onselectstart&&(s.onselectstart=null),t?s.style[t]="":"string"==typeof s.unselectable&&(s.unselectable=""),s},fabric.util.setImageSmoothing=function(s,o){s.imageSmoothingEnabled=s.imageSmoothingEnabled||s.webkitImageSmoothingEnabled||s.mozImageSmoothingEnabled||s.msImageSmoothingEnabled||s.oImageSmoothingEnabled,s.imageSmoothingEnabled=o},fabric.util.getById=function(s){return"string"==typeof s?fabric.document.getElementById(s):s},fabric.util.toArray=e,fabric.util.addClass=function(s,o){s&&-1===(" "+s.className+" ").indexOf(" "+o+" ")&&(s.className+=(s.className?" ":"")+o)},fabric.util.makeElement=i,fabric.util.wrapElement=function(s,o,u){return"string"==typeof o&&(o=i(o,u)),s.parentNode&&s.parentNode.replaceChild(o,s),o.appendChild(s),o},fabric.util.getScrollLeftTop=r,fabric.util.getElementOffset=function(s){var o,u,g=s&&s.ownerDocument,v={left:0,top:0},b={left:0,top:0},_={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!g)return b;for(var S in _)b[_[S]]+=parseInt(a(s,S),10)||0;return o=g.documentElement,void 0!==s.getBoundingClientRect&&(v=s.getBoundingClientRect()),u=r(s),{left:v.left+u.left-(o.clientLeft||0)+b.left,top:v.top+u.top-(o.clientTop||0)+b.top}},fabric.util.getNodeCanvas=function(s){var o=fabric.jsdomImplForWrapper(s);return o._canvas||o._image},fabric.util.cleanUpJsdomNode=function(s){if(fabric.isLikelyNode){var o=fabric.jsdomImplForWrapper(s);o&&(o._image=null,o._canvas=null,o._currentSrc=null,o._attributes=null,o._classList=null)}}}(),function(){function h(){}fabric.util.request=function(n,a){a||(a={});var l,t,e=a.method?a.method.toUpperCase():"GET",i=a.onComplete||function(){},r=new fabric.window.XMLHttpRequest,s=a.body||a.parameters;return r.onreadystatechange=function(){4===r.readyState&&(i(r),r.onreadystatechange=h)},"GET"===e&&(s=null,"string"==typeof a.parameters&&(t=a.parameters,n=(l=n)+(/\?/.test(l)?"&":"?")+t)),r.open(e,n,!0),"POST"!==e&&"PUT"!==e||r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(s),r}}(),fabric.log=console.log,fabric.warn=console.warn,function(){var h=fabric.util.object.extend,n=fabric.util.object.clone,a=[];function l(){return!1}function t(s,o,u,g){return-u*Math.cos(s/g*(Math.PI/2))+u+o}fabric.util.object.extend(a,{cancelAll:function(){var s=this.splice(0);return s.forEach(function(o){o.cancel()}),s},cancelByCanvas:function(s){if(!s)return[];var o=this.filter(function(u){return"object"==typeof u.target&&u.target.canvas===s});return o.forEach(function(u){u.cancel()}),o},cancelByTarget:function(s){var o=this.findAnimationsByTarget(s);return o.forEach(function(u){u.cancel()}),o},findAnimationIndex:function(s){return this.indexOf(this.findAnimation(s))},findAnimation:function(s){return this.find(function(o){return o.cancel===s})},findAnimationsByTarget:function(s){return s?this.filter(function(o){return o.target===s}):[]}});var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(s){return fabric.window.setTimeout(s,1e3/60)},i=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;function r(){return e.apply(fabric.window,arguments)}fabric.util.animate=function(s){s||(s={});var o,u=!1,g=function(){var v=fabric.runningAnimations.indexOf(o);return-1<v&&fabric.runningAnimations.splice(v,1)[0]};return o=h(n(s),{cancel:function(){return u=!0,g()},currentValue:"startValue"in s?s.startValue:0,completionRate:0,durationRate:0}),fabric.runningAnimations.push(o),r(function(v){var b,_=v||+new Date,S=s.duration||500,E=_+S,M=s.onChange||l,F=s.abort||l,G=s.onComplete||l,q=s.easing||t,k="startValue"in s&&0<s.startValue.length,d="startValue"in s?s.startValue:0,H="endValue"in s?s.endValue:100,X=s.byValue||(k?d.map(function(K,it){return H[it]-d[it]}):H-d);s.onStart&&s.onStart(),function K(it){b=it||+new Date;var B=E<b?S:b-_,P=B/S,V=k?d.map(function(J,st){return q(B,d[st],X[st],S)}):q(B,d,X,S),nt=Math.abs(k?(V[0]-d[0])/X[0]:(V-d)/X);if(o.currentValue=k?V.slice():V,o.completionRate=nt,o.durationRate=P,!u){if(!F(V,nt,P))return E<b?(o.currentValue=k?H.slice():H,o.completionRate=1,o.durationRate=1,M(k?H.slice():H,1,1),G(H,1,1),void g()):(M(V,nt,P),void r(K));g()}}(_)}),o.cancel},fabric.util.requestAnimFrame=r,fabric.util.cancelAnimFrame=function(){return i.apply(fabric.window,arguments)},fabric.runningAnimations=a}(),function(){function h(n,a,l){var t="rgba("+parseInt(n[0]+l*(a[0]-n[0]),10)+","+parseInt(n[1]+l*(a[1]-n[1]),10)+","+parseInt(n[2]+l*(a[2]-n[2]),10);return(t+=","+(n&&a?parseFloat(n[3]+l*(a[3]-n[3])):1))+")"}fabric.util.animateColor=function(n,a,l,t){var e=new fabric.Color(n).getSource(),i=new fabric.Color(a).getSource(),r=t.onComplete,s=t.onChange;return fabric.util.animate(fabric.util.object.extend(t=t||{},{duration:l||500,startValue:e,endValue:i,byValue:i,easing:function(o,u,g,v){return h(u,g,t.colorEasing?t.colorEasing(o,v):1-Math.cos(o/v*(Math.PI/2)))},onComplete:function(o,u,g){if(r)return r(h(i,i,0),u,g)},onChange:function(o,u,g){if(s){if(Array.isArray(o))return s(h(o,o,0),u,g);s(o,u,g)}}}))}}(),function(){function h(t,e,i,r){return t<Math.abs(e)?(t=e,r=i/4):r=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function n(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function a(t,e,i,r){return i-l(r-t,0,i,r)+e}function l(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var s=0;return 0===t?e:1==(t/=r)?e+i:(s||(s=.3*r),-n(h(i,i,s,1.70158),t,r)+e)},easeOutElastic:function(t,e,i,r){var s=0;if(0===t)return e;if(1==(t/=r))return e+i;s||(s=.3*r);var o=h(i,i,s,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*r-o.s)*(2*Math.PI)/o.p)+o.c+e},easeInOutElastic:function(t,e,i,r){var s=0;if(0===t)return e;if(2==(t/=r/2))return e+i;s||(s=r*(.3*1.5));var o=h(i,i,s,1.70158);return t<1?-.5*n(o,t,r)+e:o.a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o.s)*(2*Math.PI)/o.p)*.5+o.c+e},easeInBack:function(t,e,i,r,s){return void 0===s&&(s=1.70158),i*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,i,r,s){return void 0===s&&(s=1.70158),i*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,i,r,s){return void 0===s&&(s=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(s*=1.525))*t-s))+e:i/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},easeInBounce:a,easeOutBounce:l,easeInOutBounce:function(t,e,i,r){return t<r/2?.5*a(2*t,0,i,r)+e:.5*l(2*t-r,0,i,r)+.5*i+e}}}(),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t=n.util.toFixed,e=n.util.parseUnit,i=n.util.multiplyTransformMatrices,r={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},s={stroke:"strokeOpacity",fill:"fillOpacity"},o="font-size",u="clip-path";function g(k,d,H,X){var K,it=Array.isArray(d);if("fill"!==k&&"stroke"!==k||"none"!==d){if("strokeUniform"===k)return"non-scaling-stroke"===d;if("strokeDashArray"===k)d="none"===d?null:d.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===k)d=H&&H.transformMatrix?i(H.transformMatrix,n.parseTransformAttribute(d)):n.parseTransformAttribute(d);else if("visible"===k)d="none"!==d&&"hidden"!==d,H&&!1===H.visible&&(d=!1);else if("opacity"===k)d=parseFloat(d),H&&void 0!==H.opacity&&(d*=H.opacity);else if("textAnchor"===k)d="start"===d?"left":"end"===d?"right":"center";else if("charSpacing"===k)K=e(d,X)/X*1e3;else if("paintFirst"===k){var B=d.indexOf("fill"),P=d.indexOf("stroke");d="fill",(-1<B&&-1<P&&P<B||-1===B&&-1<P)&&(d="stroke")}else{if("href"===k||"xlink:href"===k||"font"===k)return d;if("imageSmoothing"===k)return"optimizeQuality"===d;K=it?d.map(e):e(d,X)}}else d="";return!it&&isNaN(K)?d:K}function v(k){return new RegExp("^("+k.join("|")+")\\b","i")}function b(k,d){var X,K,it,B=[];for(K=0,it=d.length;K<it;K++)X=k.getElementsByTagName(d[K]),B=B.concat(Array.prototype.slice.call(X));return B}function _(k,d){var H,X=!0;return(H=S(k,d.pop()))&&d.length&&(X=function(K,it){for(var B,P=!0;K.parentNode&&1===K.parentNode.nodeType&&it.length;)P&&(B=it.pop()),P=S(K=K.parentNode,B);return 0===it.length}(k,d)),H&&X&&0===d.length}function S(k,d){var H,X,K=k.nodeName,it=k.getAttribute("class"),B=k.getAttribute("id");if(H=new RegExp("^"+K,"i"),d=d.replace(H,""),B&&d.length&&(H=new RegExp("#"+B+"(?![a-zA-Z\\-]+)","i"),d=d.replace(H,"")),it&&d.length)for(X=(it=it.split(" ")).length;X--;)H=new RegExp("\\."+it[X]+"(?![a-zA-Z\\-]+)","i"),d=d.replace(H,"");return 0===d.length}function E(k,d){var H;if(k.getElementById&&(H=k.getElementById(d)),H)return H;var X,K,it,B=k.getElementsByTagName("*");for(K=0,it=B.length;K<it;K++)if(d===(X=B[K]).getAttribute("id"))return X}n.svgValidTagNamesRegEx=v(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),n.svgViewBoxElementsRegEx=v(["symbol","image","marker","pattern","view","svg"]),n.svgInvalidAncestorsRegEx=v(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),n.svgValidParentsRegEx=v(["symbol","g","a","svg","clipPath","defs"]),n.cssRules={},n.gradientDefs={},n.clipPaths={},n.parseTransformAttribute=function(){function k(P,V,nt){P[nt]=Math.tan(n.util.degreesToRadians(V[0]))}var d=n.iMatrix,H=n.reNum,X=n.commaWsp,K="(?:(?:(matrix)\\s*\\(\\s*("+H+")"+X+"("+H+")"+X+"("+H+")"+X+"("+H+")"+X+"("+H+")"+X+"("+H+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+H+")(?:"+X+"("+H+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+H+")(?:"+X+"("+H+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+H+")(?:"+X+"("+H+")"+X+"("+H+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+H+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+H+")\\s*\\)))",it=new RegExp("^\\s*(?:(?:"+K+"(?:"+X+"*"+K+")*)?)\\s*$"),B=new RegExp(K,"g");return function(P){var V=d.concat(),nt=[];if(!P||P&&!it.test(P))return V;P.replace(B,function(st){var ft,ut,dt,yt,U,pt,mt,Dt,jt,Xt,Zt,qt,gt=new RegExp(K).exec(st).filter(function(Be){return!!Be}),Kt=gt[1],Qt=gt.slice(2).map(parseFloat);switch(Kt){case"translate":(Zt=V)[4]=(qt=Qt)[0],2===qt.length&&(Zt[5]=qt[1]);break;case"rotate":Qt[0]=n.util.degreesToRadians(Qt[0]),U=V,mt=n.util.cos((pt=Qt)[0]),Dt=n.util.sin(pt[0]),Xt=jt=0,3===pt.length&&(jt=pt[1],Xt=pt[2]),U[0]=mt,U[1]=Dt,U[2]=-Dt,U[3]=mt,U[4]=jt-(mt*jt-Dt*Xt),U[5]=Xt-(Dt*jt+mt*Xt);break;case"scale":dt=(ut=Qt)[0],yt=2===ut.length?ut[1]:ut[0],(ft=V)[0]=dt,ft[3]=yt;break;case"skewX":k(V,Qt,2);break;case"skewY":k(V,Qt,1);break;case"matrix":V=Qt}nt.push(V.concat()),V=d.concat()});for(var J=nt[0];1<nt.length;)nt.shift(),J=n.util.multiplyTransformMatrices(J,nt[0]);return J}}();var M=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function F(k){if(!n.svgViewBoxElementsRegEx.test(k.nodeName))return{};var d,H,X,K,it,B,P=k.getAttribute("viewBox"),V=1,nt=1,J=k.getAttribute("width"),st=k.getAttribute("height"),ft=k.getAttribute("x")||0,ut=k.getAttribute("y")||0,dt=k.getAttribute("preserveAspectRatio")||"",yt=!P||!(P=P.match(M)),U=!J||!st||"100%"===J||"100%"===st,pt=yt&&U,mt={},Dt="",jt=0,Xt=0;if(mt.width=0,mt.height=0,mt.toBeParsed=pt,yt&&(ft||ut)&&k.parentNode&&"#document"!==k.parentNode.nodeName&&(Dt=" translate("+e(ft)+" "+e(ut)+") ",it=(k.getAttribute("transform")||"")+Dt,k.setAttribute("transform",it),k.removeAttribute("x"),k.removeAttribute("y")),pt)return mt;if(yt)return mt.width=e(J),mt.height=e(st),mt;if(d=-parseFloat(P[1]),H=-parseFloat(P[2]),X=parseFloat(P[3]),K=parseFloat(P[4]),mt.minX=d,mt.minY=H,mt.viewBoxWidth=X,mt.viewBoxHeight=K,U?(mt.width=X,mt.height=K):(mt.width=e(J),mt.height=e(st),V=mt.width/X,nt=mt.height/K),"none"!==(dt=n.util.parsePreserveAspectRatioAttribute(dt)).alignX&&("meet"===dt.meetOrSlice&&(nt=V=nt<V?nt:V),"slice"===dt.meetOrSlice&&(nt=V=nt<V?V:nt),jt=mt.width-X*V,Xt=mt.height-K*V,"Mid"===dt.alignX&&(jt/=2),"Mid"===dt.alignY&&(Xt/=2),"Min"===dt.alignX&&(jt=0),"Min"===dt.alignY&&(Xt=0)),1===V&&1===nt&&0===d&&0===H&&0===ft&&0===ut)return mt;if((ft||ut)&&"#document"!==k.parentNode.nodeName&&(Dt=" translate("+e(ft)+" "+e(ut)+") "),it=Dt+" matrix("+V+" 0 0 "+nt+" "+(d*V+jt)+" "+(H*nt+Xt)+") ","svg"===k.nodeName){for(B=k.ownerDocument.createElementNS(n.svgNS,"g");k.firstChild;)B.appendChild(k.firstChild);k.appendChild(B)}else(B=k).removeAttribute("x"),B.removeAttribute("y"),it=B.getAttribute("transform")+it;return B.setAttribute("transform",it),mt}function G(k,d){var H="xlink:href",X=E(k,d.getAttribute(H).slice(1));if(X&&X.getAttribute(H)&&G(k,X),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(it){X&&!d.hasAttribute(it)&&X.hasAttribute(it)&&d.setAttribute(it,X.getAttribute(it))}),!d.children.length)for(var K=X.cloneNode(!0);K.firstChild;)d.appendChild(K.firstChild);d.removeAttribute(H)}n.parseSVGDocument=function(k,d,H,X){if(k){!function(ft){for(var ut=b(ft,["use","svg:use"]),dt=0;ut.length&&dt<ut.length;){var yt=ut[dt],U=yt.getAttribute("xlink:href")||yt.getAttribute("href");if(null===U)return;var pt,mt,Dt,jt,Xt=U.slice(1),Zt=yt.getAttribute("x")||0,qt=yt.getAttribute("y")||0,gt=E(ft,Xt).cloneNode(!0),Kt=(gt.getAttribute("transform")||"")+" translate("+Zt+", "+qt+")",Qt=ut.length,Be=n.svgNS;if(F(gt),/^svg$/i.test(gt.nodeName)){var Me=gt.ownerDocument.createElementNS(Be,"g");for(mt=0,jt=(Dt=gt.attributes).length;mt<jt;mt++)pt=Dt.item(mt),Me.setAttributeNS(Be,pt.nodeName,pt.nodeValue);for(;gt.firstChild;)Me.appendChild(gt.firstChild);gt=Me}for(mt=0,jt=(Dt=yt.attributes).length;mt<jt;mt++)"x"!==(pt=Dt.item(mt)).nodeName&&"y"!==pt.nodeName&&"xlink:href"!==pt.nodeName&&"href"!==pt.nodeName&&("transform"===pt.nodeName?Kt=pt.nodeValue+" "+Kt:gt.setAttribute(pt.nodeName,pt.nodeValue));gt.setAttribute("transform",Kt),gt.setAttribute("instantiated_by_use","1"),gt.removeAttribute("id"),yt.parentNode.replaceChild(gt,yt),ut.length===Qt&&dt++}}(k);var K,it,B=n.Object.__uid++,P=F(k),V=n.util.toArray(k.getElementsByTagName("*"));if(P.crossOrigin=X&&X.crossOrigin,P.svgUid=B,0===V.length&&n.isLikelyNode){var nt=[];for(K=0,it=(V=k.selectNodes('//*[name(.)!="svg"]')).length;K<it;K++)nt[K]=V[K];V=nt}var J=V.filter(function(ft){return F(ft),n.svgValidTagNamesRegEx.test(ft.nodeName.replace("svg:",""))&&!function(ut,dt){for(;ut&&(ut=ut.parentNode);)if(ut.nodeName&&dt.test(ut.nodeName.replace("svg:",""))&&!ut.getAttribute("instantiated_by_use"))return!0;return!1}(ft,n.svgInvalidAncestorsRegEx)});if(!J||J&&!J.length)d&&d([],{});else{var st={};V.filter(function(ft){return"clipPath"===ft.nodeName.replace("svg:","")}).forEach(function(ft){var ut=ft.getAttribute("id");st[ut]=n.util.toArray(ft.getElementsByTagName("*")).filter(function(dt){return n.svgValidTagNamesRegEx.test(dt.nodeName.replace("svg:",""))})}),n.gradientDefs[B]=n.getGradientDefs(k),n.cssRules[B]=n.getCSSRules(k),n.clipPaths[B]=st,n.parseElements(J,function(ft,ut){d&&(d(ft,P,ut,V),delete n.gradientDefs[B],delete n.cssRules[B],delete n.clipPaths[B])},l(P),H,X)}}};var q=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");a(n,{parseFontDeclaration:function(k,d){var H=k.match(q);if(H){var X=H[1],K=H[3],it=H[4],B=H[5],P=H[6];X&&(d.fontStyle=X),K&&(d.fontWeight=isNaN(parseFloat(K))?K:parseFloat(K)),it&&(d.fontSize=e(it)),P&&(d.fontFamily=P),B&&(d.lineHeight="normal"===B?1:B)}},getGradientDefs:function(k){var d,H=b(k,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),X=0,K={};for(X=H.length;X--;)(d=H[X]).getAttribute("xlink:href")&&G(k,d),K[d.getAttribute("id")]=d;return K},parseAttributes:function(k,d,H){if(k){var X,K,it,B={};void 0===H&&(H=k.getAttribute("svgUid")),k.parentNode&&n.svgValidParentsRegEx.test(k.parentNode.nodeName)&&(B=n.parseAttributes(k.parentNode,d,H));var P=d.reduce(function(yt,U){return(X=k.getAttribute(U))&&(yt[U]=X),yt},{}),V=a(function(yt,U){var pt={};for(var mt in n.cssRules[U])if(_(yt,mt.split(" ")))for(var Dt in n.cssRules[U][mt])pt[Dt]=n.cssRules[U][mt][Dt];return pt}(k,H),n.parseStyleAttribute(k));P=a(P,V),V[u]&&k.setAttribute(u,V[u]),K=it=B.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,P[o]&&(P[o]=K=e(P[o],it));var nt,J,st,ft={};for(var ut in P)J=g(nt=(st=ut)in r?r[st]:st,P[ut],B,K),ft[nt]=J;ft&&ft.font&&n.parseFontDeclaration(ft.font,ft);var dt=a(B,ft);return n.svgValidParentsRegEx.test(k.nodeName)?dt:function(yt){for(var U in s)if(void 0!==yt[s[U]]&&""!==yt[U]){if(void 0===yt[U]){if(!n.Object.prototype[U])continue;yt[U]=n.Object.prototype[U]}if(0!==yt[U].indexOf("url(")){var pt=new n.Color(yt[U]);yt[U]=pt.setAlpha(t(pt.getAlpha()*yt[s[U]],2)).toRgba()}}return yt}(dt)}},parseElements:function(k,d,H,X,K){new n.ElementsParser(k,d,H,X,K).parse()},parseStyleAttribute:function(k){var d,H,X,K={},it=k.getAttribute("style");return it&&("string"==typeof it?(d=K,it.replace(/;\s*$/,"").split(";").forEach(function(B){var P=B.split(":");H=P[0].trim().toLowerCase(),X=P[1].trim(),d[H]=X})):function(B,P){for(var J in B)void 0!==B[J]&&(P[J.toLowerCase()]=B[J])}(it,K)),K},parsePointsAttribute:function(k){if(!k)return null;var d,H,X=[];for(d=0,H=(k=(k=k.replace(/,/g," ").trim()).split(/\s+/)).length;d<H;d+=2)X.push({x:parseFloat(k[d]),y:parseFloat(k[d+1])});return X},getCSSRules:function(k){var d,H,X=k.getElementsByTagName("style"),K={};for(d=0,H=X.length;d<H;d++){var it=X[d].textContent;""!==(it=it.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&it.split("}").filter(function(B){return B.trim()}).forEach(function(B){var P=B.split("{"),V={},nt=P[1].trim().split(";").filter(function(ut){return ut.trim()});for(d=0,H=nt.length;d<H;d++){var J=nt[d].split(":"),st=J[0].trim(),ft=J[1].trim();V[st]=ft}(B=P[0].trim()).split(",").forEach(function(ut){""!==(ut=ut.replace(/^svg/i,"").trim())&&(K[ut]?n.util.object.extend(K[ut],V):K[ut]=n.util.object.clone(V))})})}return K},loadSVGFromURL:function(k,d,H,X){k=k.replace(/^\n\s*/,"").trim(),new n.util.request(k,{method:"get",onComplete:function(K){var it=K.responseXML;if(!it||!it.documentElement)return d&&d(null),!1;n.parseSVGDocument(it.documentElement,function(B,P,V,nt){d&&d(B,P,V,nt)},H,X)}})},loadSVGFromString:function(k,d,H,X){var K=(new n.window.DOMParser).parseFromString(k.trim(),"text/xml");n.parseSVGDocument(K.documentElement,function(it,B,P,V){d(it,B,P,V)},H,X)}})}(typeof exports<"u"?exports:this),fabric.ElementsParser=function(h,n,a,l,t,e){this.elements=h,this.callback=n,this.options=a,this.reviver=l,this.svgUid=a&&a.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=e},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var n=this;this.elements.forEach(function(a,l){a.setAttribute("svgUid",n.svgUid),n.createObject(a,l)})},h.findTag=function(n){return fabric[fabric.util.string.capitalize(n.tagName.replace("svg:",""))]},h.createObject=function(n,a){var l=this.findTag(n);if(l&&l.fromElement)try{l.fromElement(n,this.createCallback(a,n),this.options)}catch(t){fabric.log(t)}else this.checkIfDone()},h.createCallback=function(n,a){var l=this;return function(t){var e;l.resolveGradient(t,a,"fill"),l.resolveGradient(t,a,"stroke"),t instanceof fabric.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(a)),t._removeTransformMatrix(e),l.resolveClipPath(t,a),l.reviver&&l.reviver(a,t),l.instances[n]=t,l.checkIfDone()}},h.extractPropertyDefinition=function(n,a,l){var t=n[a],e=this.regexUrl;if(e.test(t)){e.lastIndex=0;var i=e.exec(t)[1];return e.lastIndex=0,fabric[l][this.svgUid][i]}},h.resolveGradient=function(n,a,l){var t=this.extractPropertyDefinition(n,l,"gradientDefs");if(t){var e=a.getAttribute(l+"-opacity"),i=fabric.Gradient.fromElement(t,n,e,this.options);n.set(l,i)}},h.createClipPathCallback=function(n,a){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,a.push(l)}},h.resolveClipPath=function(n,a){var l,t,e,i,r=this.extractPropertyDefinition(n,"clipPath","clipPaths");if(r){e=[],t=fabric.util.invertTransform(n.calcTransformMatrix());for(var s=r[0].parentNode,o=a;o.parentNode&&o.getAttribute("clip-path")!==n.clipPath;)o=o.parentNode;o.parentNode.appendChild(s);for(var u=0;u<r.length;u++)this.findTag(l=r[u]).fromElement(l,this.createClipPathCallback(n,e),this.options);r=1===e.length?e[0]:new fabric.Group(e),i=fabric.util.multiplyTransformMatrices(t,r.calcTransformMatrix()),r.clipPath&&this.resolveClipPath(r,o);var g=fabric.util.qrDecompose(i);r.flipX=!1,r.flipY=!1,r.set("scaleX",g.scaleX),r.set("scaleY",g.scaleY),r.angle=g.angle,r.skewX=g.skewX,r.skewY=0,r.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),n.clipPath=r}else delete n.clipPath},h.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(n){return null!=n}),this.callback(this.instances,this.elements))}}(fabric.ElementsParser.prototype),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(l,t){this.x=l,this.y=t}n.Point?n.warn("fabric.Point is already defined"):(n.Point=a).prototype={type:"point",constructor:a,add:function(l){return new a(this.x+l.x,this.y+l.y)},addEquals:function(l){return this.x+=l.x,this.y+=l.y,this},scalarAdd:function(l){return new a(this.x+l,this.y+l)},scalarAddEquals:function(l){return this.x+=l,this.y+=l,this},subtract:function(l){return new a(this.x-l.x,this.y-l.y)},subtractEquals:function(l){return this.x-=l.x,this.y-=l.y,this},scalarSubtract:function(l){return new a(this.x-l,this.y-l)},scalarSubtractEquals:function(l){return this.x-=l,this.y-=l,this},multiply:function(l){return new a(this.x*l,this.y*l)},multiplyEquals:function(l){return this.x*=l,this.y*=l,this},divide:function(l){return new a(this.x/l,this.y/l)},divideEquals:function(l){return this.x/=l,this.y/=l,this},eq:function(l){return this.x===l.x&&this.y===l.y},lt:function(l){return this.x<l.x&&this.y<l.y},lte:function(l){return this.x<=l.x&&this.y<=l.y},gt:function(l){return this.x>l.x&&this.y>l.y},gte:function(l){return this.x>=l.x&&this.y>=l.y},lerp:function(l,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new a(this.x+(l.x-this.x)*t,this.y+(l.y-this.y)*t)},distanceFrom:function(l){var t=this.x-l.x,e=this.y-l.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(l){return this.lerp(l)},min:function(l){return new a(Math.min(this.x,l.x),Math.min(this.y,l.y))},max:function(l){return new a(Math.max(this.x,l.x),Math.max(this.y,l.y))},toString:function(){return this.x+","+this.y},setXY:function(l,t){return this.x=l,this.y=t,this},setX:function(l){return this.x=l,this},setY:function(l){return this.y=l,this},setFromPoint:function(l){return this.x=l.x,this.y=l.y,this},swap:function(l){var t=this.x,e=this.y;this.x=l.x,this.y=l.y,l.x=t,l.y=e},clone:function(){return new a(this.x,this.y)}}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(l){this.status=l,this.points=[]}n.Intersection?n.warn("fabric.Intersection is already defined"):(n.Intersection=a,n.Intersection.prototype={constructor:a,appendPoint:function(l){return this.points.push(l),this},appendPoints:function(l){return this.points=this.points.concat(l),this}},n.Intersection.intersectLineLine=function(l,t,e,i){var r,s=(i.x-e.x)*(l.y-e.y)-(i.y-e.y)*(l.x-e.x),o=(t.x-l.x)*(l.y-e.y)-(t.y-l.y)*(l.x-e.x),u=(i.y-e.y)*(t.x-l.x)-(i.x-e.x)*(t.y-l.y);if(0!==u){var g=s/u,v=o/u;0<=g&&g<=1&&0<=v&&v<=1?(r=new a("Intersection")).appendPoint(new n.Point(l.x+g*(t.x-l.x),l.y+g*(t.y-l.y))):r=new a}else r=new a(0===s||0===o?"Coincident":"Parallel");return r},n.Intersection.intersectLinePolygon=function(l,t,e){var s,o,u=new a,g=e.length;for(o=0;o<g;o++)s=a.intersectLineLine(l,t,e[o],e[(o+1)%g]),u.appendPoints(s.points);return 0<u.points.length&&(u.status="Intersection"),u},n.Intersection.intersectPolygonPolygon=function(l,t){var e,i=new a,r=l.length;for(e=0;e<r;e++){var u=a.intersectLinePolygon(l[e],l[(e+1)%r],t);i.appendPoints(u.points)}return 0<i.points.length&&(i.status="Intersection"),i},n.Intersection.intersectPolygonRectangle=function(l,t,e){var i=t.min(e),r=t.max(e),s=new n.Point(r.x,i.y),o=new n.Point(i.x,r.y),u=a.intersectLinePolygon(i,s,l),g=a.intersectLinePolygon(s,r,l),v=a.intersectLinePolygon(r,o,l),b=a.intersectLinePolygon(o,i,l),_=new a;return _.appendPoints(u.points),_.appendPoints(g.points),_.appendPoints(v.points),_.appendPoints(b.points),0<_.points.length&&(_.status="Intersection"),_})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});function a(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function l(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}n.Color?n.warn("fabric.Color is already defined."):(n.Color=a,n.Color.prototype={_tryParsingColor:function(t){var e;t in a.colorNameMap&&(t=a.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=a.sourceFromHex(t)),e||(e=a.sourceFromRgb(t)),e||(e=a.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){var r,s,o,u=n.util.array.max([t/=255,e/=255,i/=255]),g=n.util.array.min([t,e,i]);if(o=(u+g)/2,u===g)r=s=0;else{var v=u-g;switch(s=.5<o?v/(2-u-g):v/(u+g),u){case t:r=(e-i)/v+(e<i?6:0);break;case e:r=(i-t)/v+2;break;case i:r=(t-e)/v+4}r/=6}return[Math.round(360*r),Math.round(100*s),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,r=this.getSource();return t=1===(t=r[0].toString(16)).length?"0"+t:t,e=1===(e=r[1].toString(16)).length?"0"+e:e,i=1===(i=r[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,r]),this},overlayWith:function(t){t instanceof a||(t=new a(t));var e,i=[],r=this.getAlpha(),s=this.getSource(),o=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*s[e]+.5*o[e]));return i[3]=r,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},n.Color.fromRgb=function(t){return a.fromSource(a.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var e=t.match(a.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),s=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(s,10),e[4]?parseFloat(e[4]):1]}},n.Color.fromRgba=a.fromRgb,n.Color.fromHsl=function(t){return a.fromSource(a.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var e=t.match(a.reHSLa);if(e){var i,r,s,o=(parseFloat(e[1])%360+360)%360/360,u=parseFloat(e[2])/(/%$/.test(e[2])?100:1),g=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===u)i=r=s=g;else{var v=g<=.5?g*(u+1):g+u-g*u,b=2*g-v;i=l(b,v,o+1/3),r=l(b,v,o),s=l(b,v,o-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},n.Color.fromHsla=a.fromHsl,n.Color.fromHex=function(t){return a.fromSource(a.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(a.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,s=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),u=i?e.charAt(2)+e.charAt(2):e.substring(4,6),g=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(s,16),parseInt(o,16),parseInt(u,16),parseFloat((parseInt(g,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var e=new a;return e.setSource(t),e})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=["e","se","s","sw","w","nw","n","ne","e"],l=["ns","nesw","ew","nwse"],t={},e="left",i="top",r="right",s="bottom",o="center",u={top:s,bottom:i,left:r,right:e,center:o},g=n.util.radiansToDegrees,v=Math.sign||function(B){return(0<B)-(B<0)||+B};function b(B,P){var V=B.angle+g(Math.atan2(P.y,P.x))+360;return Math.round(V%360/45)}function _(B,P){var V=P.transform.target,nt=V.canvas,J=n.util.object.clone(P);J.target=V,nt&&nt.fire("object:"+B,J),V.fire(B,P)}function S(B,P){var V=P.canvas,nt=B[V.uniScaleKey];return V.uniformScaling&&!nt||!V.uniformScaling&&nt}function E(B){return B.originX===o&&B.originY===o}function M(B,P,V){var nt=B.lockScalingX,J=B.lockScalingY;return!((!nt||!J)&&(P||!nt&&!J||!V)&&(!nt||"x"!==P)&&(!J||"y"!==P))}function F(B,P,V,nt){return{e:B,transform:P,pointer:{x:V,y:nt}}}function G(B){return function(P,V,nt,J){var st=V.target,ft=st.getCenterPoint(),ut=st.translateToOriginPoint(ft,V.originX,V.originY),dt=B(P,V,nt,J);return st.setPositionByOrigin(ut,V.originX,V.originY),dt}}function q(B,P){return function(V,nt,J,st){var ft=P(V,nt,J,st);return ft&&_(B,F(V,nt,J,st)),ft}}function k(B,P,V,nt,J){var st=B.target,ft=st.controls[B.corner],ut=st.canvas.getZoom(),dt=st.padding/ut,yt=st.toLocalPoint(new n.Point(nt,J),P,V);return yt.x>=dt&&(yt.x-=dt),yt.x<=-dt&&(yt.x+=dt),yt.y>=dt&&(yt.y-=dt),yt.y<=dt&&(yt.y+=dt),yt.x-=ft.offsetX,yt.y-=ft.offsetY,yt}function d(B){return B.flipX!==B.flipY}function H(B,P,V,nt,J){if(0!==B[P]){var st=J/B._getTransformedDimensions()[nt]*B[V];B.set(V,st)}}function X(B,P,V,nt){var J,st=P.target,ft=st._getTransformedDimensions(0,st.skewY),ut=k(P,P.originX,P.originY,V,nt),dt=Math.abs(2*ut.x)-ft.x,yt=st.skewX;dt<2?J=0:(J=g(Math.atan2(dt/st.scaleX,ft.y/st.scaleY)),P.originX===e&&P.originY===s&&(J=-J),P.originX===r&&P.originY===i&&(J=-J),d(st)&&(J=-J));var U=yt!==J;if(U){var pt=st._getTransformedDimensions().y;st.set("skewX",J),H(st,"skewY","scaleY","y",pt)}return U}function K(B,P,V,nt){var J,st=P.target,ft=st._getTransformedDimensions(st.skewX,0),ut=k(P,P.originX,P.originY,V,nt),dt=Math.abs(2*ut.y)-ft.y,yt=st.skewY;dt<2?J=0:(J=g(Math.atan2(dt/st.scaleY,ft.x/st.scaleX)),P.originX===e&&P.originY===s&&(J=-J),P.originX===r&&P.originY===i&&(J=-J),d(st)&&(J=-J));var U=yt!==J;if(U){var pt=st._getTransformedDimensions().x;st.set("skewY",J),H(st,"skewX","scaleX","x",pt)}return U}function it(B,P,V,nt,J){var st,ft,ut,dt,yt,U,pt=P.target,mt=pt.lockScalingX,Dt=pt.lockScalingY,jt=(J=J||{}).by,Xt=S(B,pt),Zt=M(pt,jt,Xt),qt=P.gestureScale;if(Zt)return!1;if(qt)ft=P.scaleX*qt,ut=P.scaleY*qt;else{if(st=k(P,P.originX,P.originY,V,nt),yt="y"!==jt?v(st.x):1,U="x"!==jt?v(st.y):1,P.signX||(P.signX=yt),P.signY||(P.signY=U),pt.lockScalingFlip&&(P.signX!==yt||P.signY!==U))return!1;if(dt=pt._getTransformedDimensions(),Xt&&!jt){var gt=Math.abs(st.x)+Math.abs(st.y),Kt=P.original,Qt=gt/(Math.abs(dt.x*Kt.scaleX/pt.scaleX)+Math.abs(dt.y*Kt.scaleY/pt.scaleY));ft=Kt.scaleX*Qt,ut=Kt.scaleY*Qt}else ft=Math.abs(st.x*pt.scaleX/dt.x),ut=Math.abs(st.y*pt.scaleY/dt.y);E(P)&&(ft*=2,ut*=2),P.signX!==yt&&"y"!==jt&&(P.originX=u[P.originX],ft*=-1,P.signX=yt),P.signY!==U&&"x"!==jt&&(P.originY=u[P.originY],ut*=-1,P.signY=U)}var Be=pt.scaleX,Me=pt.scaleY;return jt?("x"===jt&&pt.set("scaleX",ft),"y"===jt&&pt.set("scaleY",ut)):(!mt&&pt.set("scaleX",ft),!Dt&&pt.set("scaleY",ut)),Be!==pt.scaleX||Me!==pt.scaleY}t.scaleCursorStyleHandler=function(B,P,V){var nt=S(B,V),J="";if(0!==P.x&&0===P.y?J="x":0===P.x&&0!==P.y&&(J="y"),M(V,J,nt))return"not-allowed";var st=b(V,P);return a[st]+"-resize"},t.skewCursorStyleHandler=function(B,P,V){if(0!==P.x&&V.lockSkewingY||0!==P.y&&V.lockSkewingX)return"not-allowed";var J=b(V,P)%4;return l[J]+"-resize"},t.scaleSkewCursorStyleHandler=function(B,P,V){return B[V.canvas.altActionKey]?t.skewCursorStyleHandler(B,P,V):t.scaleCursorStyleHandler(B,P,V)},t.rotationWithSnapping=q("rotating",G(function(B,P,V,nt){var J=P,st=J.target,ft=st.translateToOriginPoint(st.getCenterPoint(),J.originX,J.originY);if(st.lockRotation)return!1;var ut,dt=Math.atan2(J.ey-ft.y,J.ex-ft.x),yt=Math.atan2(nt-ft.y,V-ft.x),U=g(yt-dt+J.theta);if(0<st.snapAngle){var pt=st.snapAngle,mt=st.snapThreshold||pt,Dt=Math.ceil(U/pt)*pt,jt=Math.floor(U/pt)*pt;Math.abs(U-jt)<mt?U=jt:Math.abs(U-Dt)<mt&&(U=Dt)}return U<0&&(U=360+U),ut=st.angle!==(U%=360),st.angle=U,ut})),t.scalingEqually=q("scaling",G(function(B,P,V,nt){return it(B,P,V,nt)})),t.scalingX=q("scaling",G(function(B,P,V,nt){return it(B,P,V,nt,{by:"x"})})),t.scalingY=q("scaling",G(function(B,P,V,nt){return it(B,P,V,nt,{by:"y"})})),t.scalingYOrSkewingX=function(B,P,V,nt){return B[P.target.canvas.altActionKey]?t.skewHandlerX(B,P,V,nt):t.scalingY(B,P,V,nt)},t.scalingXOrSkewingY=function(B,P,V,nt){return B[P.target.canvas.altActionKey]?t.skewHandlerY(B,P,V,nt):t.scalingX(B,P,V,nt)},t.changeWidth=q("resizing",G(function(B,P,V,nt){var J=P.target,st=k(P,P.originX,P.originY,V,nt),ft=J.strokeWidth/(J.strokeUniform?J.scaleX:1),ut=E(P)?2:1,dt=J.width,yt=Math.abs(st.x*ut/J.scaleX)-ft;return J.set("width",Math.max(yt,0)),dt!==yt})),t.skewHandlerX=function(B,P,V,nt){var J,st=P.target,ft=st.skewX,ut=P.originY;return!st.lockSkewingX&&(0===ft?J=0<k(P,o,o,V,nt).x?e:r:(0<ft&&(J=ut===i?e:r),ft<0&&(J=ut===i?r:e),d(st)&&(J=J===e?r:e)),P.originX=J,q("skewing",G(X))(B,P,V,nt))},t.skewHandlerY=function(B,P,V,nt){var J,st=P.target,ft=st.skewY,ut=P.originX;return!st.lockSkewingY&&(0===ft?J=0<k(P,o,o,V,nt).y?i:s:(0<ft&&(J=ut===e?i:s),ft<0&&(J=ut===e?s:i),d(st)&&(J=J===i?s:i)),P.originY=J,q("skewing",G(K))(B,P,V,nt))},t.dragHandler=function(B,P,V,nt){var J=P.target,st=V-P.offsetX,ft=nt-P.offsetY,ut=!J.get("lockMovementX")&&J.left!==st,dt=!J.get("lockMovementY")&&J.top!==ft;return ut&&J.set("left",st),dt&&J.set("top",ft),(ut||dt)&&_("moving",F(B,P,V,nt)),ut||dt},t.scaleOrSkewActionName=function(B,P,V){var nt=B[V.canvas.altActionKey];return 0===P.x?nt?"skewX":"scaleY":0===P.y?nt?"skewY":"scaleX":void 0},t.rotationStyleHandler=function(B,P,V){return V.lockRotation?"not-allowed":P.cursorStyle},t.fireEvent=_,t.wrapWithFixedAnchor=G,t.wrapWithFireEvent=q,t.getLocalPoint=k,n.controlsUtils=t}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.degreesToRadians,l=n.controlsUtils;l.renderCircleControl=function(t,e,i,r,s){r=r||{};var o,u=this.sizeX||r.cornerSize||s.cornerSize,g=this.sizeY||r.cornerSize||s.cornerSize,v=void 0!==r.transparentCorners?r.transparentCorners:s.transparentCorners,b=v?"stroke":"fill",_=!v&&(r.cornerStrokeColor||s.cornerStrokeColor),S=e,E=i;t.save(),t.fillStyle=r.cornerColor||s.cornerColor,t.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor,g<u?(o=u,t.scale(1,g/u),E=i*u/g):u<g?(o=g,t.scale(u/g,1),S=e*g/u):o=u,t.lineWidth=1,t.beginPath(),t.arc(S,E,o/2,0,2*Math.PI,!1),t[b](),_&&t.stroke(),t.restore()},l.renderSquareControl=function(t,e,i,r,s){r=r||{};var o=this.sizeX||r.cornerSize||s.cornerSize,u=this.sizeY||r.cornerSize||s.cornerSize,g=void 0!==r.transparentCorners?r.transparentCorners:s.transparentCorners,v=g?"stroke":"fill",b=!g&&(r.cornerStrokeColor||s.cornerStrokeColor),_=o/2,S=u/2;t.save(),t.fillStyle=r.cornerColor||s.cornerColor,t.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(a(s.angle)),t[v+"Rect"](-_,-S,o,u),b&&t.strokeRect(-_,-S,o,u),t.restore()}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Control=function(a){for(var l in a)this[l]=a[l]},n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(a,l){return l.cursorStyle},getActionName:function(a,l){return l.actionName},getVisibility:function(a,l){var t=a._controlsVisibility;return t&&void 0!==t[l]?t[l]:this.visible},setVisibility:function(a){this.visible=a},positionHandler:function(a,l){return n.util.transformPoint({x:this.x*a.x+this.offsetX,y:this.y*a.y+this.offsetY},l)},calcCornerCoords:function(a,l,t,e,i){var r,s,o,u,g=i?this.touchSizeX:this.sizeX,v=i?this.touchSizeY:this.sizeY;if(g&&v&&g!==v){var b=Math.atan2(v,g),_=Math.sqrt(g*g+v*v)/2,S=b-n.util.degreesToRadians(a),E=Math.PI/2-b-n.util.degreesToRadians(a);r=_*n.util.cos(S),s=_*n.util.sin(S),o=_*n.util.cos(E),u=_*n.util.sin(E)}else _=.7071067812*(g&&v?g:l),S=n.util.degreesToRadians(45-a),r=o=_*n.util.cos(S),s=u=_*n.util.sin(S);return{tl:{x:t-u,y:e-o},tr:{x:t+r,y:e-s},bl:{x:t-r,y:e+s},br:{x:t+u,y:e+o}}},render:function(a,l,t,e,i){"circle"===((e=e||{}).cornerStyle||i.cornerStyle)?n.controlsUtils.renderCircleControl.call(this,a,l,t,e,i):n.controlsUtils.renderSquareControl.call(this,a,l,t,e,i)}}}(typeof exports<"u"?exports:this),function(){function h(a,l){var t,e,i,r,s=a.getAttribute("style"),o=a.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,s){var u=s.split(/\s*;\s*/);for(""===u[u.length-1]&&u.pop(),r=u.length;r--;){var g=u[r].split(/\s*:\s*/),v=g[0].trim(),b=g[1].trim();"stop-color"===v?t=b:"stop-opacity"===v&&(i=b)}}return t||(t=a.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=a.getAttribute("stop-opacity")),e=(t=new fabric.Color(t)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=e*l,{offset:o,color:t.toRgb(),opacity:i}}var n=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var l,t=this;Object.keys(a).forEach(function(e){t[e]=a[e]}),this.id?this.id+="_"+fabric.Object.__uid++:this.id=fabric.Object.__uid++,l={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},"radial"===this.type&&(l.r1=a.coords.r1||0,l.r2=a.coords.r2||0),this.coords=l,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var l in a){var t=new fabric.Color(a[l]);this.colorStops.push({offset:parseFloat(l),color:t.toRgb(),opacity:t.getAlpha()})}return this},toObject:function(a){var l={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,l,a),l},toSVG:function(a,l){var t,e,i,r,s=n(this.coords,!0),o=(l=l||{},n(this.colorStops,!0)),u=s.r1>s.r2,g=this.gradientTransform?this.gradientTransform.concat():fabric.iMatrix.concat(),v=-this.offsetX,b=-this.offsetY,_=!!l.additionalTransform,S="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(o.sort(function(G,q){return G.offset-q.offset}),"objectBoundingBox"===S?(v/=a.width,b/=a.height):(v+=a.width/2,b+=a.height/2),"path"===a.type&&"percentage"!==this.gradientUnits&&(v-=a.pathOffset.x,b-=a.pathOffset.y),g[4]-=v,g[5]-=b,r='id="SVGID_'+this.id+'" gradientUnits="'+S+'"',r+=' gradientTransform="'+(_?l.additionalTransform+" ":"")+fabric.util.matrixToSVG(g)+'" ',"linear"===this.type?i=["<linearGradient ",r,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,'">\n']:"radial"===this.type&&(i=["<radialGradient ",r,' cx="',u?s.x1:s.x2,'" cy="',u?s.y1:s.y2,'" r="',u?s.r1:s.r2,'" fx="',u?s.x2:s.x1,'" fy="',u?s.y2:s.y1,'">\n']),"radial"===this.type){if(u)for((o=o.concat()).reverse(),t=0,e=o.length;t<e;t++)o[t].offset=1-o[t].offset;var E=Math.min(s.r1,s.r2);if(0<E){var M=E/Math.max(s.r1,s.r2);for(t=0,e=o.length;t<e;t++)o[t].offset+=M*(1-o[t].offset)}}for(t=0,e=o.length;t<e;t++){var F=o[t];i.push("<stop ",'offset="',100*F.offset+"%",'" style="stop-color:',F.color,void 0!==F.opacity?";stop-opacity: "+F.opacity:";",'"/>\n')}return i.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),i.join("")},toLive:function(a){var l,t,e,i=fabric.util.object.clone(this.coords);if(this.type){for("linear"===this.type?l=a.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(l=a.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),t=0,e=this.colorStops.length;t<e;t++){var r=this.colorStops[t].color,s=this.colorStops[t].opacity,o=this.colorStops[t].offset;void 0!==s&&(r=new fabric.Color(r).setAlpha(s).toRgba()),l.addColorStop(o,r)}return l}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(a,l,t,e){var i=parseFloat(t)/(/%$/.test(t)?100:1);i=i<0?0:1<i?1:i,isNaN(i)&&(i=1);var r,s,o,u,g,v,b,_,S,E,M,F=a.getElementsByTagName("stop"),G="userSpaceOnUse"===a.getAttribute("gradientUnits")?"pixels":"percentage",q=a.getAttribute("gradientTransform")||"",k=[],d=0,H=0;for("linearGradient"===a.nodeName||"LINEARGRADIENT"===a.nodeName?(r="linear",s={x1:(v=a).getAttribute("x1")||0,y1:v.getAttribute("y1")||0,x2:v.getAttribute("x2")||"100%",y2:v.getAttribute("y2")||0}):(r="radial",s={x1:(g=a).getAttribute("fx")||g.getAttribute("cx")||"50%",y1:g.getAttribute("fy")||g.getAttribute("cy")||"50%",r1:0,x2:g.getAttribute("cx")||"50%",y2:g.getAttribute("cy")||"50%",r2:g.getAttribute("r")||"50%"}),o=F.length;o--;)k.push(h(F[o],i));return u=fabric.parseTransformAttribute(q),b=s,_=e,S=G,Object.keys(b).forEach(function(X){"Infinity"===(E=b[X])?M=1:"-Infinity"===E?M=0:(M=parseFloat(b[X],10),"string"==typeof E&&/^(\d+\.\d+)%|(\d+)%$/.test(E)&&(M*=.01,"pixels"===S&&("x1"!==X&&"x2"!==X&&"r2"!==X||(M*=_.viewBoxWidth||_.width),"y1"!==X&&"y2"!==X||(M*=_.viewBoxHeight||_.height)))),b[X]=M}),"pixels"===G&&(d=-l.left,H=-l.top),new fabric.Gradient({id:a.getAttribute("id"),type:r,coords:s,colorStops:k,gradientUnits:G,gradientTransform:u,offsetX:d,offsetY:H})}})}(),function(){"use strict";var h=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,a){if(n||(n={}),this.id=fabric.Object.__uid++,this.setOptions(n),!n.source||n.source&&"string"!=typeof n.source)a&&a(this);else{var l=this;this.source=fabric.util.createImage(),fabric.util.loadImage(n.source,function(t,e){l.source=t,a&&a(l,e)},null,this.crossOrigin)}},toObject:function(n){var a,l,t=fabric.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?a=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(a=this.source.toDataURL()),l={type:"pattern",source:a,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,t),offsetY:h(this.offsetY,t),patternTransform:this.patternTransform?this.patternTransform.concat():null},fabric.util.populateWithProperties(this,l,n),l},toSVG:function(n){var a="function"==typeof this.source?this.source():this.source,l=a.width/n.width,t=a.height/n.height,e=this.offsetX/n.width,i=this.offsetY/n.height,r="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(t=1,i&&(t+=Math.abs(i))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(l=1,e&&(l+=Math.abs(e))),a.src?r=a.src:a.toDataURL&&(r=a.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+i+'" width="'+l+'" height="'+t+'">\n<image x="0" y="0" width="'+a.width+'" height="'+a.height+'" xlink:href="'+r+'"></image>\n</pattern>\n'},setOptions:function(n){for(var a in n)this[a]=n[a]},toLive:function(n){var a=this.source;return a&&(void 0===a.src||a.complete&&0!==a.naturalWidth&&0!==a.naturalHeight)?n.createPattern(a,this.repeat):""}})}(),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.toFixed;n.Shadow?n.warn("fabric.Shadow is already defined."):(n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(l){for(var t in"string"==typeof l&&(l=this._parseShadow(l)),l)this[t]=l[t];this.id=n.Object.__uid++},_parseShadow:function(l){var t=l.trim(),e=n.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(l){var t=40,e=40,i=n.Object.NUM_FRACTION_DIGITS,r=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-l.angle)),s=new n.Color(this.color);return l.width&&l.height&&(t=100*a((Math.abs(r.x)+this.blur)/l.width,i)+20,e=100*a((Math.abs(r.y)+this.blur)/l.height,i)+20),l.flipX&&(r.x*=-1),l.flipY&&(r.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+t+'%" width="'+(100+2*t)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+a(this.blur?this.blur/2:0,i)+'"></feGaussianBlur>\n\t<feOffset dx="'+a(r.x,i)+'" dy="'+a(r.y,i)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var l={},t=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==t[e]&&(l[e]=this[e])},this),l}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(typeof exports<"u"?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var h=fabric.util.object.extend,n=fabric.util.getElementOffset,a=fabric.util.removeFromArray,l=fabric.util.toFixed,t=fabric.util.transformPoint,e=fabric.util.invertTransform,i=fabric.util.getNodeCanvas,r=fabric.util.createCanvasElement,s=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(o,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,u)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,u){var g=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(u),this.interactive||this._initRetinaScaling(),u.overlayImage&&this.setOverlayImage(u.overlayImage,g),u.backgroundImage&&this.setBackgroundImage(u.backgroundImage,g),u.backgroundColor&&this.setBackgroundColor(u.backgroundColor,g),u.overlayColor&&this.setOverlayColor(u.overlayColor,g),this.calcOffset()},_isRetinaScaling:function(){return 1<fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,fabric.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=fabric.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,u,g){u.setAttribute("width",this.width*o),u.setAttribute("height",this.height*o),g.scale(o,o)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(o,u,g){return this.__setBgOverlayImage("overlayImage",o,u,g)},setBackgroundImage:function(o,u,g){return this.__setBgOverlayImage("backgroundImage",o,u,g)},setOverlayColor:function(o,u){return this.__setBgOverlayColor("overlayColor",o,u)},setBackgroundColor:function(o,u){return this.__setBgOverlayColor("backgroundColor",o,u)},__setBgOverlayImage:function(o,u,g,v){return"string"==typeof u?fabric.util.loadImage(u,function(b,_){if(b){var S=new fabric.Image(b,v);(this[o]=S).canvas=this}g&&g(b,_)},this,v&&v.crossOrigin):(v&&u.setOptions(v),(this[o]=u)&&(u.canvas=this),g&&g(u,!1)),this},__setBgOverlayColor:function(o,u,g){return this[o]=u,this._initGradient(u,o),this._initPattern(u,o,g),this},_createCanvasElement:function(){var o=r();if(!o||(o.style||(o.style={}),void 0===o.getContext))throw s;return o},_initOptions:function(o){var u=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(u.width,10)||0,this.height=this.height||parseInt(u.height,10)||0,this.lowerCanvasEl.style&&(u.width=this.width,u.height=this.height,u.style.width=this.width+"px",u.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){this.lowerCanvasEl=o&&o.getContext?o:fabric.util.getById(o)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,u){return this.setDimensions({width:o},u)},setHeight:function(o,u){return this.setDimensions({height:o},u)},setDimensions:function(o,u){var g;for(var v in u=u||{},o)g=o[v],u.cssOnly||(this._setBackstoreDimension(v,o[v]),g+="px",this.hasLostContext=!0),u.backstoreOnly||this._setCssDimension(v,g);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),u.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,u){return this.lowerCanvasEl[o]=u,this.upperCanvasEl&&(this.upperCanvasEl[o]=u),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=u),this[o]=u,this},_setCssDimension:function(o,u){return this.lowerCanvasEl.style[o]=u,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=u),this.wrapperEl&&(this.wrapperEl.style[o]=u),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var u,g,v,b=this._activeObject,_=this.backgroundImage,S=this.overlayImage;for(this.viewportTransform=o,g=0,v=this._objects.length;g<v;g++)(u=this._objects[g]).group||u.setCoords(!0);return b&&b.setCoords(),_&&_.setCoords(!0),S&&S.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,u){var g=o,v=this.viewportTransform.slice(0);o=t(o,e(this.viewportTransform)),v[0]=u,v[3]=u;var b=t(o,v);return v[4]+=g.x-b.x,v[5]+=g.y-b.y,this.setViewportTransform(v)},setZoom:function(o){return this.zoomToPoint(new fabric.Point(0,0),o),this},absolutePan:function(o){var u=this.viewportTransform.slice(0);return u[4]=-o.x,u[5]=-o.y,this.setViewportTransform(u)},relativePan:function(o){return this.absolutePan(new fabric.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},u=this.width,g=this.height,v=e(this.viewportTransform);return o.tl=t({x:0,y:0},v),o.br=t({x:u,y:g},v),o.tr=new fabric.Point(o.br.x,o.tl.y),o.bl=new fabric.Point(o.tl.x,o.br.y),this.vptCoords=o},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,u){var g=this.viewportTransform,v=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),fabric.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._renderObjects(o,u),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),v&&(v.canvas=this,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var u=this.viewportTransform,g=this.clipPath;o.save(),o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),o.globalCompositeOperation="destination-in",g.transform(o),o.scale(1/g.zoomX,1/g.zoomY),o.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),o.restore()},_renderObjects:function(o,u){var g,v;for(g=0,v=u.length;g<v;++g)u[g]&&u[g].render(o)},_renderBackgroundOrOverlay:function(o,u){var g=this[u+"Color"],v=this[u+"Image"],b=this.viewportTransform,_=this[u+"Vpt"];if(g||v){if(g){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=g.toLive?g.toLive(o,this):g,_&&o.transform(b[0],b[1],b[2],b[3],b[4],b[5]),o.transform(1,0,0,1,g.offsetX||0,g.offsetY||0);var S=g.gradientTransform||g.patternTransform;S&&o.transform(S[0],S[1],S[2],S[3],S[4],S[5]),o.fill(),o.restore()}v&&(o.save(),_&&o.transform(b[0],b[1],b[2],b[3],b[4],b[5]),v.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new fabric.Point(this.width/2,this.height/2)},centerObjectH:function(o){return this._centerObject(o,new fabric.Point(this.getCenterPoint().x,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new fabric.Point(o.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(o){var u=this.getCenterPoint();return this._centerObject(o,u)},viewportCenterObject:function(o){var u=this.getVpCenter();return this._centerObject(o,u)},viewportCenterObjectH:function(o){var u=this.getVpCenter();return this._centerObject(o,new fabric.Point(u.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var u=this.getVpCenter();return this._centerObject(o,new fabric.Point(o.getCenterPoint().x,u.y))},getVpCenter:function(){var o=this.getCenterPoint(),u=e(this.viewportTransform);return t(o,u)},_centerObject:function(o,u){return o.setPositionByOrigin(u,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,u){var g=this.clipPath,v={version:fabric.version,objects:this._toObjects(o,u)};return g&&!g.excludeFromExport&&(v.clipPath=this._toObject(this.clipPath,o,u)),h(v,this.__serializeBgOverlay(o,u)),fabric.util.populateWithProperties(this,v,u),v},_toObjects:function(o,u){return this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){return this._toObject(g,o,u)},this)},_toObject:function(o,u,g){var v;this.includeDefaultValues||(v=o.includeDefaultValues,o.includeDefaultValues=!1);var b=o[u](g);return this.includeDefaultValues||(o.includeDefaultValues=v),b},__serializeBgOverlay:function(o,u){var g={},v=this.backgroundImage,b=this.overlayImage,_=this.backgroundColor,S=this.overlayColor;return _&&_.toObject?_.excludeFromExport||(g.background=_.toObject(u)):_&&(g.background=_),S&&S.toObject?S.excludeFromExport||(g.overlay=S.toObject(u)):S&&(g.overlay=S),v&&!v.excludeFromExport&&(g.backgroundImage=this._toObject(v,o,u)),b&&!b.excludeFromExport&&(g.overlayImage=this._toObject(b,o,u)),g},svgViewportTransformation:!0,toSVG:function(o,u){o||(o={}),o.reviver=u;var g=[];return this._setSVGPreamble(g,o),this._setSVGHeader(g,o),this.clipPath&&g.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(g,"background"),this._setSVGBgOverlayImage(g,"backgroundImage",u),this._setSVGObjects(g,u),this.clipPath&&g.push("</g>\n"),this._setSVGBgOverlayColor(g,"overlay"),this._setSVGBgOverlayImage(g,"overlayImage",u),g.push("</svg>"),g.join("")},_setSVGPreamble:function(o,u){u.suppressPreamble||o.push('<?xml version="1.0" encoding="',u.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(o,u){var g,v=u.width||this.width,b=u.height||this.height,_='viewBox="0 0 '+this.width+" "+this.height+'" ',S=fabric.Object.NUM_FRACTION_DIGITS;u.viewBox?_='viewBox="'+u.viewBox.x+" "+u.viewBox.y+" "+u.viewBox.width+" "+u.viewBox.height+'" ':this.svgViewportTransformation&&(_='viewBox="'+l(-(g=this.viewportTransform)[4]/g[0],S)+" "+l(-g[5]/g[3],S)+" "+l(this.width/g[0],S)+" "+l(this.height/g[3],S)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',b,'" ',_,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(u),"</defs>\n")},createSVGClipPathMarkup:function(o){var u=this.clipPath;return u?(u.clipPathId="CLIPPATH_"+fabric.Object.__uid++,'<clipPath id="'+u.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(o.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var o=this;return["background","overlay"].map(function(u){var g=o[u+"Color"];if(g&&g.toLive){var v=o[u+"Vpt"],b=o.viewportTransform;return g.toSVG({width:o.width/(v?b[0]:1),height:o.height/(v?b[3]:1)},{additionalTransform:v?fabric.util.matrixToSVG(b):""})}}).join("")},createSVGFontFacesMarkup:function(){var o,u,g,v,b,_,S,E,M="",F={},G=fabric.fontPaths,q=[];for(this._objects.forEach(function d(H){q.push(H),H._objects&&H._objects.forEach(d)}),S=0,E=q.length;S<E;S++)if(u=(o=q[S]).fontFamily,-1!==o.type.indexOf("text")&&!F[u]&&G[u]&&(F[u]=!0,o.styles))for(b in g=o.styles)for(_ in v=g[b])!F[u=v[_].fontFamily]&&G[u]&&(F[u]=!0);for(var k in F)M+=["\t\t@font-face {\n","\t\t\tfont-family: '",k,"';\n","\t\t\tsrc: url('",G[k],"');\n","\t\t}\n"].join("");return M&&(M=['\t<style type="text/css">',"<![CDATA[\n",M,"]]>","</style>\n"].join("")),M},_setSVGObjects:function(o,u){var g,v,b,_=this._objects;for(v=0,b=_.length;v<b;v++)(g=_[v]).excludeFromExport||this._setSVGObject(o,g,u)},_setSVGObject:function(o,u,g){o.push(u.toSVG(g))},_setSVGBgOverlayImage:function(o,u,g){this[u]&&!this[u].excludeFromExport&&this[u].toSVG&&o.push(this[u].toSVG(g))},_setSVGBgOverlayColor:function(o,u){var g=this[u+"Color"],b=this.width,_=this.height;if(g)if(g.toLive){var S=g.repeat,E=fabric.util.invertTransform(this.viewportTransform),M=this[u+"Vpt"]?fabric.util.matrixToSVG(E):"";o.push('<rect transform="'+M+" translate(",b/2,",",_/2,')"',' x="',g.offsetX-b/2,'" y="',g.offsetY-_/2,'" ','width="',"repeat-y"===S||"no-repeat"===S?g.source.width:b,'" height="',"repeat-x"===S||"no-repeat"===S?g.source.height:_,'" fill="url(#SVGID_'+g.id+')"',"></rect>\n")}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',g,'"',"></rect>\n")},sendToBack:function(o){if(!o)return this;var u,g,v,b=this._activeObject;if(o===b&&"activeSelection"===o.type)for(u=(v=b._objects).length;u--;)a(this._objects,g=v[u]),this._objects.unshift(g);else a(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var u,g,v,b=this._activeObject;if(o===b&&"activeSelection"===o.type)for(v=b._objects,u=0;u<v.length;u++)a(this._objects,g=v[u]),this._objects.push(g);else a(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,u){if(!o)return this;var g,v,b,_,S,E=this._activeObject,M=0;if(o===E&&"activeSelection"===o.type)for(S=E._objects,g=0;g<S.length;g++)0+M<(b=this._objects.indexOf(v=S[g]))&&(_=b-1,a(this._objects,v),this._objects.splice(_,0,v)),M++;else 0!==(b=this._objects.indexOf(o))&&(_=this._findNewLowerIndex(o,b,u),a(this._objects,o),this._objects.splice(_,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,u,g){var v,b;if(g){for(b=(v=u)-1;0<=b;--b)if(o.intersectsWithObject(this._objects[b])||o.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(o)){v=b;break}}else v=u-1;return v},bringForward:function(o,u){if(!o)return this;var g,v,b,_,S,E=this._activeObject,M=0;if(o===E&&"activeSelection"===o.type)for(g=(S=E._objects).length;g--;)(b=this._objects.indexOf(v=S[g]))<this._objects.length-1-M&&(_=b+1,a(this._objects,v),this._objects.splice(_,0,v)),M++;else(b=this._objects.indexOf(o))!==this._objects.length-1&&(_=this._findNewUpperIndex(o,b,u),a(this._objects,o),this._objects.splice(_,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,u,g){var v,b,_;if(g){for(b=(v=u)+1,_=this._objects.length;b<_;++b)if(o.intersectsWithObject(this._objects[b])||o.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(o)){v=b;break}}else v=u+1;return v},moveTo:function(o,u){return a(this._objects,o),this._objects.splice(u,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),fabric.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(fabric.StaticCanvas.prototype,fabric.Observable),h(fabric.StaticCanvas.prototype,fabric.Collection),h(fabric.StaticCanvas.prototype,fabric.DataURLExporter),h(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var u=r();if(!u||!u.getContext)return null;var g=u.getContext("2d");return g&&"setLineDash"===o?void 0!==g.setLineDash:null}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var o=i(this.lowerCanvasEl);return o&&o.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(o){var u=i(this.lowerCanvasEl);return u&&u.createJPEGStream(o)})}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var n=this.canvas.viewportTransform;h.save(),h.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,n=this.shadow,a=h.contextTop,l=h.getZoom();h&&h._isRetinaScaling()&&(l*=fabric.devicePixelRatio),a.shadowColor=n.color,a.shadowBlur=n.blur*l,a.shadowOffsetX=n.offsetX*l,a.shadowOffsetY=n.offsetY*l}},needsFullRender:function(){return new fabric.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,n,a){var l=n.midPointFrom(a);return h.quadraticCurveTo(n.x,n.y,l.x,l.y),l},onMouseDown:function(h,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&1<this._points.length))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var a=this._points,l=a.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,a[l-2],a[l-1],!0),t.stroke(),t.restore()}},onMouseUp:function(h){return!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(h){var n=new fabric.Point(h.x,h.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(h){return!(1<this._points.length&&h.eq(this._points[this._points.length-1])||(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var n=new fabric.Point(h.x,h.y);return this._addPoint(n)},_render:function(h){var n,a,l=this._points[0],t=this._points[1];if(this._saveAndTransform(h=h||this.canvas.contextTop),h.beginPath(),2===this._points.length&&l.x===t.x&&l.y===t.y){var e=this.width/1e3;l=new fabric.Point(l.x,l.y),t=new fabric.Point(t.x,t.y),l.x-=e,t.x+=e}for(h.moveTo(l.x,l.y),n=1,a=this._points.length;n<a;n++)this._drawSegment(h,l,t),l=this._points[n],t=this._points[n+1];h.lineTo(l.x,l.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){return fabric.util.getSmoothPathFromPoints(h,this.width/1e3)},_isEmptySVGPath:function(h){return"M 0 0 Q 0 0 0 0 L 0 0"===fabric.util.joinPath(h)},createPath:function(h){var n=new fabric.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new fabric.Shadow(this.shadow)),n},decimatePoints:function(h,n){if(h.length<=2)return h;var a,l=this.canvas.getZoom(),t=Math.pow(n/l,2),e=h.length-1,i=h[0],r=[i];for(a=1;a<e-1;a++)t<=Math.pow(i.x-h[a].x,2)+Math.pow(i.y-h[a].y,2)&&r.push(i=h[a]);return r.push(h[e]),r},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h))this.canvas.requestRenderAll();else{var n=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:n})}}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var n=this.addPoint(h),a=this.canvas.contextTop;this._saveAndTransform(a),this.dot(a,n),a.restore()},dot:function(h,n){h.fillStyle=n.fill,h.beginPath(),h.arc(n.x,n.y,n.radius,0,2*Math.PI,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h,n,a=this.canvas.contextTop,l=this.points;for(this._saveAndTransform(a),h=0,n=l.length;h<n;h++)this.dot(a,l[h]);a.restore()},onMouseMove:function(h){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h,n,a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var l=[];for(h=0,n=this.points.length;h<n;h++){var t=this.points[h],e=new fabric.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(e.shadow=new fabric.Shadow(this.shadow)),l.push(e)}var i=new fabric.Group(l);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(h){var n=new fabric.Point(h.x,h.y),a=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,l=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return n.radius=a,n.fill=l,this.points.push(n),n}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],a=0,l=this.sprayChunks.length;a<l;a++)for(var t=this.sprayChunks[a],e=0,i=t.length;e<i;e++){var r=new fabric.Rect({width:t[e].width,height:t[e].width,left:t[e].x+1,top:t[e].y+1,originX:"center",originY:"center",fill:this.color});n.push(r)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var s=new fabric.Group(n);this.shadow&&s.set("shadow",new fabric.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var n,a,l,t={};for(a=0,l=h.length;a<l;a++)t[n=h[a].left+""+h[a].top]||(t[n]=h[a]);var e=[];for(n in t)e.push(t[n]);return e},render:function(h){var n,a,l=this.canvas.contextTop;for(l.fillStyle=this.color,this._saveAndTransform(l),n=0,a=h.length;n<a;n++){var t=h[n];void 0!==t.opacity&&(l.globalAlpha=t.opacity),l.fillRect(t.x,t.y,t.width,t.width)}l.restore()},_render:function(){var h,n,a=this.canvas.contextTop;for(a.fillStyle=this.color,this._saveAndTransform(a),h=0,n=this.sprayChunks.length;h<n;h++)this.render(this.sprayChunks[h]);a.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var n,a,l,t,e=this.width/2;for(t=0;t<this.density;t++){n=fabric.util.getRandomInt(h.x-e,h.x+e),a=fabric.util.getRandomInt(h.y-e,h.y+e),l=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var i=new fabric.Point(n,a);i.width=l,this.randomOpacity&&(i.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var h=fabric.util.createCanvasElement(),n=h.getContext("2d");return h.width=h.height=25,n.fillStyle=this.color,n.beginPath(),n.arc(10,10,10,0,2*Math.PI,!1),n.closePath(),n.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var n=this.callSuper("createPath",h),a=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-a.x,offsetY:-a.y}),n}}),function(){var h=fabric.util.getPointer,n=fabric.util.degreesToRadians,a=fabric.util.isTouchEvent;for(var l in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,r=this.getActiveObjects();if(0<r.length&&!this.preserveObjectStacking){e=[],i=[];for(var s=0,o=this._objects.length;s<o;s++)-1===r.indexOf(t=this._objects[s])?e.push(t):i.push(t);1<r.length&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){return!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),r=fabric.util.invertTransform(i),s=this.restorePointerVpt(e);return fabric.util.transformPoint(s,r)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var r=this._normalizePointer(t,{x:e,y:i}),s=Math.max(t.cacheTranslationX+r.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+r.y*t.zoomY,0);return fabric.util.isTransparent(t._cacheContext,Math.round(s),Math.round(o),this.targetFindTolerance)}var u=this.contextCache,g=t.selectionBackgroundColor,v=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(u),u.save(),u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),t.render(u),u.restore(),t.selectionBackgroundColor=g,fabric.util.isTransparent(u,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),r=this._activeObject;return!e||e&&r&&1<i.length&&-1===i.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t,e,i){var r;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?r=this.centeredScaling||t.centeredScaling:"rotate"===e&&(r=this.centeredRotation||t.centeredRotation),r?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,r){if(!e||!t)return"drag";var s=r.controls[e];return s.getActionName(i,s,r)},_setupCurrentTransform:function(t,e,i){if(e){var r=this.getPointer(t),s=e.__corner,o=e.controls[s],u=i&&s?o.getActionHandler(t,e,o):fabric.controlsUtils.dragHandler,g=this._getActionFromCorner(i,s,t,e),v=this._getOriginFromCorner(e,s),b=t[this.centeredKey],_={target:e,action:g,actionHandler:u,corner:s,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:v.x,originY:v.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:n(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:b,original:fabric.util.saveObjectTransform(e)};this._shouldCenterTransform(e,g,b)&&(_.originX="center",_.originY="center"),_.original.originX=v.x,_.original.originY=v.y,this._currentTransform=_,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new fabric.Point(e.ex,e.ey),r=fabric.util.transformPoint(i,this.viewportTransform),s=new fabric.Point(e.ex+e.left,e.ey+e.top),o=fabric.util.transformPoint(s,this.viewportTransform),u=Math.min(r.x,o.x),g=Math.min(r.y,o.y),v=Math.max(r.x,o.x),b=Math.max(r.y,o.y),_=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(u,g,v-u,b-g)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,u+=_,g+=_,v-=_,b-=_,fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(u,g,v-u,b-g))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,s=this.getPointer(t,!0),o=this._activeObject,u=this.getActiveObjects(),g=a(t),v=1<u.length&&!e||1===u.length;if(this.targets=[],v&&o._findTargetCorner(s,g)||1<u.length&&!e&&o===this._searchPossibleTargets([o],s))return o;if(1===u.length&&o===this._searchPossibleTargets([o],s)){if(!this.preserveObjectStacking)return o;i=o,r=this.targets,this.targets=[]}var b=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&b&&i&&b!==i&&(b=i,this.targets=r),b}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,i.x,i.y)))return!0},_searchPossibleTargets:function(t,e){for(var i,r,s=t.length;s--;){var o=t[s],u=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(u,o,e)){(i=t[s]).subTargetCheck&&i instanceof fabric.Group&&(r=this._searchPossibleTargets(i._objects,e))&&this.targets.push(r);break}}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i,r=h(t),s=this.upperCanvasEl,o=s.getBoundingClientRect(),u=o.width||0,g=o.height||0;u&&g||("top"in o&&"bottom"in o&&(g=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(u=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=this.restorePointerVpt(r));var v=this.getRetinaScaling();return 1!==v&&(r.x/=v,r.y/=v),{x:r.x*(i=0===u||0===g?{width:1,height:1}:{width:s.width/u,height:s.height/g}).width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),fabric.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,r=this.getActiveObjects(),s=[],o=[];t.forEach(function(u){-1===r.indexOf(u)&&(i=!0,u.fire("deselected",{e,target:u}),o.push(u))}),r.forEach(function(u){-1===t.indexOf(u)&&(i=!0,u.fire("selected",{e,target:u}),s.push(u))}),0<t.length&&0<r.length?i&&this.fire("selection:updated",{e,selected:s,deselected:o}):0<r.length?this.fire("selection:created",{e,selected:s}):0<t.length&&this.fire("selection:cleared",{e,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){fabric.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(t),s=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,r),s},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(i){e[i]=t[i]}),fabric.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,r)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),fabric.StaticCanvas)"prototype"!==l&&(fabric.Canvas[l]=fabric.StaticCanvas[l])}(),function(){var h=fabric.util.addListener,n=fabric.util.removeListener,a={passive:!1};function l(t,e){return t.button&&t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,r=this._getEventPrefix();t(fabric.window,"resize",this._onResize),t(i,r+"down",this._onMouseDown),t(i,r+"move",this._onMouseMove,a),t(i,r+"out",this._onMouseOut),t(i,r+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(fabric.document,t+"up",this._onMouseUp),n(fabric.document,"touchend",this._onTouchEnd,a),n(fabric.document,t+"move",this._onMouseMove,a),n(fabric.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach(function(r){i.fire("mouse:out",{target:e,e:t}),r&&e.fire("mouseout",{e:t})}),this._hoveredTargets=[]},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();h(fabric.document,"touchend",this._onTouchEnd,a),h(fabric.document,"touchmove",this._onMouseMove,a),n(e,i+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();n(e,i+"move",this._onMouseMove,a),h(fabric.document,i+"up",this._onMouseUp),h(fabric.document,i+"move",this._onMouseMove,a)},_onTouchEnd:function(t){if(!(0<t.touches.length)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var e=this._getEventPrefix();n(fabric.document,"touchend",this._onTouchEnd,a),n(fabric.document,"touchmove",this._onMouseMove,a);var i=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(i.upperCanvasEl,e+"down",i._onMouseDown),i._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(t)&&(n(fabric.document,i+"up",this._onMouseUp),n(fabric.document,i+"move",this._onMouseMove,a),h(e,i+"move",this._onMouseMove,a))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||!1},__onMouseUp:function(t){var e,i=this._currentTransform,r=this._groupSelector,s=!1,o=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),l(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,o);else{if(l(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,o),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(i&&(this._finalizeCurrentTransform(t),s=i.actionPerformed),!o){var u=e===this._activeObject;this._maybeGroupObjects(t),s||(s=this._shouldRender(e)||!u&&e===this._activeObject)}var g,v;if(e){if(g=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),s=!0;else{var b=e.controls[g],_=b&&b.getMouseUpHandler(t,e,b);_&&_(t,i,(v=this.getPointer(t)).x,v.y)}e.isMoving=!1}if(i&&(i.target!==e||i.corner!==g)){var S=i.target&&i.target.controls[i.corner],E=S&&S.getMouseUpHandler(t,e,b);v=v||this.getPointer(t),E&&E(t,i,v.x,v.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,o),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():o||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),r=this.targets,s={e,target:i,subTargets:r};if(this.fire(t,s),i&&i.fire(t,s),!r)return i;for(var o=0;o<r.length;o++)r[o].fire(t,s);return i},_handleEvent:function(t,e,i,r){var s=this._target,o=this.targets||[],u={e:t,target:s,subTargets:o,button:i||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(u.currentTarget=this.findTarget(t),u.currentSubTargets=this.targets),this.fire("mouse:"+e,u),s&&s.fire("mouse"+e,u);for(var g=0;g<o.length;g++)o[g].fire("mouse"+e,u)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,r={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",r)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(l(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(l(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var r=this._shouldRender(e),s=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):s&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var o=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var u=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t));if(e.__corner=u,e===this._activeObject&&(u||!s)){this._setupCurrentTransform(t,e,o);var g=e.controls[u],v=(i=this.getPointer(t),g&&g.getMouseDownHandler(t,e,g));v&&v(t,this._currentTransform,i.x,i.y)}}this._handleEvent(t,"down"),(r||s)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var r=this._groupSelector;r?(r.left=(i=this._absolutePointer).x-r.ex,r.top=i.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,r=this._hoveredTargets,s=this.targets,o=Math.max(r.length,s.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var u=0;u<o;u++)this.fireSyntheticInOutEvents(s[u],e,{oldTarget:r[u],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,r=this._hoveredTargets,s=this.targets,o=Math.max(r.length,s.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var u=0;u<o;u++)this.fireSyntheticInOutEvents(s[u],e,{oldTarget:r[u],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var r,s,o,u=i.oldTarget,g=u!==t,v=i.canvasEvtIn,b=i.canvasEvtOut;g&&(r={e,target:t,previousTarget:u},s={e,target:u,nextTarget:t}),o=t&&g,u&&g&&(b&&this.fire(b,s),u.fire(i.evtOut,s)),o&&(v&&this.fire(v,r),t.fire(i.evtIn,r))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var o=e.action,u=!1,g=e.actionHandler;g&&(u=g(t,e,i.x,i.y)),"drag"===o&&u&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||u},_fire:fabric.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,r=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,s=(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));s?this.setCursor(this.getCornerCursor(s,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(o){i=o.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(t,e,i){var r=e.controls[t];return r.cursorStyleHandler(i,r,e)}})}(),function(){var h=Math.min,n=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(a,l){var t=this._activeObject;return t&&this._isSelectionKeyPressed(a)&&l&&l.selectable&&this.selection&&(t!==l||"activeSelection"===t.type)&&!l.onSelect({e:a})},_handleGrouping:function(a,l){var t=this._activeObject;t.__corner||(l!==t||(l=this.findTarget(a,!0))&&l.selectable)&&(t&&"activeSelection"===t.type?this._updateActiveSelection(l,a):this._createActiveSelection(l,a))},_updateActiveSelection:function(a,l){var t=this._activeObject,e=t._objects.slice(0);t.contains(a)?(t.removeWithUpdate(a),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat(),1===t.size()&&this._setActiveObject(t.item(0),l)):(t.addWithUpdate(a),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(e,l)},_createActiveSelection:function(a,l){var t=this.getActiveObjects(),e=this._createGroup(a);this._hoveredTarget=e,this._setActiveObject(e,l),this._fireSelectionEvents(t,l)},_createGroup:function(a){var l=this._objects,t=l.indexOf(this._activeObject)<l.indexOf(a)?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(t,{canvas:this})},_groupSelectedObjects:function(a){var l,t=this._collectObjects(a);1===t.length?this.setActiveObject(t[0],a):1<t.length&&(l=new fabric.ActiveSelection(t.reverse(),{canvas:this}),this.setActiveObject(l,a))},_collectObjects:function(a){for(var l,t=[],e=this._groupSelector.ex,i=this._groupSelector.ey,r=e+this._groupSelector.left,s=i+this._groupSelector.top,o=new fabric.Point(h(e,r),h(i,s)),u=new fabric.Point(n(e,r),n(i,s)),g=!this.selectionFullyContained,v=e===r&&i===s,b=this._objects.length;b--&&!((l=this._objects[b])&&l.selectable&&l.visible&&(g&&l.intersectsWithRect(o,u,!0)||l.isContainedWithinRect(o,u,!0)||g&&l.containsPoint(o,null,!0)||g&&l.containsPoint(u,null,!0))&&(t.push(l),v)););return 1<t.length&&(t=t.filter(function(_){return!_.onSelect({e:a})})),t},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var n=h.format||"png",a=h.quality||1,l=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(l,h);return fabric.util.toDataURL(t,n,a)},toCanvasElement:function(h,n){var a=((n=n||{}).width||this.width)*(h=h||1),l=(n.height||this.height)*h,t=this.getZoom(),e=this.width,i=this.height,r=t*h,s=this.viewportTransform,g=this.interactive,v=[r,0,0,r,(s[4]-(n.left||0))*h,(s[5]-(n.top||0))*h],b=this.enableRetinaScaling,_=fabric.util.createCanvasElement(),S=this.contextTop;return _.width=a,_.height=l,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=v,this.width=a,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(_.getContext("2d"),this._objects),this.viewportTransform=s,this.width=e,this.height=i,this.calcViewportBoundaries(),this.interactive=g,this.enableRetinaScaling=b,this.contextTop=S,_}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(h,n,a){if(h){var l="string"==typeof h?JSON.parse(h):fabric.util.object.clone(h),t=this,e=l.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete l.clipPath,this._enlivenObjects(l.objects,function(r){t.clear(),t._setBgOverlay(l,function(){e?t._enlivenObjects([e],function(s){t.clipPath=s[0],t.__setupCanvas.call(t,l,r,i,n)}):t.__setupCanvas.call(t,l,r,i,n)})},a),this}},__setupCanvas:function(h,n,a,l){var t=this;n.forEach(function(e,i){t.insertAt(e,i)}),this.renderOnAddRemove=a,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),l&&l()},_setBgOverlay:function(h,n){var a={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(h.backgroundImage||h.overlayImage||h.background||h.overlay){var l=function(){a.backgroundImage&&a.overlayImage&&a.backgroundColor&&a.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",h.backgroundImage,a,l),this.__setBgOverlay("overlayImage",h.overlayImage,a,l),this.__setBgOverlay("backgroundColor",h.background,a,l),this.__setBgOverlay("overlayColor",h.overlay,a,l)}else n&&n()},__setBgOverlay:function(h,n,a,l){var t=this;if(!n)return a[h]=!0,void(l&&l());"backgroundImage"===h||"overlayImage"===h?fabric.util.enlivenObjects([n],function(e){t[h]=e[0],a[h]=!0,l&&l()}):this["set"+fabric.util.string.capitalize(h,!0)](n,function(){a[h]=!0,l&&l()})},_enlivenObjects:function(h,n,a){h&&0!==h.length?fabric.util.enlivenObjects(h,function(l){n&&n(l)},null,a):n&&n([])},_toDataURL:function(h,n){this.clone(function(a){n(a.toDataURL(h))})},_toDataURLWithMultiplier:function(h,n,a){this.clone(function(l){a(l.toDataURLWithMultiplier(h,n))})},clone:function(h,n){var a=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(l){l.loadFromJSON(a,function(){h&&h(l)})})},cloneWithoutData:function(h){var n=fabric.util.createCanvasElement();n.width=this.width,n.height=this.height;var a=new fabric.Canvas(n);this.backgroundImage?(a.setBackgroundImage(this.backgroundImage.src,function(){a.renderAll(),h&&h(a)}),a.backgroundImageOpacity=this.backgroundImageOpacity,a.backgroundImageStretch=this.backgroundImageStretch):h&&h(a)}}),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t=n.util.toFixed,e=n.util.string.capitalize,i=n.util.degreesToRadians;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!n.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var o=n.perfLimitSizeTotal,u=s.width,g=s.height,v=n.maxCacheSideLimit,b=n.minCacheSideLimit;if(u<=v&&g<=v&&u*g<=o)return u<b&&(s.width=b),g<b&&(s.height=b),s;var S=n.util.limitDimsByArea(u/g,o),E=n.util.capValue,M=E(b,S.x,v),F=E(b,S.y,v);return M<u&&(s.zoomX/=u/M,s.width=M,s.capped=!0),F<g&&(s.zoomY/=g/F,s.height=F,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),o=this._getTransformedDimensions(0,0),u=o.x*s.scaleX/this.scaleX,g=o.y*s.scaleY/this.scaleY;return{width:u+2,height:g+2,zoomX:s.scaleX,zoomY:s.scaleY,x:u,y:g}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var u=s._currentTransform.action;if(this===s._currentTransform.target&&u.slice&&"scale"===u.slice(0,5))return!1}var g,v,b=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),S=n.minCacheSideLimit,E=_.width,M=_.height,F=_.zoomX,G=_.zoomY,q=E!==this.cacheWidth||M!==this.cacheHeight,d=q||this.zoomX!==F||this.zoomY!==G,H=0,X=0,K=!1;if(q){var it=this._cacheCanvas.width,B=this._cacheCanvas.height,P=it<E||B<M;K=P||(E<.9*it||M<.9*B)&&S<it&&S<B,P&&!_.capped&&(S<E||S<M)&&(H=.1*E,X=.1*M)}return this instanceof n.Text&&this.path&&(K=d=!0,H+=this.getHeightOfLine(0)*this.zoomX,X+=this.getHeightOfLine(0)*this.zoomY),!!d&&(K?(b.width=Math.ceil(E+H),b.height=Math.ceil(M+X)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),g=_.x/2,v=_.y/2,this.cacheTranslationX=Math.round(b.width/2-g)+g,this.cacheTranslationY=Math.round(b.height/2-v)+v,this.cacheWidth=E,this.cacheHeight=M,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(F,G),this.zoomX=F,this.zoomY=G,!0)},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var u=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop));s.transform(u[0],u[1],u[2],u[3],u[4],u[5])},toObject:function(s){var o=n.Object.NUM_FRACTION_DIGITS,u={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:t(this.left,o),top:t(this.top,o),width:t(this.width,o),height:t(this.height,o),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,o),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,o),scaleX:t(this.scaleX,o),scaleY:t(this.scaleY,o),angle:t(this.angle,o),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,o),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,o),skewY:t(this.skewY,o)};return this.clipPath&&!this.clipPath.excludeFromExport&&(u.clipPath=this.clipPath.toObject(s),u.clipPath.inverted=this.clipPath.inverted,u.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,u,s),this.includeDefaultValues||(u=this._removeDefaultValues(u)),u},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var o=n.util.getKlass(s.type).prototype;return o.stateProperties.forEach(function(u){"left"!==u&&"top"!==u&&(s[u]===o[u]&&delete s[u],Array.isArray(s[u])&&Array.isArray(o[u])&&0===s[u].length&&0===o[u].length&&delete s[u])}),s},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),o=s.scaleX,u=s.scaleY;if(this.canvas){var g=this.canvas.getZoom(),v=this.canvas.getRetinaScaling();o*=g*v,u*=g*v}return{scaleX:o,scaleY:u}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,o){var g=this[s]!==o,v=!1;return("scaleX"===s||"scaleY"===s)&&(o=this._constrainScale(o)),"scaleX"===s&&o<0?(this.flipX=!this.flipX,o*=-1):"scaleY"===s&&o<0?(this.flipY=!this.flipY,o*=-1):"shadow"!==s||!o||o instanceof n.Shadow?"dirty"===s&&this.group&&this.group.set("dirty",o):o=new n.Shadow(o),this[s]=o,g&&(v=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(s)?(this.dirty=!0,v&&this.group.set("dirty",!0)):v&&-1<this.stateProperties.indexOf(s)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(s,o){if(s.save(),s.globalCompositeOperation=o.inverted?"destination-out":"destination-in",o.absolutePositioned){var u=n.util.invertTransform(this.calcTransformMatrix());s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}o.transform(s),s.scale(1/o.zoomX,1/o.zoomY),s.drawImage(o._cacheCanvas,-o.cacheTranslationX,-o.cacheTranslationY),s.restore()},drawObject:function(s,o){var u=this.fill,g=this.stroke;o?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s,this.clipPath),this.fill=u,this.stroke=g},_drawClipPath:function(s,o){o&&(o.canvas=this.canvas,o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCache(s,o))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!s){var o=this.cacheWidth/this.zoomX,u=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-u/2,o,u)}return!0}return!1},_renderBackground:function(s){if(this.backgroundColor){var o=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-o.x/2,-o.y/2,o.x,o.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,o){var u=o.stroke;u&&(s.lineWidth=o.strokeWidth,s.lineCap=o.strokeLineCap,s.lineDashOffset=o.strokeDashOffset,s.lineJoin=o.strokeLineJoin,s.miterLimit=o.strokeMiterLimit,u.toLive?"percentage"===u.gradientUnits||u.gradientTransform||u.patternTransform?this._applyPatternForTransformedGradient(s,u):(s.strokeStyle=u.toLive(s,this),this._applyPatternGradientTransform(s,u)):s.strokeStyle=o.stroke)},_setFillStyles:function(s,o){var u=o.fill;u&&(u.toLive?(s.fillStyle=u.toLive(s,this),this._applyPatternGradientTransform(s,o.fill)):s.fillStyle=u)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,o){o&&0!==o.length&&(1&o.length&&o.push.apply(o,o),s.setLineDash(o))},_renderControls:function(s,o){var u,g,v,b=this.getViewportTransform(),_=this.calcTransformMatrix();g=void 0!==(o=o||{}).hasBorders?o.hasBorders:this.hasBorders,v=void 0!==o.hasControls?o.hasControls:this.hasControls,_=n.util.multiplyTransformMatrices(b,_),u=n.util.qrDecompose(_),s.save(),s.translate(u.translateX,u.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),s.rotate(i(this.group?u.angle:this.angle)),o.forActiveSelection||this.group?g&&this.drawBordersInGroup(s,u,o):g&&this.drawBorders(s,o),v&&this.drawControls(s,o),s.restore()},_setShadow:function(s){if(this.shadow){var o,u=this.shadow,g=this.canvas,v=g&&g.viewportTransform[0]||1,b=g&&g.viewportTransform[3]||1;o=u.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g&&g._isRetinaScaling()&&(v*=n.devicePixelRatio,b*=n.devicePixelRatio),s.shadowColor=u.color,s.shadowBlur=u.blur*n.browserShadowBlurConstant*(v+b)*(o.scaleX+o.scaleY)/4,s.shadowOffsetX=u.offsetX*v*o.scaleX,s.shadowOffsetY=u.offsetY*b*o.scaleY}},_removeShadow:function(s){this.shadow&&(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,o){if(!o||!o.toLive)return{offsetX:0,offsetY:0};var u=o.gradientTransform||o.patternTransform,g=-this.width/2+o.offsetX||0,v=-this.height/2+o.offsetY||0;return"percentage"===o.gradientUnits?s.transform(this.width,0,0,this.height,g,v):s.transform(1,0,0,1,g,v),u&&s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),{offsetX:g,offsetY:v}},_renderPaintInOrder:function(s){"stroke"===this.paintFirst?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){this.fill&&(s.save(),this._setFillStyles(s,this),"evenodd"===this.fillRule?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var o=this.getObjectScaling();s.scale(1/o.scaleX,1/o.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,o){var u,g=this._limitCacheSize(this._getCacheCanvasDimensions()),v=n.util.createCanvasElement(),b=this.canvas.getRetinaScaling(),_=g.x/this.scaleX/b,S=g.y/this.scaleY/b;v.width=_,v.height=S,(u=v.getContext("2d")).beginPath(),u.moveTo(0,0),u.lineTo(_,0),u.lineTo(_,S),u.lineTo(0,S),u.closePath(),u.translate(_/2,S/2),u.scale(g.zoomX/this.scaleX/b,g.zoomY/this.scaleY/b),this._applyPatternGradientTransform(u,o),u.fillStyle=o.toLive(s),u.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(b*this.scaleX/g.zoomX,b*this.scaleY/g.zoomY),s.strokeStyle=u.createPattern(v,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var o=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),o=n.util.transformPoint(o,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,o.x+=s.offsetLeft,o.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(o,"center","center")},clone:function(s,o){var u=this.toObject(o);this.constructor.fromObject?this.constructor.fromObject(u,s):n.Object._fromObject("Object",u,s)},cloneAsImage:function(s,o){var u=this.toCanvasElement(o);return s&&s(new n.Image(u)),this},toCanvasElement:function(s){s||(s={});var o=n.util,u=o.saveObjectTransform(this),g=this.group,v=this.shadow,b=Math.abs,_=(s.multiplier||1)*(s.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,s.withoutTransform&&o.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var S,E,F,G=n.util.createCanvasElement(),q=this.getBoundingRect(!0,!0),k=this.shadow,d={x:0,y:0};k&&(E=k.blur,S=k.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),d.x=2*Math.round(b(k.offsetX)+E)*b(S.scaleX),d.y=2*Math.round(b(k.offsetY)+E)*b(S.scaleY)),F=q.height+d.y,G.width=Math.ceil(q.width+d.x),G.height=Math.ceil(F);var H=new n.StaticCanvas(G,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===s.format&&(H.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(H.width/2,H.height/2),"center","center");var X=this.canvas;H.add(this);var K=H.toCanvasElement(_||1,s);return this.shadow=v,this.set("canvas",X),g&&(this.group=g),this.set(u).setCoords(),H._objects=[],H.dispose(),H=null,K},toDataURL:function(s){return s||(s={}),n.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var o=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return o&&this._setOriginToCenter(),this.set("angle",s),o&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,o){o=o||this.canvas.getPointer(s);var u=new n.Point(o.x,o.y),g=this._getLeftTopCoords();return this.angle&&(u=n.util.rotatePoint(u,g,i(-this.angle))),{x:u.x-g.x,y:u.y-g.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),a(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(s,o,u,g){var v=n[s];o=l(o,!0),n.util.enlivenPatterns([o.fill,o.stroke],function(b){void 0!==b[0]&&(o.fill=b[0]),void 0!==b[1]&&(o.stroke=b[1]),n.util.enlivenObjectEnlivables(o,o,function(){var _=g?new v(o[g],o):new v(o);u&&u(_)})})},n.Object.__uid=0)}(typeof exports<"u"?exports:this),function(){var h=fabric.util.degreesToRadians,n={left:-.5,center:0,right:.5},a={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(l,t,e,i,r){var s,o,u,g=l.x,v=l.y;return"string"==typeof t?t=n[t]:t-=.5,"string"==typeof i?i=n[i]:i-=.5,"string"==typeof e?e=a[e]:e-=.5,"string"==typeof r?r=a[r]:r-=.5,o=r-e,((s=i-t)||o)&&(u=this._getTransformedDimensions(),g=l.x+s*u.x,v=l.y+o*u.y),new fabric.Point(g,v)},translateToCenterPoint:function(l,t,e){var i=this.translateToGivenOrigin(l,t,e,"center","center");return this.angle?fabric.util.rotatePoint(i,l,h(this.angle)):i},translateToOriginPoint:function(l,t,e){var i=this.translateToGivenOrigin(l,"center","center",t,e);return this.angle?fabric.util.rotatePoint(i,l,h(this.angle)):i},getCenterPoint:function(){var l=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(l,this.originX,this.originY)},getPointByOrigin:function(l,t){var e=this.getCenterPoint();return this.translateToOriginPoint(e,l,t)},toLocalPoint:function(l,t,e){var i,r,s=this.getCenterPoint();return i=void 0!==t&&void 0!==e?this.translateToGivenOrigin(s,"center","center",t,e):new fabric.Point(this.left,this.top),r=new fabric.Point(l.x,l.y),this.angle&&(r=fabric.util.rotatePoint(r,s,-h(this.angle))),r.subtractEquals(i)},setPositionByOrigin:function(l,t,e){var i=this.translateToCenterPoint(l,t,e),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(l){var t,e,i=h(this.angle),r=this.getScaledWidth(),s=fabric.util.cos(i)*r,o=fabric.util.sin(i)*r;this.left+=s*((e="string"==typeof l?n[l]:l-.5)-(t="string"==typeof this.originX?n[this.originX]:this.originX-.5)),this.top+=o*(e-t),this.setCoords(),this.originX=l},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var l=this.getCenterPoint();this.originX="center",this.originY="center",this.left=l.x,this.top=l.y},_resetOrigin:function(){var l=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=l.x,this.top=l.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var h=fabric.util,n=h.degreesToRadians,a=h.multiplyTransformMatrices,l=h.transformPoint;h.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return i=this._getCoords(t,e),[new fabric.Point(i.tl.x,i.tl.y),new fabric.Point(i.tr.x,i.tr.y),new fabric.Point(i.br.x,i.br.y),new fabric.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(t,e,i,r){var s=this.getCoords(i,r);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(s,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var r=this.getCoords(e,i),o=0,u=t._getImageLines(e?t.aCoords:t.lineCoords);o<4;o++)if(!t.containsPoint(r[o],u))return!1;return!0},isContainedWithinRect:function(t,e,i,r){var s=this.getBoundingRect(i,r);return s.left>=t.x&&s.left+s.width<=e.x&&s.top>=t.y&&s.top+s.height<=e.y},containsPoint:function(t,e,i,r){var s=this._getCoords(i,r),o=(e=e||this._getImageLines(s),this._findCrossPoints(t,e));return 0!==o&&o%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(r){return r.x<=i.x&&r.x>=e.x&&r.y<=i.y&&r.y>=e.y})||!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_containsCenterOfCanvas:function(t,e,i){return!!this.containsPoint({x:(t.x+e.x)/2,y:(t.y+e.y)/2},null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every(function(r){return(r.x>=i.x||r.x<=e.x)&&(r.y>=i.y||r.y<=e.y)})&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,s,o=0;for(var u in e)if(!((s=e[u]).o.y<t.y&&s.d.y<t.y||s.o.y>=t.y&&s.d.y>=t.y||(s.o.x===s.d.x&&s.o.x>=t.x?r=s.o.x:(i=(s.d.y-s.o.y)/(s.d.x-s.o.x),r=-(t.y-0*t.x-(s.o.y-i*s.o.x))/(0-i)),r>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return h.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcLineCoords:function(){var t=this.getViewportTransform(),e=this.padding,i=n(this.angle),r=h.cos(i)*e,s=h.sin(i)*e,o=r+s,u=r-s,g=this.calcACoords(),v={tl:l(g.tl,t),tr:l(g.tr,t),bl:l(g.bl,t),br:l(g.br,t)};return e&&(v.tl.x-=u,v.tl.y-=o,v.tr.x+=o,v.tr.y-=u,v.bl.x-=o,v.bl.y+=u,v.br.x+=u,v.br.y+=o),v},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),r=a(i,e),s=a(r,t),o=(s=a(s,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),u={};return this.forEachControl(function(g,v,b){u[v]=g.positionHandler(o,s,b)}),u},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=a(e,t),r=this._getTransformedDimensions(),s=r.x/2,o=r.y/2;return{tl:l({x:-s,y:-o},i),tr:l({x:s,y:-o},i),bl:l({x:-s,y:o},i),br:l({x:s,y:o},i)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),r=this.matrixCache||(this.matrixCache={});return r.key===i?r.value:(this.group&&(e=a(this.group.calcTransformMatrix(!1),e)),r.key=i,r.value=e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=t,e.value=h.composeMatrix(r),e.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,r,s,o=0===t&&0===e;if(this.strokeUniform?(r=this.width,s=this.height):(r=(i=this._getNonTransformedDimensions()).x,s=i.y),o)return this._finalizeDimensions(r*this.scaleX,s*this.scaleY);var u=h.sizeAfterTransform(r,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(u.x,u.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return l(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(a,l){if(l){if(l.toLive)return a+": url(#SVGID_"+l.id+"); ";var t=new fabric.Color(l),e=a+": "+t.toRgb()+"; ",i=t.getAlpha();return 1!==i&&(e+=a+"-opacity: "+i.toString()+"; "),e}return a+": none; "}var n=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(a){var l=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",r=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",u=void 0!==this.opacity?this.opacity:"1",g=this.visible?"":" visibility: hidden;",v=a?"":this.getSvgFilter(),b=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",t,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",r,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",o,"; ",b,"fill-rule: ",l,"; ","opacity: ",u,";",v,g].join("")},getSvgSpanStyles:function(a,l){var t="; ",e=a.fontFamily?"font-family: "+(-1===a.fontFamily.indexOf("'")&&-1===a.fontFamily.indexOf('"')?"'"+a.fontFamily+"'":a.fontFamily)+t:"",i=a.strokeWidth?"stroke-width: "+a.strokeWidth+t:"",r=a.fontSize?"font-size: "+a.fontSize+"px"+t:"",s=a.fontStyle?"font-style: "+a.fontStyle+t:"",o=a.fontWeight?"font-weight: "+a.fontWeight+t:"",u=a.fill?h("fill",a.fill):"",g=a.stroke?h("stroke",a.stroke):"",v=this.getSvgTextDecoration(a);return v&&(v="text-decoration: "+v+t),[g,i,e,r,s,o,v,u,a.deltaY?"baseline-shift: "+-a.deltaY+"; ":"",l?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(a){return["overline","underline","line-through"].filter(function(l){return a[l.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(a,l){var t=a?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+fabric.util.matrixToSVG(t)+(l||"")+'" '},_setSVGBg:function(a){if(this.backgroundColor){var l=fabric.Object.NUM_FRACTION_DIGITS;a.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,l),'" y="',n(-this.height/2,l),'" width="',n(this.width,l),'" height="',n(this.height,l),'"></rect>\n')}},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(a),{reviver:a})},toClipPathSVG:function(a){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(a),{reviver:a})},_createBaseClipPathSVGMarkup:function(a,l){var t=(l=l||{}).reviver,i=[this.getSvgTransform(!0,l.additionalTransform||""),this.getSvgCommons()].join(""),r=a.indexOf("COMMON_PARTS");return a[r]=i,t?t(a.join("")):a.join("")},_createBaseSVGMarkup:function(a,l){var t,e,i=(l=l||{}).noStyle,r=l.reviver,s=i?"":'style="'+this.getSvgStyles()+'" ',o=l.withShadow?'style="'+this.getSvgFilter()+'" ':"",u=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=u&&u.absolutePositioned,b=this.stroke,_=this.fill,S=this.shadow,E=[],M=a.indexOf("COMMON_PARTS"),F=l.additionalTransform;return u&&(u.clipPathId="CLIPPATH_"+fabric.Object.__uid++,e='<clipPath id="'+u.clipPathId+'" >\n'+u.toClipPathSVG(r)+"</clipPath>\n"),v&&E.push("<g ",o,this.getSvgCommons()," >\n"),E.push("<g ",this.getSvgTransform(!1),v?"":o+this.getSvgCommons()," >\n"),t=[s,g,i?"":this.addPaintOrder()," ",F?'transform="'+F+'" ':""].join(""),a[M]=t,_&&_.toLive&&E.push(_.toSVG(this)),b&&b.toLive&&E.push(b.toSVG(this)),S&&E.push(S.toSVG(this)),u&&E.push(e),E.push(a.join("")),E.push("</g>\n"),v&&E.push("</g>\n"),r?r(E.join("")):E.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=fabric.util.object.extend,n="stateProperties";function a(l,t,e){var i={};e.forEach(function(r){i[r]=l[r]}),h(l[t],i,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(l){var t="_"+(l=l||n);return Object.keys(this[t]).length<this[l].length||!function e(i,r,s){if(i===r)return!0;if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(var o=0,u=i.length;o<u;o++)if(!e(i[o],r[o]))return!1;return!0}if(i&&"object"==typeof i){var g,v=Object.keys(i);if(!r||"object"!=typeof r||!s&&v.length!==Object.keys(r).length)return!1;for(o=0,u=v.length;o<u;o++)if("canvas"!==(g=v[o])&&"group"!==g&&!e(i[g],r[g]))return!1;return!0}}(this[t],this,!0)},saveState:function(l){var t=l&&l.propertySet||n,e="_"+t;return this[e]?(a(this,e,this[t]),l&&l.stateProperties&&a(this,e,l.stateProperties),this):this.setupState(l)},setupState:function(l){var t=(l=l||{}).propertySet||n;return this["_"+(l.propertySet=t)]={},this.saveState(l),this}})}(),function(){var h=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(n,a){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var l,t,e,i=n.x,r=n.y,s=Object.keys(this.oCoords),o=s.length-1;for(this.__corner=0;0<=o;o--)if(this.isControlVisible(e=s[o])&&(t=this._getImageLines(a?this.oCoords[e].touchCorner:this.oCoords[e].corner),0!==(l=this._findCrossPoints({x:i,y:r},t))&&l%2==1))return this.__corner=e;return!1},forEachControl:function(n){for(var a in this.controls)n(this.controls[a],a,this)},_setCornerCoords:function(){var n=this.oCoords;for(var a in n){var l=this.controls[a];n[a].corner=l.calcCornerCoords(this.angle,this.cornerSize,n[a].x,n[a].y,!1),n[a].touchCorner=l.calcCornerCoords(this.angle,this.touchCornerSize,n[a].x,n[a].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var a=this.getCenterPoint(),l=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return n.translate(a.x,a.y),n.scale(1/t[0],1/t[3]),n.rotate(h(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-l.x/2,-l.y/2,l.x,l.y),n.restore(),this},drawBorders:function(n,a){a=a||{};var l=this._calculateCurrentDimensions(),t=this.borderScaleFactor,e=l.x+t,i=l.y+t,r=void 0!==a.hasControls?a.hasControls:this.hasControls,s=!1;return n.save(),n.strokeStyle=a.borderColor||this.borderColor,this._setLineDash(n,a.borderDashArray||this.borderDashArray),n.strokeRect(-e/2,-i/2,e,i),r&&(n.beginPath(),this.forEachControl(function(o,u,g){o.withConnection&&o.getVisibility(g,u)&&(s=!0,n.moveTo(o.x*e,o.y*i),n.lineTo(o.x*e+o.offsetX,o.y*i+o.offsetY))}),s&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,a,l){l=l||{};var t=fabric.util.sizeAfterTransform(this.width,this.height,a),e=this.strokeWidth,i=this.strokeUniform,r=this.borderScaleFactor,s=t.x+e*(i?this.canvas.getZoom():a.scaleX)+r,o=t.y+e*(i?this.canvas.getZoom():a.scaleY)+r;return n.save(),this._setLineDash(n,l.borderDashArray||this.borderDashArray),n.strokeStyle=l.borderColor||this.borderColor,n.strokeRect(-s/2,-o/2,s,o),n.restore(),this},drawControls:function(n,a){a=a||{},n.save();var l,t,e=this.canvas.getRetinaScaling();return n.setTransform(e,0,0,e,0,0),n.strokeStyle=n.fillStyle=a.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=a.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,a.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(i,r,s){t=s.oCoords[r],i.getVisibility(s,r)&&(l&&(t=fabric.util.transformPoint(t,l)),i.render(n,t.x,t.y,a,s))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,a){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=a,this},setControlsVisibility:function(n){for(var a in n||(n={}),n)this.setControlVisible(a,n[a]);return this},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){h.set("left",i),e.requestRenderAll(),t()},onComplete:function(){h.setCoords(),l()}})},fxCenterObjectV:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){h.set("top",i),e.requestRenderAll(),t()},onComplete:function(){h.setCoords(),l()}})},fxRemove:function(h,n){var a=function(){},l=(n=n||{}).onComplete||a,t=n.onChange||a,e=this;return fabric.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){h.set("opacity",i),e.requestRenderAll(),t()},onComplete:function(){e.remove(h),l()}})}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var h,a=[],l=[];for(h in arguments[0])a.push(h);for(var t=0,e=a.length;t<e;t++)l.push(this._animate(h=a[t],arguments[0][h],arguments[1],t!==e-1));return l}return this._animate.apply(this,arguments)},_animate:function(h,n,a,l){var t,e=this;n=n.toString(),a=a?fabric.util.object.clone(a):{},~h.indexOf(".")&&(t=h.split("."));var i=-1<e.colorProperties.indexOf(h)||t&&-1<e.colorProperties.indexOf(t[1]),r=t?this.get(t[0])[t[1]]:this.get(h);"from"in a||(a.from=r),i||(n=~n.indexOf("=")?r+parseFloat(n.replace("=","")):parseFloat(n));var s={target:this,startValue:a.from,endValue:n,byValue:a.by,easing:a.easing,duration:a.duration,abort:a.abort&&function(o,u,g){return a.abort.call(e,o,u,g)},onChange:function(o,u,g){t?e[t[0]][t[1]]=o:e.set(h,o),l||a.onChange&&a.onChange(o,u,g)},onComplete:function(o,u,g){l||(e.setCoords(),a.onComplete&&a.onComplete(o,u,g))}};return i?fabric.util.animateColor(s.startValue,s.endValue,s.duration,s):fabric.util.animate(s)}}),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};function e(i,r){var s=i.origin,o=i.axis1,u=i.axis2,g=i.dimension,v=r.nearest,b=r.center,_=r.farthest;return function(){switch(this.get(s)){case v:return Math.min(this.get(o),this.get(u));case b:return Math.min(this.get(o),this.get(u))+.5*this.get(g);case _:return Math.max(this.get(o),this.get(u))}}}n.Line?n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,r){i||(i=[0,0,0,0]),this.callSuper("initialize",r),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(r)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,r){return this.callSuper("_set",i,r),void 0!==t[i]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var r=this.calcLinePoints();i.moveTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineWidth=this.strokeWidth;var s=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=s},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return a(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(i.y-=this.strokeWidth),0===this.height&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,r=this.y1<=this.y2?-1:1;return{x1:i*this.width*.5,x2:i*this.width*-.5,y1:r*this.height*.5,y2:r*this.height*-.5}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" />\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(i,r,s){s=s||{};var o=n.parseAttributes(i,n.Line.ATTRIBUTE_NAMES);r(new n.Line([o.x1||0,o.y1||0,o.x2||0,o.y2||0],a(o,s)))},n.Line.fromObject=function(i,r){var s=l(i,!0);s.points=[i.x1,i.y1,i.x2,i.y2],n.Object._fromObject("Line",s,function(o){delete o.points,r&&r(o)},"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.degreesToRadians;n.Circle?n.warn("fabric.Circle is already defined."):(n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,t){return this.callSuper("_set",l,t),"radius"===l&&this.setRadius(t),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,t=(this.endAngle-this.startAngle)%360;if(0===t)l=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var e=a(this.startAngle),i=a(this.endAngle),r=this.radius;l=['<path d="M '+n.util.cos(e)*r+" "+n.util.sin(e)*r," A "+r+" "+r," 0 ",+(180<t?"1":"0")+" 1"," "+n.util.cos(i)*r+" "+n.util.sin(i)*r,'" ',"COMMON_PARTS"," />\n"]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,a(this.startAngle),a(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",2*l).set("height",2*l)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(l,t){var e,i=n.parseAttributes(l,n.Circle.ATTRIBUTE_NAMES);if(!("radius"in(e=i)&&0<=e.radius))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,t(new n.Circle(i))},n.Circle.fromObject=function(l,t){n.Object._fromObject("Circle",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Triangle?n.warn("fabric.Triangle is already defined"):(n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(a){var l=this.width/2,t=this.height/2;a.beginPath(),a.moveTo(-l,t),a.lineTo(0,-t),a.lineTo(l,t),a.closePath(),this._renderPaintInOrder(a)},_toSVG:function(){var a=this.width/2,l=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-a+" "+l,"0 "+-l,a+" "+l].join(","),'" />']}}),n.Triangle.fromObject=function(a,l){return n.Object._fromObject("Triangle",a,l)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=2*Math.PI;n.Ellipse?n.warn("fabric.Ellipse is already defined."):(n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this.set("rx",l&&l.rx||0),this.set("ry",l&&l.ry||0)},_set:function(l,t){switch(this.callSuper("_set",l,t),l){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(l){l.beginPath(),l.save(),l.transform(1,0,0,this.ry/this.rx,0,0),l.arc(0,0,this.rx,0,a,!1),l.restore(),this._renderPaintInOrder(l)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(l,t){var e=n.parseAttributes(l,n.Ellipse.ATTRIBUTE_NAMES);e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,t(new n.Ellipse(e))},n.Ellipse.fromObject=function(l,t){n.Object._fromObject("Ellipse",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend;n.Rect?n.warn("fabric.Rect is already defined"):(n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(l){var t=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,s=-this.width/2,o=-this.height/2,u=0!==t||0!==e,g=.4477152502;l.beginPath(),l.moveTo(s+t,o),l.lineTo(s+i-t,o),u&&l.bezierCurveTo(s+i-g*t,o,s+i,o+g*e,s+i,o+e),l.lineTo(s+i,o+r-e),u&&l.bezierCurveTo(s+i,o+r-g*e,s+i-g*t,o+r,s+i-t,o+r),l.lineTo(s+t,o+r),u&&l.bezierCurveTo(s+g*t,o+r,s,o+r-g*e,s,o+r-e),l.lineTo(s,o+e),u&&l.bezierCurveTo(s,o+g*e,s+g*t,o,s+t,o),l.closePath(),this._renderPaintInOrder(l)},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(l,t,e){if(!l)return t(null);e=e||{};var i=n.parseAttributes(l,n.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var r=new n.Rect(a(e?n.util.object.clone(e):{},i));r.visible=r.visible&&0<r.width&&0<r.height,t(r)},n.Rect.fromObject=function(l,t){return n.Object._fromObject("Rect",l,t)})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.util.array.min,t=n.util.array.max,e=n.util.toFixed,i=n.util.projectStrokeOnPoints;n.Polyline?n.warn("fabric.Polyline is already defined"):(n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(r,s){s=s||{},this.points=r||[],this.callSuper("initialize",s),this._setPositionDimensions(s)},_projectStrokeOnPoints:function(){return i(this.points,this,!0)},_setPositionDimensions:function(r){var s,o=this._calcDimensions(r),u=this.exactBoundingBox?this.strokeWidth:0;this.width=o.width-u,this.height=o.height-u,r.fromSVG||(s=this.translateToGivenOrigin({x:o.left-this.strokeWidth/2+u/2,y:o.top-this.strokeWidth/2+u/2},"left","top",this.originX,this.originY)),void 0===r.left&&(this.left=r.fromSVG?o.left:s.x),void 0===r.top&&(this.top=r.fromSVG?o.top:s.y),this.pathOffset={x:o.left+this.width/2+u/2,y:o.top+this.height/2+u/2}},_calcDimensions:function(){var r=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,s=l(r,"x")||0,o=l(r,"y")||0;return{left:s,top:o,width:(t(r,"x")||0)-s,height:(t(r,"y")||0)-o}},toObject:function(r){return a(this.callSuper("toObject",r),{points:this.points.concat()})},_toSVG:function(){for(var r=[],s=this.pathOffset.x,o=this.pathOffset.y,u=n.Object.NUM_FRACTION_DIGITS,g=0,v=this.points.length;g<v;g++)r.push(e(this.points[g].x-s,u),",",e(this.points[g].y-o,u)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',r.join(""),'" />\n']},commonRender:function(r){var s,o=this.points.length,u=this.pathOffset.x,g=this.pathOffset.y;if(!o||isNaN(this.points[o-1].y))return!1;r.beginPath(),r.moveTo(this.points[0].x-u,this.points[0].y-g);for(var v=0;v<o;v++)r.lineTo((s=this.points[v]).x-u,s.y-g);return!0},_render:function(r){this.commonRender(r)&&this._renderPaintInOrder(r)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(r){return function(s,o,u){if(!s)return o(null);u||(u={});var g=n.parsePointsAttribute(s.getAttribute("points")),v=n.parseAttributes(s,n[r].ATTRIBUTE_NAMES);v.fromSVG=!0,o(new n[r](g,a(v,u)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(r,s){return n.Object._fromObject("Polyline",r,s,"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.projectStrokeOnPoints;n.Polygon?n.warn("fabric.Polygon is already defined"):(n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return a(this.points,this)},_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(l,t){n.Object._fromObject("Polygon",l,t,"points")})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.array.min,l=n.util.array.max,t=n.util.object.extend,e=n.util.object.clone,i=n.util.toFixed;n.Path?n.warn("fabric.Path is already defined"):(n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(r,s){delete(s=e(s||{})).path,this.callSuper("initialize",s),this._setPath(r||[],s)},_setPath:function(r,s){this.path=n.util.makePathSimpler(Array.isArray(r)?r:n.util.parsePath(r)),n.Polyline.prototype._setPositionDimensions.call(this,s||{})},_renderPathCommands:function(r){var s,o=0,u=0,g=0,v=0,S=-this.pathOffset.x,E=-this.pathOffset.y;r.beginPath();for(var M=0,F=this.path.length;M<F;++M)switch((s=this.path[M])[0]){case"L":r.lineTo((g=s[1])+S,(v=s[2])+E);break;case"M":o=g=s[1],u=v=s[2],r.moveTo(g+S,v+E);break;case"C":r.bezierCurveTo(s[1]+S,s[2]+E,s[3]+S,s[4]+E,(g=s[5])+S,(v=s[6])+E);break;case"Q":r.quadraticCurveTo(s[1]+S,s[2]+E,s[3]+S,s[4]+E),g=s[3],v=s[4];break;case"z":case"Z":g=o,v=u,r.closePath()}},_render:function(r){this._renderPathCommands(r),this._renderPaintInOrder(r)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(r){return t(this.callSuper("toObject",r),{path:this.path.map(function(s){return s.slice()})})},toDatalessObject:function(r){var s=this.toObject(["sourcePath"].concat(r));return s.sourcePath&&delete s.path,s},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',n.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var r=n.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,r)+", "+i(-this.pathOffset.y,r)+")"},toClipPathSVG:function(r){var s=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:r,additionalTransform:s})},toSVG:function(r){var s=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:r,additionalTransform:s})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var r,s,o=[],u=[],g=0,v=0,b=0,_=0,S=0,E=this.path.length;S<E;++S){switch((r=this.path[S])[0]){case"L":b=r[1],_=r[2],s=[];break;case"M":g=b=r[1],v=_=r[2],s=[];break;case"C":s=n.util.getBoundsOfCurve(b,_,r[1],r[2],r[3],r[4],r[5],r[6]),b=r[5],_=r[6];break;case"Q":s=n.util.getBoundsOfCurve(b,_,r[1],r[2],r[1],r[2],r[3],r[4]),b=r[3],_=r[4];break;case"z":case"Z":b=g,_=v}s.forEach(function(G){o.push(G.x),u.push(G.y)}),o.push(b),u.push(_)}var M=a(o)||0,F=a(u)||0;return{left:M,top:F,width:(l(o)||0)-M,height:(l(u)||0)-F}}}),n.Path.fromObject=function(r,s){"string"==typeof r.sourcePath?n.loadSVGFromURL(r.sourcePath,function(u){var g=u[0];g.setOptions(r),r.clipPath?n.util.enlivenObjects([r.clipPath],function(v){g.clipPath=v[0],s&&s(g)}):s&&s(g)}):n.Object._fromObject("Path",r,s,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(r,s,o){var u=n.parseAttributes(r,n.Path.ATTRIBUTE_NAMES);u.fromSVG=!0,s(new n.Path(u.d,t(u,o)))})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.array.min,l=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;if(i)this._updateObjectsACoords();else{var s=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),s||this._calcBounds(),this._updateObjectsCoords(s),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){t.set({left:t.left-e.x,top:t.top-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),t&&(e&&n.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if("canvas"===t)for(;i--;)this._objects[i]._set(t,e);n.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,i=this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){var o=s.includeDefaultValues;s.includeDefaultValues=e;var u=s.toObject(t);return s.includeDefaultValues=o,u}),r=n.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var e,i=this.sourcePath;if(i)e=i;else{var r=this.includeDefaultValues;e=this._objects.map(function(o){var u=o.includeDefaultValues;o.includeDefaultValues=r;var g=o.toDatalessObject(t);return o.includeDefaultValues=u,g})}var s=n.Object.prototype.toDatalessObject.call(this,t);return s.objects=e,s},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=n.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var r=this.cacheWidth/this.zoomX,s=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-s/2,r,s)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(e){n.util.addTransformToObject(e,t),delete e.group,e.setCoords()}),this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new n.ActiveSelection([]);return r.set(i),r.type="activeSelection",e.remove(this),t.forEach(function(s){s.group=r,s.dirty=!0,e.add(s)}),r.canvas=e,r._objects=t,(e._activeObject=r).setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,i,r,s,o=[],u=[],g=["tr","br","bl","tl"],v=0,b=this._objects.length,_=g.length;v<b;++v){for(r=(e=this._objects[v]).calcACoords(),s=0;s<_;s++)o.push(r[i=g[s]].x),u.push(r[i].y);e.aCoords=r}this._getBounds(o,u,t)},_getBounds:function(t,e,i){var r=new n.Point(a(t),a(e)),s=new n.Point(l(t),l(e)),o=r.y||0,u=r.x||0,v=s.y-r.y||0;this.width=s.x-r.x||0,this.height=v,i||this.setPositionByOrigin({x:u,y:o},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,r=this._objects.length;i<r;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var e=this.visible?"":" visibility: hidden;";return[void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,r=this._objects.length;i<r;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),n.Group.fromObject=function(t,e){var i=t.objects,r=n.util.object.clone(t,!0);delete r.objects,"string"!=typeof i?n.util.enlivenObjects(i,function(s){n.util.enlivenObjectEnlivables(t,r,function(){e&&e(new n.Group(s,r,!0))})}):n.loadSVGFromURL(i,function(s){var o=n.util.groupSVGElements(s,t,i),u=r.clipPath;delete r.clipPath,o.set(r),u?n.util.enlivenObjects([u],function(g){o.clipPath=g[0],e&&e(o)}):e&&e(o)})})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(a,l){l=l||{},this._objects=a||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;l.originX&&(this.originX=l.originX),l.originY&&(this.originY=l.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,l),this.setCoords()},toGroup:function(){var a=this._objects.concat();this._objects=[];var l=n.Object.prototype.toObject.call(this),t=new n.Group([]);if(delete l.type,t.set(l),a.forEach(function(i){i.canvas.remove(i),i.group=t}),t._objects=a,!this.canvas)return t;var e=this.canvas;return e.add(t),(e._activeObject=t).setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(a,l,t){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",a,l),void 0===(t=t||{}).hasControls&&(t.hasControls=!1),t.forActiveSelection=!0;for(var e=0,i=this._objects.length;e<i;e++)this._objects[e]._renderControls(a,t);a.restore()}}),n.ActiveSelection.fromObject=function(a,l){n.util.enlivenObjects(a.objects,function(t){delete a.objects,l&&l(new n.ActiveSelection(t,a,!0))})})}(typeof exports<"u"?exports:this),function(h){"use strict";var n=fabric.util.object.extend;h.fabric||(h.fabric={}),h.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:fabric.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(a,l){l||(l={}),this.filters=[],this.cacheKey="texture"+fabric.Object.__uid++,this.callSuper("initialize",l),this._initElement(a,l)},getElement:function(){return this._element||{}},setElement:function(a,l){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=a,this._originalElement=a,this._initConfig(l),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(a){var l=fabric.filterBackend;l&&l.evictCachesForKey&&l.evictCachesForKey(a)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(a){fabric.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var a=this.getElement();return{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}},_stroke:function(a){if(this.stroke&&0!==this.strokeWidth){var l=this.width/2,t=this.height/2;a.beginPath(),a.moveTo(-l,-t),a.lineTo(l,-t),a.lineTo(l,t),a.lineTo(-l,t),a.lineTo(-l,-t),a.closePath()}},toObject:function(a){var l=[];this.filters.forEach(function(e){e&&l.push(e.toObject())});var t=n(this.callSuper("toObject",["cropX","cropY"].concat(a)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:l});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a,l=[],t=[],e=this._element,i=-this.width/2,r=-this.height/2,s="",o="";if(!e)return[];if(this.hasCrop()){var u=fabric.Object.__uid++;l.push('<clipPath id="imageCrop_'+u+'">\n','\t<rect x="'+i+'" y="'+r+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),t.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',r-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.height,o,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var g=this.fill;this.fill=null,a=["\t<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=g}return"fill"!==this.paintFirst?l.concat(a,t):l.concat(t,a)},getSrc:function(a){var l=a?this._element:this._originalElement;return l?l.toDataURL?l.toDataURL():this.srcFromAttribute?l.getAttribute("src"):l.src:this.src||""},setSrc:function(a,l,t){return fabric.util.loadImage(a,function(e,i){this.setElement(e,t),this._setWidthHeight(),l&&l(this,i)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var a=this.resizeFilter,l=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),e=t.scaleX,i=t.scaleY,r=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!a||l<e&&l<i)return this._element=r,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=e,void(this._lastScaleY=i);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var s=fabric.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,u=r.width,g=r.height;s.width=u,s.height=g,this._element=s,this._lastScaleX=a.scaleX=e,this._lastScaleY=a.scaleY=i,fabric.filterBackend.applyFilters([a],r,u,g,this._element,o),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(a){if(a=(a=a||this.filters||[]).filter(function(r){return r&&!r.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===a.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var l=this._originalElement,t=l.naturalWidth||l.width,e=l.naturalHeight||l.height;if(this._element===this._originalElement){var i=fabric.util.createCanvasElement();i.width=t,i.height=e,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,e),this._lastScaleX=1,this._lastScaleY=1;return fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(a,this._originalElement,t,e,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(a){fabric.util.setImageSmoothing(a,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(a),this._renderPaintInOrder(a)},drawCacheOnCanvas:function(a){fabric.util.setImageSmoothing(a,this.imageSmoothing),fabric.Object.prototype.drawCacheOnCanvas.call(this,a)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(a){var l=this._element;if(l){var t=this._filterScalingX,e=this._filterScalingY,i=this.width,r=this.height,s=Math.min,o=Math.max,u=o(this.cropX,0),g=o(this.cropY,0),v=l.naturalWidth||l.width,b=l.naturalHeight||l.height,_=u*t,S=g*e,E=s(i*t,v-_),M=s(r*e,b-S),F=-i/2,G=-r/2,q=s(i,v/t-u),k=s(r,b/e-g);l&&a.drawImage(l,_,S,E,M,F,G,q,k)}},_needsResize:function(){var a=this.getTotalObjectScaling();return a.scaleX!==this._lastScaleX||a.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(a,l){this.setElement(fabric.util.getById(a),l),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a)},_initFilters:function(a,l){a&&a.length?fabric.util.enlivenObjects(a,function(t){l&&l(t)},"fabric.Image.filters"):l&&l()},_setWidthHeight:function(a){a||(a={});var l=this.getElement();this.width=a.width||l.naturalWidth||l.width||0,this.height=a.height||l.naturalHeight||l.height||0},parsePreserveAspectRatioAttribute:function(){var a,l=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),t=this._element.width,e=this._element.height,i=1,r=1,s=0,o=0,u=0,g=0,v=this.width,b=this.height,_={width:v,height:b};return!l||"none"===l.alignX&&"none"===l.alignY?(i=v/t,r=b/e):("meet"===l.meetOrSlice&&(a=(v-t*(i=r=fabric.util.findScaleToFit(this._element,_)))/2,"Min"===l.alignX&&(s=-a),"Max"===l.alignX&&(s=a),a=(b-e*r)/2,"Min"===l.alignY&&(o=-a),"Max"===l.alignY&&(o=a)),"slice"===l.meetOrSlice&&(a=t-v/(i=r=fabric.util.findScaleToCover(this._element,_)),"Mid"===l.alignX&&(u=a/2),"Max"===l.alignX&&(u=a),a=e-b/r,"Mid"===l.alignY&&(g=a/2),"Max"===l.alignY&&(g=a),t=v/i,e=b/r)),{width:t,height:e,scaleX:i,scaleY:r,offsetLeft:s,offsetTop:o,cropX:u,cropY:g}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(a,l){var t=fabric.util.object.clone(a);fabric.util.loadImage(t.src,function(e,i){i?l&&l(null,!0):fabric.Image.prototype._initFilters.call(t,t.filters,function(r){t.filters=r||[],fabric.Image.prototype._initFilters.call(t,[t.resizeFilter],function(s){t.resizeFilter=s[0],fabric.util.enlivenObjectEnlivables(t,t,function(){var o=new fabric.Image(e,t);l(o,!1)})})})},null,t.crossOrigin)},fabric.Image.fromURL=function(a,l,t){fabric.util.loadImage(a,function(e,i){l&&l(new fabric.Image(e,t),i)},null,t&&t.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),fabric.Image.fromElement=function(a,l,t){var e=fabric.parseAttributes(a,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(e["xlink:href"],l,n(t?fabric.util.object.clone(t):{},e))})}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return 0<h?90*Math.round((h-1)/90):90*Math.round(h/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){var n=function(){},a=(h=h||{}).onComplete||n,l=h.onChange||n,t=this;return fabric.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){t.rotate(e),l()},onComplete:function(){t.setCoords(),a()}})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";fabric.isWebglSupported=function(n){if(fabric.isLikelyNode)return!1;n=n||fabric.WebglFilterBackend.prototype.tileSize;var a,l,t,e=document.createElement("canvas"),i=e.getContext("webgl")||e.getContext("experimental-webgl"),r=!1;if(i){fabric.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),r=fabric.maxTextureSize>=n;for(var s=["highp","mediump","lowp"],o=0;o<3;o++)if(l="precision "+s[o]+" float;\nvoid main(){}",t=(a=i).createShader(a.FRAGMENT_SHADER),a.shaderSource(t,l),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS)){fabric.webGlPrecision=s[o];break}}return this.isSupported=r},(fabric.WebglFilterBackend=function h(n){n&&n.tileSize&&(this.tileSize=n.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}).prototype={tileSize:2048,resources:{},setupGLContext:function(n,a){this.dispose(),this.createWebGLCanvas(n,a),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(n,a)},chooseFastestCopyGLTo2DMethod:function(n,a){var l,t=void 0!==window.performance;try{new ImageData(1,1),l=!0}catch{l=!1}var e=typeof ArrayBuffer<"u",i=typeof Uint8ClampedArray<"u";if(t&&l&&e&&i){var r=fabric.util.createCanvasElement(),s=new ArrayBuffer(n*a*4);if(fabric.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=copyGLTo2DPutImageData);var o,u,g={imageBuffer:s,destinationWidth:n,destinationHeight:a,targetCanvas:r};r.width=n,r.height=a,o=window.performance.now(),copyGLTo2DDrawImage.call(g,this.gl,g),u=window.performance.now()-o,o=window.performance.now(),copyGLTo2DPutImageData.call(g,this.gl,g),window.performance.now()-o<u?(this.imageBuffer=s,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(n,a){var l=fabric.util.createCanvasElement();l.width=n,l.height=a;var t={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=l.getContext("webgl",t);e||(e=l.getContext("experimental-webgl",t)),e&&(e.clearColor(0,0,0,0),this.canvas=l,this.gl=e)},applyFilters:function(n,a,l,t,e,i){var r,s=this.gl;i&&(r=this.getCachedTexture(i,a));var o={originalWidth:a.width||a.originalWidth,originalHeight:a.height||a.originalHeight,sourceWidth:l,sourceHeight:t,destinationWidth:l,destinationHeight:t,context:s,sourceTexture:this.createTexture(s,l,t,!r&&a),targetTexture:this.createTexture(s,l,t),originalTexture:r||this.createTexture(s,l,t,!r&&a),passes:n.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},u=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,u),n.forEach(function(g){g&&g.applyTo(o)}),resizeCanvasIfNeeded(o),this.copyGLTo2D(s,o),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(o.sourceTexture),s.deleteTexture(o.targetTexture),s.deleteFramebuffer(u),e.getContext("2d").setTransform(1,0,0,1,0,0),o},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(n,a,l,t,e){var i=n.createTexture();return n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e||n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e||n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),t?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,a,l,0,n.RGBA,n.UNSIGNED_BYTE,null),i},getCachedTexture:function(n,a){if(this.textureCache[n])return this.textureCache[n];var l=this.createTexture(this.gl,a.width,a.height,a);return this.textureCache[n]=l},evictCachesForKey:function(n){this.textureCache[n]&&(this.gl.deleteTexture(this.textureCache[n]),delete this.textureCache[n])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var n=this.gl,a={renderer:"",vendor:""};if(!n)return a;var l=n.getExtension("WEBGL_debug_renderer_info");if(l){var t=n.getParameter(l.UNMASKED_RENDERER_WEBGL),e=n.getParameter(l.UNMASKED_VENDOR_WEBGL);t&&(a.renderer=t.toLowerCase()),e&&(a.vendor=e.toLowerCase())}return this.gpuInfo=a}}}(),function(){"use strict";var h=function(){};(fabric.Canvas2dFilterBackend=function n(){}).prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(a,l,t,e,i){var r=i.getContext("2d");r.drawImage(l,0,0,t,e);var s={sourceWidth:t,sourceHeight:e,imageData:r.getImageData(0,0,t,e),originalEl:l,originalImageData:r.getImageData(0,0,t,e),canvasEl:i,ctx:r,filterBackend:this};return a.forEach(function(o){o.applyTo(s)}),s.imageData.width===t&&s.imageData.height===e||(i.width=s.imageData.width,i.height=s.imageData.height),r.putImageData(s.imageData,0,0),s}}}(),fabric.Image=fabric.Image||{},fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var n in h)this[n]=h[n]},createProgram:function(h,n,a){n=n||this.fragmentSource,a=a||this.vertexSource,"highp"!==fabric.webGlPrecision&&(n=n.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var l=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(l,a),h.compileShader(l),!h.getShaderParameter(l,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(l));var t=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(t,n),h.compileShader(t),!h.getShaderParameter(t,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(t));var e=h.createProgram();if(h.attachShader(e,l),h.attachShader(e,t),h.linkProgram(e),!h.getProgramParameter(e,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(e));var i=this.getAttributeLocations(h,e),r=this.getUniformLocations(h,e)||{};return r.uStepW=h.getUniformLocation(e,"uStepW"),r.uStepH=h.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:i,uniformLocations:r}},getAttributeLocations:function(h,n){return{aPosition:h.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,n,a){var l=n.aPosition,t=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,t),h.enableVertexAttribArray(l),h.vertexAttribPointer(l,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,a,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var n,a,l=h.context;1<h.passes?(a=h.destinationHeight,h.sourceWidth===(n=h.destinationWidth)&&h.sourceHeight===a||(l.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(l,n,a)),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,h.targetTexture,0)):(l.bindFramebuffer(l.FRAMEBUFFER,null),l.finish())},_swapTextures:function(h){h.passes--,h.pass++;var n=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=n},isNeutralState:function(){var h=this.mainParameter,n=fabric.Image.filters[this.type].prototype;if(h){if(Array.isArray(n[h])){for(var a=n[h].length;a--;)if(this[h][a]!==n[h][a])return!1;return!0}return n[h]===this[h]}return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var n=h.context,a=this.retrieveShader(h);n.bindTexture(n.TEXTURE_2D,0===h.pass&&h.originalTexture?h.originalTexture:h.sourceTexture),n.useProgram(a.program),this.sendAttributeData(n,a.attributeLocations,h.aPosition),n.uniform1f(a.uniformLocations.uStepW,1/h.sourceWidth),n.uniform1f(a.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(n,a.uniformLocations),n.viewport(0,0,h.destinationWidth,h.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,n,a){h.activeTexture(a),h.bindTexture(h.TEXTURE_2D,n),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,n){h.activeTexture(n),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var n=document.createElement("canvas");n.width=h.sourceWidth,n.height=h.sourceHeight,h.helpLayer=n}},toObject:function(){var h={type:this.type},n=this.mainParameter;return n&&(h[n]=this[n]),h},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(h,n){var a=new fabric.Image.filters[h.type](h);return n&&n(a),a},function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.ColorMatrix=(0,n.util.createClass)(a.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,r,s,o,u=t.imageData.data,g=u.length,v=this.matrix,b=this.colorsOnly;for(o=0;o<g;o+=4)e=u[o],i=u[o+1],r=u[o+2],b?(u[o]=e*v[0]+i*v[1]+r*v[2]+255*v[4],u[o+1]=e*v[5]+i*v[6]+r*v[7]+255*v[9],u[o+2]=e*v[10]+i*v[11]+r*v[12]+255*v[14]):(u[o]=e*v[0]+i*v[1]+r*v[2]+(s=u[o+3])*v[3]+255*v[4],u[o+1]=e*v[5]+i*v[6]+r*v[7]+s*v[8]+255*v[9],u[o+2]=e*v[10]+i*v[11]+r*v[12]+s*v[13]+255*v[14],u[o+3]=e*v[15]+i*v[16]+r*v[17]+s*v[18]+255*v[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,s=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]]),t.uniform4fv(e.uConstants,s)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Brightness=(0,n.util.createClass)(a.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,r=i.length,s=Math.round(255*this.brightness);for(e=0;e<r;e+=4)i[e]=i[e]+s,i[e+1]=i[e+1]+s,i[e+2]=i[e+2]+s}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.Convolute=(0,n.util.createClass)(l.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var i=Math.sqrt(this.matrix.length),r=this.type+"_"+i+"_"+(this.opaque?1:0),s=this.fragmentSource[r];return e.programCache.hasOwnProperty(r)||(e.programCache[r]=this.createProgram(e.context,s)),e.programCache[r]},applyTo2d:function(e){var i,r,s,o,u,g,v,b,_,S,E,M,F,G=e.imageData,q=G.data,k=this.matrix,d=Math.round(Math.sqrt(k.length)),H=Math.floor(d/2),X=G.width,K=G.height,it=e.ctx.createImageData(X,K),B=it.data,P=this.opaque?1:0;for(E=0;E<K;E++)for(S=0;S<X;S++){for(u=4*(E*X+S),F=o=s=r=i=0;F<d;F++)for(M=0;M<d;M++)g=S+M-H,(v=E+F-H)<0||K<=v||g<0||X<=g||(i+=q[b=4*(v*X+g)]*(_=k[F*d+M]),r+=q[b+1]*_,s+=q[b+2]*_,P||(o+=q[b+3]*_));B[u]=i,B[u+1]=r,B[u+2]=s,B[u+3]=P?q[u+3]:o}e.imageData=it},getUniformLocations:function(e,i){return{uMatrix:e.getUniformLocation(i,"uMatrix"),uOpaque:e.getUniformLocation(i,"uOpaque"),uHalfSize:e.getUniformLocation(i,"uHalfSize"),uSize:e.getUniformLocation(i,"uSize")}},sendUniformData:function(e,i){e.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return a(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Grayscale=(0,n.util.createClass)(a.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,r=t.imageData.data,s=r.length,o=this.mode;for(e=0;e<s;e+=4)"average"===o?i=(r[e]+r[e+1]+r[e+2])/3:"lightness"===o?i=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:"luminosity"===o&&(i=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=i,r[e+1]=i,r[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,this.fragmentSource[this.mode])),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Invert=(0,n.util.createClass)(a.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.Noise=(0,n.util.createClass)(l.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var i,r,o,s=e.imageData.data,u=this.noise;for(i=0,o=s.length;i<o;i+=4)r=(.5-Math.random())*u,s[i]+=r,s[i+1]+=r,s[i+2]+=r}},getUniformLocations:function(e,i){return{uNoise:e.getUniformLocation(i,"uNoise"),uSeed:e.getUniformLocation(i,"uSeed")}},sendUniformData:function(e,i){e.uniform1f(i.uNoise,this.noise/255),e.uniform1f(i.uSeed,Math.random())},toObject:function(){return a(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Pixelate=(0,n.util.createClass)(a.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,r,s,o,u,g,v,b,_,S,E=t.imageData,M=E.data,F=E.height,G=E.width;for(i=0;i<F;i+=this.blocksize)for(r=0;r<G;r+=this.blocksize)for(s=M[e=4*i*G+4*r],o=M[e+1],u=M[e+2],g=M[e+3],_=Math.min(i+this.blocksize,F),S=Math.min(r+this.blocksize,G),v=i;v<_;v++)for(b=r;b<S;b++)M[e=4*v*G+4*b]=s,M[e+1]=o,M[e+2]=u,M[e+3]=g},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.extend,l=n.Image.filters;l.RemoveColor=(0,n.util.createClass)(l.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,r,s,o,u=e.imageData.data,g=255*this.distance,v=new n.Color(this.color).getSource(),b=[v[0]-g,v[1]-g,v[2]-g],_=[v[0]+g,v[1]+g,v[2]+g];for(i=0;i<u.length;i+=4)s=u[i+1],o=u[i+2],b[0]<(r=u[i])&&b[1]<s&&b[2]<o&&r<_[0]&&s<_[1]&&o<_[2]&&(u[i+3]=0)},getUniformLocations:function(e,i){return{uLow:e.getUniformLocation(i,"uLow"),uHigh:e.getUniformLocation(i,"uHigh")}},sendUniformData:function(e,i){var r=new n.Color(this.color).getSource(),s=parseFloat(this.distance),u=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(i.uLow,[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1]),e.uniform4fv(i.uHigh,u)},toObject:function(){return a(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters,l=n.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var e in t)a[e]=l(a.ColorMatrix,{type:e,matrix:t[e],mainParameter:!1,colorsOnly:!0}),n.Image.filters[e].fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric,a=n.Image.filters;a.BlendColor=(0,n.util.createClass)(a.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var e,i,r,s,o,u,g,v=t.imageData.data,b=v.length,_=1-this.alpha;e=(g=new n.Color(this.color).getSource())[0]*this.alpha,i=g[1]*this.alpha,r=g[2]*this.alpha;for(var S=0;S<b;S+=4)switch(s=v[S],o=v[S+1],u=v[S+2],this.mode){case"multiply":v[S]=s*e/255,v[S+1]=o*i/255,v[S+2]=u*r/255;break;case"screen":v[S]=255-(255-s)*(255-e)/255,v[S+1]=255-(255-o)*(255-i)/255,v[S+2]=255-(255-u)*(255-r)/255;break;case"add":v[S]=s+e,v[S+1]=o+i,v[S+2]=u+r;break;case"diff":case"difference":v[S]=Math.abs(s-e),v[S+1]=Math.abs(o-i),v[S+2]=Math.abs(u-r);break;case"subtract":v[S]=s-e,v[S+1]=o-i,v[S+2]=u-r;break;case"darken":v[S]=Math.min(s,e),v[S+1]=Math.min(o,i),v[S+2]=Math.min(u,r);break;case"lighten":v[S]=Math.max(s,e),v[S+1]=Math.max(o,i),v[S+2]=Math.max(u,r);break;case"overlay":v[S]=e<128?2*s*e/255:255-2*(255-s)*(255-e)/255,v[S+1]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,v[S+2]=r<128?2*u*r/255:255-2*(255-u)*(255-r)/255;break;case"exclusion":v[S]=e+s-2*e*s/255,v[S+1]=i+o-2*i*o/255,v[S+2]=r+u-2*r*u/255;break;case"tint":v[S]=e+s*_,v[S+1]=i+o*_,v[S+2]=r+u*_}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric,a=n.Image.filters;a.BlendImage=(0,n.util.createClass)(a.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/t._element.width,-t.top/t._element.height,1]},applyTo2d:function(t){var e,i,r,s,o,u,g,v,b,_,S,E=t.imageData,M=t.filterBackend.resources,F=E.data,G=F.length,q=E.width,k=E.height,d=this.image;M.blendImage||(M.blendImage=n.util.createCanvasElement()),_=(b=M.blendImage).getContext("2d"),b.width!==q||b.height!==k?(b.width=q,b.height=k):_.clearRect(0,0,q,k),_.setTransform(d.scaleX,0,0,d.scaleY,d.left,d.top),_.drawImage(d._element,0,0,q,k),S=_.getImageData(0,0,q,k).data;for(var H=0;H<G;H+=4)switch(o=F[H],u=F[H+1],g=F[H+2],v=F[H+3],e=S[H],i=S[H+1],r=S[H+2],s=S[H+3],this.mode){case"multiply":F[H]=o*e/255,F[H+1]=u*i/255,F[H+2]=g*r/255,F[H+3]=v*s/255;break;case"mask":F[H+3]=s}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(t,e){n.Image.fromObject(t.image,function(i){var r=n.util.object.clone(t);r.image=i,e(new n.Image.filters.BlendImage(r))})}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=Math.pow,l=Math.floor,t=Math.sqrt,e=Math.abs,i=Math.round,r=Math.sin,s=Math.ceil,o=n.Image.filters;o.Resize=(0,n.util.createClass)(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(g,v){return{uDelta:g.getUniformLocation(v,"uDelta"),uTaps:g.getUniformLocation(v,"uTaps")}},sendUniformData:function(g,v){g.uniform2fv(v.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),g.uniform1fv(v.uTaps,this.taps)},retrieveShader:function(g){var v=this.getFilterWindow(),b=this.type+"_"+v;if(!g.programCache.hasOwnProperty(b)){var _=this.generateShader(v);g.programCache[b]=this.createProgram(g.context,_)}return g.programCache[b]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var g=this.lanczosCreate(this.lanczosLobes),v=this.tempScale,b=this.getFilterWindow(),_=new Array(b),S=1;S<=b;S++)_[S-1]=g(S*v);return _},generateShader:function(g){for(var v=new Array(g),b=this.fragmentSourceTOP,_=1;_<=g;_++)v[_-1]=_+".0 * uDelta";return b+="uniform float uTaps["+g+"];\n",b+="void main() {\n",b+="  vec4 color = texture2D(uTexture, vTexCoord);\n",b+="  float sum = 1.0;\n",v.forEach(function(S,E){b+="  color += texture2D(uTexture, vTexCoord + "+S+") * uTaps["+E+"];\n",b+="  color += texture2D(uTexture, vTexCoord - "+S+") * uTaps["+E+"];\n",b+="  sum += 2.0 * uTaps["+E+"];\n"}),b+="  gl_FragColor = color / sum;\n",b+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(g){g.webgl?(g.passes++,this.width=g.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=g.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),g.destinationWidth=this.dW,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceWidth=g.destinationWidth,this.height=g.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),g.destinationHeight=this.dH,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceHeight=g.destinationHeight):this.applyTo2d(g)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(g){return function(v){if(g<=v||v<=-g)return 0;if(v<1.1920929e-7&&-1.1920929e-7<v)return 1;var b=(v*=Math.PI)/g;return r(v)/v*r(b)/b}},applyTo2d:function(g){var v=g.imageData,b=this.scaleX,_=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/_;var S,E=v.width,M=v.height,F=i(E*b),G=i(M*_);"sliceHack"===this.resizeType?S=this.sliceByTwo(g,E,M,F,G):"hermite"===this.resizeType?S=this.hermiteFastResize(g,E,M,F,G):"bilinear"===this.resizeType?S=this.bilinearFiltering(g,E,M,F,G):"lanczos"===this.resizeType&&(S=this.lanczosResize(g,E,M,F,G)),g.imageData=S},sliceByTwo:function(g,v,b,_,S){var E,M,F=g.imageData,G=!1,q=!1,k=.5*v,d=.5*b,H=n.filterBackend.resources,X=0,K=0,it=v,B=0;for(H.sliceByTwo||(H.sliceByTwo=document.createElement("canvas")),((E=H.sliceByTwo).width<1.5*v||E.height<b)&&(E.width=1.5*v,E.height=b),(M=E.getContext("2d")).clearRect(0,0,1.5*v,b),M.putImageData(F,0,0),_=l(_),S=l(S);!G||!q;)b=d,_<l(.5*(v=k))?k=l(.5*k):(k=_,G=!0),S<l(.5*d)?d=l(.5*d):(d=S,q=!0),M.drawImage(E,X,K,v,b,it,B,k,d),X=it,K=B,B+=d;return M.getImageData(X,K,_,S)},lanczosResize:function(g,v,b,_,S){var E=g.imageData.data,M=g.ctx.createImageData(_,S),F=M.data,G=this.lanczosCreate(this.lanczosLobes),q=this.rcpScaleX,k=this.rcpScaleY,d=2/this.rcpScaleX,H=2/this.rcpScaleY,X=s(q*this.lanczosLobes/2),K=s(k*this.lanczosLobes/2),it={},B={},P={};return function V(nt){var J,st,ft,ut,dt,yt,U,pt,mt,Dt,jt;for(B.x=(nt+.5)*q,P.x=l(B.x),J=0;J<S;J++){for(B.y=(J+.5)*k,P.y=l(B.y),mt=pt=U=yt=dt=0,st=P.x-X;st<=P.x+X;st++)if(!(st<0||v<=st)){Dt=l(1e3*e(st-B.x)),it[Dt]||(it[Dt]={});for(var Xt=P.y-K;Xt<=P.y+K;Xt++)Xt<0||b<=Xt||(jt=l(1e3*e(Xt-B.y)),it[Dt][jt]||(it[Dt][jt]=G(t(a(Dt*d,2)+a(jt*H,2))/1e3)),0<(ft=it[Dt][jt])&&(dt+=ft,yt+=ft*E[ut=4*(Xt*v+st)],U+=ft*E[ut+1],pt+=ft*E[ut+2],mt+=ft*E[ut+3]))}F[ut=4*(J*_+nt)]=yt/dt,F[ut+1]=U/dt,F[ut+2]=pt/dt,F[ut+3]=mt/dt}return++nt<_?V(nt):M}(0)},bilinearFiltering:function(g,v,b,_,S){var E,M,F,G,q,k,d,X,K=0,it=this.rcpScaleX,B=this.rcpScaleY,P=4*(v-1),V=g.imageData.data,nt=g.ctx.createImageData(_,S),J=nt.data;for(F=0;F<S;F++)for(G=0;G<_;G++)for(q=it*G-(E=l(it*G)),k=B*F-(M=l(B*F)),X=4*(M*v+E),d=0;d<4;d++)J[K++]=V[X+d]*(1-q)*(1-k)+V[X+4+d]*q*(1-k)+V[X+P+d]*k*(1-q)+V[X+P+4+d]*q*k;return nt},hermiteFastResize:function(g,v,b,_,S){for(var E=this.rcpScaleX,M=this.rcpScaleY,F=s(E/2),G=s(M/2),q=g.imageData.data,k=g.ctx.createImageData(_,S),d=k.data,H=0;H<S;H++)for(var X=0;X<_;X++){for(var K=4*(X+H*_),it=0,B=0,P=0,V=0,nt=0,J=0,st=0,ft=(H+.5)*M,ut=l(H*M);ut<(H+1)*M;ut++)for(var dt=e(ft-(ut+.5))/G,yt=(X+.5)*E,U=dt*dt,pt=l(X*E);pt<(X+1)*E;pt++){var mt=e(yt-(pt+.5))/F,Dt=t(U+mt*mt);1<Dt&&Dt<-1||0<(it=2*Dt*Dt*Dt-3*Dt*Dt+1)&&(st+=it*q[3+(mt=4*(pt+ut*v))],P+=it,q[mt+3]<255&&(it=it*q[mt+3]/250),V+=it*q[mt],nt+=it*q[mt+1],J+=it*q[mt+2],B+=it)}d[K]=V/B,d[K+1]=nt/B,d[K+2]=J/B,d[K+3]=st/P}return k},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Contrast=(0,n.util.createClass)(a.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,r=i.length,s=Math.floor(255*this.contrast),o=259*(s+255)/(255*(259-s));for(e=0;e<r;e+=4)i[e]=o*(i[e]-128)+128,i[e+1]=o*(i[e+1]-128)+128,i[e+2]=o*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Saturation=(0,n.util.createClass)(a.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,r=t.imageData.data,s=r.length,o=-this.saturation;for(e=0;e<s;e+=4)i=Math.max(r[e],r[e+1],r[e+2]),r[e]+=i!==r[e]?(i-r[e])*o:0,r[e+1]+=i!==r[e+1]?(i-r[e+1])*o:0,r[e+2]+=i!==r[e+2]?(i-r[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Vibrance=(0,n.util.createClass)(a.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,i,s,o=t.imageData.data,u=o.length,g=-this.vibrance;for(e=0;e<u;e+=4)i=Math.max(o[e],o[e+1],o[e+2]),s=2*Math.abs(i-(o[e]+o[e+1]+o[e+2])/3)/255*g,o[e]+=i!==o[e]?(i-o[e])*s:0,o[e+1]+=i!==o[e+1]?(i-o[e+1])*s:0,o[e+2]+=i!==o[e+2]?(i-o[e+2])*s:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Blur=(0,n.util.createClass)(a.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,r=t.filterBackend.resources,s=t.imageData.width,o=t.imageData.height;r.blurLayer1||(r.blurLayer1=n.util.createCanvasElement(),r.blurLayer2=n.util.createCanvasElement()),i=r.blurLayer2,(e=r.blurLayer1).width===s&&e.height===o||(i.width=e.width=s,i.height=e.height=o);var u,g,v,b,_=e.getContext("2d"),S=i.getContext("2d"),E=.06*this.blur*.5;for(_.putImageData(t.imageData,0,0),S.clearRect(0,0,s,o),b=-15;b<=15;b++)v=E*(g=b/15)*s+(u=(Math.random()-.5)/4),S.globalAlpha=1-Math.abs(g),S.drawImage(e,v,u),_.drawImage(i,0,0),S.globalAlpha=1,S.clearRect(0,0,i.width,i.height);for(b=-15;b<=15;b++)v=E*(g=b/15)*o+(u=(Math.random()-.5)/4),S.globalAlpha=1-Math.abs(g),S.drawImage(e,u,v),_.drawImage(i,0,0),S.globalAlpha=1,S.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);var M=t.ctx.getImageData(0,0,e.width,e.height);return _.globalAlpha=1,_.clearRect(0,0,e.width,e.height),M},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?1<this.aspectRatio&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),a.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Gamma=(0,n.util.createClass)(a.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],a.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,r=this.gamma,s=i.length,o=1/r[0],u=1/r[1],g=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,s=256;e<s;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,u),this.bVals[e]=255*Math.pow(e/255,g);for(e=0,s=i.length;e<s;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.Composed=(0,n.util.createClass)(a.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(t,e){var i=(t.subFilters||[]).map(function(s){return new n.Image.filters[s.type](s)}),r=new n.Image.filters.Composed({subFilters:i});return e&&e(r),r}}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.Image.filters;a.HueRotation=(0,n.util.createClass)(a.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=n.util.cos(t),i=n.util.sin(t),r=Math.sqrt(1/3)*i,s=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+s/3,this.matrix[1]=1/3*s-r,this.matrix[2]=1/3*s+r,this.matrix[5]=1/3*s+r,this.matrix[6]=e+1/3*s,this.matrix[7]=1/3*s-r,this.matrix[10]=1/3*s-r,this.matrix[11]=1/3*s+r,this.matrix[12]=e+1/3*s},isNeutralState:function(t){return this.calculateMatrix(),a.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),a.BaseFilter.prototype.applyTo.call(this,t)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(h){"use strict";var n=h.fabric||(h.fabric={}),a=n.util.object.clone;if(n.Text)n.warn("fabric.Text is already defined");else{var l="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(l),cacheProperties:n.Object.prototype.cacheProperties.concat(l),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=n.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,r,s,o,u,g=0,v=this._textLines.length;g<v;g++)if(("justify"===this.textAlign||g!==v-1&&!this.isEndOfWrapping(g))&&(r=0,s=this._textLines[g],(e=this.getLineWidth(g))<this.width&&(u=this.textLines[g].match(this._reSpacesAndTabs)))){t=(this.width-e)/u.length;for(var b=0,_=s.length;b<=_;b++)o=this.__charBounds[g][b],this._reSpaceAndTab.test(s[b])?(o.width+=t,o.kernedWidth+=t,o.left+=r,r+=t):o.left+=r}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var r=this.getLineWidth(e);t<r&&(t=r)}return t},_renderTextLine:function(t,e,i,r,s,o){this._renderChars(t,e,i,r,s,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,r,s,o,u,g,v=t.fillStyle,b=this._getLeftOffset(),_=this._getTopOffset(),S=0,E=0,M=this.path,F=0,G=this._textLines.length;F<G;F++)if(e=this.getHeightOfLine(F),this.textBackgroundColor||this.styleHas("textBackgroundColor",F)){r=this._textLines[F],i=this._getLineLeftOffset(F),S=E=0,s=this.getValueOfPropertyAt(F,0,"textBackgroundColor");for(var q=0,k=r.length;q<k;q++)o=this.__charBounds[F][q],u=this.getValueOfPropertyAt(F,q,"textBackgroundColor"),M?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),(t.fillStyle=u)&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):u!==s?(g=b+i+S,"rtl"===this.direction&&(g=this.width-g-E),(t.fillStyle=s)&&t.fillRect(g,_,E,e/this.lineHeight),S=o.left,E=o.width,s=u):E+=o.kernedWidth;u&&!M&&(g=b+i+S,"rtl"===this.direction&&(g=this.width-g-E),t.fillStyle=u,t.fillRect(g,_,E,e/this.lineHeight)),_+=e}else _+=e;t.fillStyle=v,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();n.charWidthsCache[e]||(n.charWidthsCache[e]={});var i=n.charWidthsCache[e],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(t,e,i,r){var s,o,u,g,v=this.getFontCache(e),b=i+t,_=this._getFontDeclaration(e)===this._getFontDeclaration(r),S=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==v[i]&&(u=v[i]),void 0!==v[t]&&(g=s=v[t]),_&&void 0!==v[b]&&(g=(o=v[b])-u),void 0===s||void 0===u||void 0===o){var E=this.getMeasuringContext();this._setTextStyles(E,e,!0)}return void 0===s&&(g=s=E.measureText(t).width,v[t]=s),void 0===u&&_&&i&&(u=E.measureText(i).width,v[i]=u),_&&void 0===o&&(o=E.measureText(b).width,g=(v[b]=o)-u),{width:s*S,kernedWidth:g*S}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,i,r,s,o,u,g=0,v=this._textLines[t],b=new Array(v.length),_=0,S=this.path,E="right"===this.pathSide;for(this.__charBounds[t]=b,e=0;e<v.length;e++)s=this._getGraphemeBox(i=v[e],t,e,r),g+=(b[e]=s).kernedWidth,r=i;if(b[e]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},S){switch(u=S.segmentsInfo[S.segmentsInfo.length-1].length,(o=n.util.getPointOnPath(S.path,0,S.segmentsInfo)).x+=S.pathOffset.x,o.y+=S.pathOffset.y,this.textAlign){case"left":_=E?u-g:0;break;case"center":_=(u-g)/2;break;case"right":_=E?0:u-g}for(_+=this.pathStartOffset*(E?-1:1),e=E?v.length-1:0;E?0<=e:e<v.length;E?e--:e++)u<_?_%=u:_<0&&(_+=u),this._setGraphemeOnPath(_,s=b[e],o),_+=s.kernedWidth}return{width:g,numOfSpaces:0}},_setGraphemeOnPath:function(t,e,i){var s=this.path,o=n.util.getPointOnPath(s.path,t+e.kernedWidth/2,s.segmentsInfo);e.renderLeft=o.x-i.x,e.renderTop=o.y-i.y,e.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,r,s){var o,u=this.getCompleteStyleDeclaration(e,i),g=r?this.getCompleteStyleDeclaration(e,i-1):{},v=this._measureChar(t,u,r,g),b=v.kernedWidth,_=v.width;0!==this.charSpacing&&(_+=o=this._getWidthOfCharSpacing(),b+=o);var S={width:_,left:0,height:u.fontSize,kernedWidth:b,deltaY:u.deltaY};if(0<i&&!s){var E=this.__charBounds[e][i-1];S.left=E.left+E.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),r=1,s=e.length;r<s;r++)i=Math.max(this.getHeightOfChar(t,r),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,r=this._getLeftOffset(),s=this._getTopOffset(),o=0,u=this._textLines.length;o<u;o++){var g=this.getHeightOfLine(o),v=g/this.lineHeight,b=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],r+b,s+i+v,o),i+=g}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,r,s,o){var u,g,v,b,S=this.getHeightOfLine(o),E=-1!==this.textAlign.indexOf("justify"),M="",F=0,G=this.path,q=!E&&0===this.charSpacing&&this.isEmptyStyles(o)&&!G,k="ltr"===this.direction,d="ltr"===this.direction?1:-1,H=e.canvas.getAttribute("dir");if(e.save(),H!==this.direction&&(e.canvas.setAttribute("dir",k?"ltr":"rtl"),e.direction=k?"ltr":"rtl",e.textAlign=k?"left":"right"),s-=S*this._fontSizeFraction/this.lineHeight,q)return this._renderChar(t,e,o,0,i.join(""),r,s,S),void e.restore();for(var X=0,K=i.length-1;X<=K;X++)b=X===K||this.charSpacing||G,M+=i[X],v=this.__charBounds[o][X],0===F?(r+=d*(v.kernedWidth-v.width),F+=v.width):F+=v.kernedWidth,E&&!b&&this._reSpaceAndTab.test(i[X])&&(b=!0),b||(u=u||this.getCompleteStyleDeclaration(o,X),g=this.getCompleteStyleDeclaration(o,X+1),b=n.util.hasStyleChanged(u,g,!1)),b&&(G?(e.save(),e.translate(v.renderLeft,v.renderTop),e.rotate(v.angle),this._renderChar(t,e,o,X,M,-F/2,0,S),e.restore()):this._renderChar(t,e,o,X,M,r,s,S),M="",u=g,r+=d*F,F=0);e.restore()},_applyPatternGradientTransformText:function(t){var e,i=n.util.createCanvasElement(),r=this.width+this.strokeWidth,s=this.height+this.strokeWidth;return i.width=r,i.height=s,(e=i.getContext("2d")).beginPath(),e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,s),e.lineTo(0,s),e.closePath(),e.translate(r/2,s/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(i,"no-repeat")},handleFiller:function(t,e,i){var r,s;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(t.translate(r=-this.width/2,s=-this.height/2),t[e]=this._applyPatternGradientTransformText(i),{offsetX:r,offsetY:s}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,r,s,o,u){var g,v,b=this._getStyleDeclaration(i,r),_=this.getCompleteStyleDeclaration(i,r),S="fillText"===t&&_.fill,E="strokeText"===t&&_.stroke&&_.strokeWidth;(E||S)&&(e.save(),S&&(g=this._setFillStyles(e,_)),E&&(v=this._setStrokeStyles(e,_)),e.font=this._getFontDeclaration(_),b&&b.textBackgroundColor&&this._removeShadow(e),b&&b.deltaY&&(u+=b.deltaY),S&&e.fillText(s,o-g.offsetX,u-g.offsetY),E&&e.strokeText(s,o-v.offsetX,u-v.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var r=this.get2DCursorLocation(t,!0),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),o=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY");return this.setSelectionStyles({fontSize:s*i.size,deltaY:o+s*i.baseline},t,e),this},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,r=this.textAlign,s=this.direction,o=0,u=this.isEndOfWrapping(t);return"justify"===r||"justify-center"===r&&!u||"justify-right"===r&&!u||"justify-left"===r&&!u?0:("center"===r&&(o=i/2),"right"===r&&(o=i),"justify-center"===r&&(o=i/2),"justify-right"===r&&(o=i),"rtl"===s&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var r=this._getStyleDeclaration(t,e);return r&&void 0!==r[i]?r[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,r,s,o,u,g,v,b,_,S,E,M,F,G,q,k,d=this._getLeftOffset(),H=this._getTopOffset(),X=this.path,K=this._getWidthOfCharSpacing(),it=this.offsets[e],B=0,P=this._textLines.length;B<P;B++)if(i=this.getHeightOfLine(B),this[e]||this.styleHas(e,B)){v=this._textLines[B],G=i/this.lineHeight,o=this._getLineLeftOffset(B),E=S=0,b=this.getValueOfPropertyAt(B,0,e),k=this.getValueOfPropertyAt(B,0,"fill"),_=H+G*(1-this._fontSizeFraction),r=this.getHeightOfChar(B,0),u=this.getValueOfPropertyAt(B,0,"deltaY");for(var V=0,nt=v.length;V<nt;V++)if(M=this.__charBounds[B][V],F=this.getValueOfPropertyAt(B,V,e),q=this.getValueOfPropertyAt(B,V,"fill"),s=this.getHeightOfChar(B,V),g=this.getValueOfPropertyAt(B,V,"deltaY"),X&&F&&q)t.save(),t.fillStyle=k,t.translate(M.renderLeft,M.renderTop),t.rotate(M.angle),t.fillRect(-M.kernedWidth/2,it*s+g,M.kernedWidth,this.fontSize/15),t.restore();else if((F!==b||q!==k||s!==r||g!==u)&&0<E){var J=d+o+S;"rtl"===this.direction&&(J=this.width-J-E),b&&k&&(t.fillStyle=k,t.fillRect(J,_+it*r+u,E,this.fontSize/15)),S=M.left,E=M.width,b=F,k=q,r=s,u=g}else E+=M.kernedWidth;J=d+o+S,"rtl"===this.direction&&(J=this.width-J-E),t.fillStyle=q,F&&q&&t.fillRect(J,_+it*r+u,E-K,this.fontSize/15),H+=i}else H+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this,r=this.fontFamily,s=-1<n.Text.genericFonts.indexOf(r.toLowerCase()),o=void 0===r||-1<r.indexOf("'")||-1<r.indexOf(",")||-1<r.indexOf('"')||s?i.fontFamily:'"'+i.fontFamily+'"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,e?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),r=["\n"],s=[],o=0;o<e.length;o++)i[o]=n.util.string.graphemeSplit(e[o]),s=s.concat(i[o],r);return s.pop(),{_unwrappedLines:i,lines:e,graphemeText:s,graphemeLines:i}},toObject:function(t){var e=l.concat(t),i=this.callSuper("toObject",e);return i.styles=n.util.stylesToArray(this.styles,this.text),i.path&&(i.path=this.path.toObject()),i},set:function(t,e){this.callSuper("set",t,e);var i=!1,r=!1;if("object"==typeof t)for(var s in t)"path"===s&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(s),r=r||"path"===s;else i=-1!==this._dimensionAffectingProps.indexOf(t),r="path"===t;return r&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(t,e,i){if(!t)return e(null);var r=n.parseAttributes(t,n.Text.ATTRIBUTE_NAMES),s=r.textAnchor||"left";if((i=n.util.object.extend(i?a(i):{},r)).top=i.top||0,i.left=i.left||0,r.textDecoration){var o=r.textDecoration;-1!==o.indexOf("underline")&&(i.underline=!0),-1!==o.indexOf("overline")&&(i.overline=!0),-1!==o.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var u="";"textContent"in t?u=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(u=t.firstChild.data),u=u.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var g=i.strokeWidth;i.strokeWidth=0;var v=new n.Text(u,i),b=v.getScaledHeight()/v.height,_=((v.height+v.strokeWidth)*v.lineHeight-v.height)*b,S=v.getScaledHeight()+_,E=0;"center"===s&&(E=v.getScaledWidth()/2),"right"===s&&(E=v.getScaledWidth()),v.set({left:v.left-E,top:v.top-(S-v.fontSize*(.07+v._fontSizeFraction))/v.lineHeight,strokeWidth:void 0!==g?g:1}),e(v)},n.Text.fromObject=function(t,e){var i=a(t),r=t.path;return delete i.path,n.Object._fromObject("Text",i,function(s){s.styles=n.util.stylesFromArray(t.styles,t.text),r?n.Object._fromObject("Path",r,function(o){s.set("path",o),e(s)},"path"):e(s)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||void 0!==h&&!this.styles[h])return!0;var n=void 0===h?this.styles:{line:this.styles[h]};for(var a in n)for(var l in n[a])for(var t in n[a][l])return!1;return!0},styleHas:function(h,n){if(!this.styles||!h||""===h||void 0!==n&&!this.styles[n])return!1;var a=void 0===n?this.styles:{0:this.styles[n]};for(var l in a)for(var t in a[l])if(void 0!==a[l][t][h])return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||""===h)return!1;var n,a,l=this.styles,t=0,e=!0,i=0;for(var r in l){for(var s in n=0,l[r]){var o;t++,(o=l[r][s]).hasOwnProperty(h)?(a?o[h]!==a&&(e=!1):a=o[h],o[h]===this[h]&&delete o[h]):e=!1,0!==Object.keys(o).length?n++:delete l[r][s]}0===n&&delete l[r]}for(var u=0;u<this._textLines.length;u++)i+=this._textLines[u].length;e&&t===i&&(this[h]=a,this.removeStyle(h))},removeStyle:function(h){if(this.styles&&h&&""!==h){var n,a,l,t=this.styles;for(a in t){for(l in n=t[a])delete n[l][h],0===Object.keys(n[l]).length&&delete n[l];0===Object.keys(n).length&&delete t[a]}}},_extendStyles:function(h,n){var a=this.get2DCursorLocation(h);this._getLineStyle(a.lineIndex)||this._setLineStyle(a.lineIndex),this._getStyleDeclaration(a.lineIndex,a.charIndex)||this._setStyleDeclaration(a.lineIndex,a.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(a.lineIndex,a.charIndex),n)},get2DCursorLocation:function(h,n){void 0===h&&(h=this.selectionStart);for(var a=n?this._unwrappedTextLines:this._textLines,l=a.length,t=0;t<l;t++){if(h<=a[t].length)return{lineIndex:t,charIndex:h};h-=a[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:a[t-1].length<h?a[t-1].length:h}},getSelectionStyles:function(h,n,a){void 0===h&&(h=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||h);for(var l=[],t=h;t<n;t++)l.push(this.getStyleAtPosition(t,a));return l},getStyleAtPosition:function(h,n){var a=this.get2DCursorLocation(h);return(n?this.getCompleteStyleDeclaration(a.lineIndex,a.charIndex):this._getStyleDeclaration(a.lineIndex,a.charIndex))||{}},setSelectionStyles:function(h,n,a){void 0===n&&(n=this.selectionStart||0),void 0===a&&(a=this.selectionEnd||n);for(var l=n;l<a;l++)this._extendStyles(l,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,n){var a=this.styles&&this.styles[h];return a?a[n]:null},getCompleteStyleDeclaration:function(h,n){for(var a,l=this._getStyleDeclaration(h,n)||{},t={},e=0;e<this._styleProperties.length;e++)t[a=this._styleProperties[e]]=void 0===l[a]?this[a]:l[a];return t},_setStyleDeclaration:function(h,n,a){this.styles[h][n]=a},_deleteStyleDeclaration:function(h,n){delete this.styles[h][n]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}}),function(){function h(n){n.textDecoration&&(-1<n.textDecoration.indexOf("underline")&&(n.underline=!0),-1<n.textDecoration.indexOf("line-through")&&(n.linethrough=!0),-1<n.textDecoration.indexOf("overline")&&(n.overline=!0),delete n.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,a){this.callSuper("initialize",n,a),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,a){this[n]!==a&&(this._fireSelectionChanged(),this[n]=a),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var a=this.canvas.contextTop,l=this.canvas.viewportTransform;a.save(),a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this.transform(a),this._clearTextArea(a),n||a.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var n=this._getCursorBoundaries(),a=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,a):this.renderSelection(n,a),a.restore()}},_clearTextArea:function(n){var a=this.width+4,l=this.height+4;n.clearRect(-a/2,-l/2,a,l)},_getCursorBoundaries:function(n){void 0===n&&(n=this.selectionStart);var a=this._getLeftOffset(),l=this._getTopOffset(),t=this._getCursorBoundariesOffsets(n);return{left:a,top:l,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var a,l,t,e,i=0,r=0,s=this.get2DCursorLocation(n);t=s.charIndex,l=s.lineIndex;for(var o=0;o<l;o++)i+=this.getHeightOfLine(o);a=this._getLineLeftOffset(l);var u=this.__charBounds[l][t];return u&&(r=u.left),0!==this.charSpacing&&t===this._textLines[l].length&&(r-=this._getWidthOfCharSpacing()),e={top:i,left:a+(0<r?r:0)},"rtl"===this.direction&&(e.left*=-1),this.cursorOffsetCache=e,this.cursorOffsetCache},renderCursor:function(n,a){var l=this.get2DCursorLocation(),t=l.lineIndex,e=0<l.charIndex?l.charIndex-1:0,i=this.getValueOfPropertyAt(t,e,"fontSize"),r=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/r,o=n.topOffset,u=this.getValueOfPropertyAt(t,e,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,a),a.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,e,"fill"),a.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,a.fillRect(n.left+n.leftOffset-s/2,o+n.top+u,s,i)},renderSelection:function(n,a){for(var l=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,e=-1!==this.textAlign.indexOf("justify"),i=this.get2DCursorLocation(l),r=this.get2DCursorLocation(t),s=i.lineIndex,o=r.lineIndex,u=i.charIndex<0?0:i.charIndex,g=r.charIndex<0?0:r.charIndex,v=s;v<=o;v++){var b,_=this._getLineLeftOffset(v)||0,S=this.getHeightOfLine(v),E=0,M=0;if(v===s&&(E=this.__charBounds[s][u].left),s<=v&&v<o)M=e&&!this.isEndOfWrapping(v)?this.width:this.getLineWidth(v)||5;else if(v===o)if(0===g)M=this.__charBounds[o][g].left;else{var F=this._getWidthOfCharSpacing();M=this.__charBounds[o][g-1].left+this.__charBounds[o][g-1].width-F}b=S,(this.lineHeight<1||v===o&&1<this.lineHeight)&&(S/=this.lineHeight);var G=n.left+_+E,q=M-E,k=S,d=0;this.inCompositionMode?(a.fillStyle=this.compositionColor||"black",k=1,d=S):a.fillStyle=this.selectionColor,"rtl"===this.direction&&(G=this.width-G-q),a.fillRect(G,n.top+n.topOffset+d,q,k),n.topOffset+=b}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0);return{l:n.lineIndex,c:0<n.charIndex?n.charIndex-1:0}}}),fabric.IText.fromObject=function(n,a){var l=fabric.util.stylesFromArray(n.styles,n.text),t=Object.assign({},n,{styles:l});if(h(t),t.styles)for(var e in t.styles)for(var i in t.styles[e])h(t.styles[e][i]);fabric.Object._fromObject("IText",t,a,"text")}}(),function(){var h=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var a=n.canvas;a&&(a._hasITextHandlers||(a._hasITextHandlers=!0,n._initCanvasHandlers(a)),a._iTextInstances=a._iTextInstances||[],a._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var a=n.canvas;a&&(a._iTextInstances=a._iTextInstances||[],fabric.util.removeFromArray(a._iTextInstances,n),0===a._iTextInstances.length&&(a._hasITextHandlers=!1,n._removeCanvasHandlers(a)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(a){a.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,a,l,t){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",a,{duration:l,onComplete:function(){e.isAborted||n[t]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var a=this,l=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){a._tick()},l)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,a=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&a&&a.clearContext(a.contextTop||a.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var a=0,l=n-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)a++,l--;for(;/\S/.test(this._text[l])&&-1<l;)a++,l--;return n-a},findWordBoundaryRight:function(n){var a=0,l=n;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)a++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)a++,l++;return n+a},findLineBoundaryLeft:function(n){for(var a=0,l=n-1;!/\n/.test(this._text[l])&&-1<l;)a++,l--;return n-a},findLineBoundaryRight:function(n){for(var a=0,l=n;!/\n/.test(this._text[l])&&l<this._text.length;)a++,l++;return n+a},searchWordBoundary:function(n,a){for(var l=this._text,t=this._reSpace.test(l[n])?n-1:n,e=l[t],i=fabric.reNonWord;!i.test(e)&&0<t&&t<l.length;)e=l[t+=a];return i.test(e)&&(t+=1===a?0:1),t},selectWord:function(n){var a=this.searchWordBoundary(n=n||this.selectionStart,-1),l=this.searchWordBoundary(n,1);this.selectionStart=a,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){var a=this.findLineBoundaryLeft(n=n||this.selectionStart),l=this.findLineBoundaryRight(n);return this.selectionStart=a,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var a=this.getSelectionStartFromPointer(n.e),l=this.selectionStart,t=this.selectionEnd;(a===this.__selectionStartOnMouseDown&&l!==t||l!==a&&t!==a)&&(a>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=a):(this.selectionStart=a,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===l&&this.selectionEnd===t||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,a,l){var t=l.slice(0,n),e=fabric.util.string.graphemeSplit(t).length;if(n===a)return{selectionStart:e,selectionEnd:e};var i=l.slice(n,a);return{selectionStart:e,selectionEnd:e+fabric.util.string.graphemeSplit(i).length}},fromGraphemeToStringSelection:function(n,a,l){var t=l.slice(0,n).join("").length;return n===a?{selectionStart:t,selectionEnd:t}:{selectionStart:t,selectionEnd:t+l.slice(n,a).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,a=this._getCursorBoundaries(n),l=this.get2DCursorLocation(n),i=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"fontSize")*this.lineHeight,r=a.leftOffset,s=this.calcTransformMatrix(),o={x:a.left+r,y:a.top+a.topOffset+i},u=this.canvas.getRetinaScaling(),g=this.canvas.upperCanvasEl,v=g.width/u,b=g.height/u,_=v-i,S=b-i,E=g.clientWidth/v,M=g.clientHeight/b;return o=fabric.util.transformPoint(o,s),(o=fabric.util.transformPoint(o,this.canvas.viewportTransform)).x*=E,o.y*=M,o.x<0&&(o.x=0),o.x>_&&(o.x=_),o.y<0&&(o.y=0),o.y>S&&(o.y=S),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,a=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,a&&(a.blur&&a.blur(),a.parentNode&&a.parentNode.removeChild(a)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,a){var l,t,e=this.get2DCursorLocation(n,!0),i=this.get2DCursorLocation(a,!0),r=e.lineIndex,s=e.charIndex,o=i.lineIndex,u=i.charIndex;if(r!==o){if(this.styles[r])for(l=s;l<this._unwrappedTextLines[r].length;l++)delete this.styles[r][l];if(this.styles[o])for(l=u;l<this._unwrappedTextLines[o].length;l++)(t=this.styles[o][l])&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+l-u]=t);for(l=r+1;l<=o;l++)delete this.styles[l];this.shiftLineStyles(o,r-o)}else if(this.styles[r]){t=this.styles[r];var g,v,b=u-s;for(l=s;l<u;l++)delete t[l];for(v in this.styles[r])u<=(g=parseInt(v,10))&&(t[g-b]=t[v],delete t[v])}},shiftLineStyles:function(n,a){var l=h(this.styles);for(var t in this.styles){var e=parseInt(t,10);n<e&&(this.styles[e+a]=l[e],l[e-a]||delete this.styles[e])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(n,a,l,t){var e,i={},r=!1,s=this._unwrappedTextLines[n].length===a;for(var o in l||(l=1),this.shiftLineStyles(n,l),this.styles[n]&&(e=this.styles[n][0===a?a:a-1]),this.styles[n]){var u=parseInt(o,10);a<=u&&(r=!0,i[u-a]=this.styles[n][o],s&&0===a||delete this.styles[n][o])}var g=!1;for(r&&!s&&(this.styles[n+l]=i,g=!0),g&&l--;0<l;)t&&t[l-1]?this.styles[n+l]={0:h(t[l-1])}:e?this.styles[n+l]={0:h(e)}:delete this.styles[n+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(n,a,l,t){this.styles||(this.styles={});var e=this.styles[n],i=e?h(e):{};for(var r in l||(l=1),i){var s=parseInt(r,10);a<=s&&(e[s+l]=i[s],i[s-l]||delete e[s])}if(this._forceClearCache=!0,t)for(;l--;)Object.keys(t[l]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][a+l]=h(t[l]));else if(e)for(var o=e[a?a-1:1];o&&l--;)this.styles[n][a+l]=h(o)},insertNewStyleBlock:function(n,a,l){for(var t=this.get2DCursorLocation(a,!0),e=[0],i=0,r=0;r<n.length;r++)"\n"===n[r]?e[++i]=0:e[i]++;for(0<e[0]&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,e[0],l),l=l&&l.slice(e[0]+1)),i&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+e[0],i),r=1;r<i;r++)0<e[r]?this.insertCharStyleObject(t.lineIndex+r,0,e[r],l):l&&this.styles[t.lineIndex+r]&&l[0]&&(this.styles[t.lineIndex+r][0]=l[0]),l=l&&l.slice(e[r]+1);0<e[r]&&this.insertCharStyleObject(t.lineIndex+r,0,e[r],l)},setSelectionStartEndWithShift:function(n,a,l){l<=n?(a===n?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=l):n<l&&l<a?"right"===this._selectionDirection?this.selectionEnd=l:this.selectionStart=l:(a===n?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=a),this.selectionEnd=l)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var n=h.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&1!==h.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&1!==h.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&1!==h.e.button)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var n=this.getSelectionStartFromPointer(h);h.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var n,a=this.getLocalPointer(h),l=0,t=0,e=0,i=0,r=0,s=0,o=this._textLines.length;s<o&&e<=a.y;s++)e+=this.getHeightOfLine(s)*this.scaleY,0<(r=s)&&(i+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));t=this._getLineLeftOffset(r)*this.scaleX,n=this._textLines[r],"rtl"===this.direction&&(a.x=this.width*this.scaleX-a.x+t);for(var u=0,g=n.length;u<g&&(l=t,(t+=this.__charBounds[r][u].kernedWidth*this.scaleX)<=a.x);u++)i++;return this._getNewSelectionStartFromOffset(a,l,t,i,g)},_getNewSelectionStartFromOffset:function(h,n,a,l,t){var i=a-h.x,r=l+(h.x-n<i||i<0?0:1);return this.flipX&&(r=t-r),r>this._text.length&&(r=this._text.length),r}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var n="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(h.keyCode in n)this[n[h.keyCode]](h);else{if(!(h.keyCode in this.ctrlKeysMapDown)||!h.ctrlKey&&!h.metaKey)return;this[this.ctrlKeysMapDown[h.keyCode]](h)}h.stopImmediatePropagation(),h.preventDefault(),33<=h.keyCode&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey)&&(this[this.ctrlKeysMapUp[h.keyCode]](h),h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(h){var n=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),this.isEditing){var a,l,t,e,i,r=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,o=r.length,u=o-s,g=this.selectionStart,v=this.selectionEnd,b=g!==v;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var _=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=g>_.selectionStart;b?(a=this._text.slice(g,v),u+=v-g):o<s&&(a=S?this._text.slice(v+u,v):this._text.slice(g,g-u)),l=r.slice(_.selectionEnd-u,_.selectionEnd),a&&a.length&&(l.length&&(t=this.getSelectionStyles(g,g+1,!1),t=l.map(function(){return t[0]})),b?(e=g,i=v):S?(e=v-a.length,i=v):i=(e=v)+a.length,this.removeStyleFromTo(e,i)),l.length&&(n&&l.join("")===fabric.copiedText&&!fabric.disableStyleCopyPaste&&(t=fabric.copiedTextStyle),this.insertNewStyleBlock(l,g,t)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.copiedTextStyle=fabric.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(h,n){var a,l=this._getLineLeftOffset(h);return 0<n&&(l+=(a=this.__charBounds[h][n-1]).left+a.width),l},getDownCursorOffset:function(h,n){var a=this._getSelectionForOffset(h,n),l=this.get2DCursorLocation(a),t=l.lineIndex;if(t===this._textLines.length-1||h.metaKey||34===h.keyCode)return this._text.length-a;var e=l.charIndex,i=this._getWidthBeforeCursor(t,e),r=this._getIndexOnLine(t+1,i);return this._textLines[t].slice(e).length+r+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(h,n){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,n){var a=this._getSelectionForOffset(h,n),l=this.get2DCursorLocation(a),t=l.lineIndex;if(0===t||h.metaKey||33===h.keyCode)return-a;var e=l.charIndex,i=this._getWidthBeforeCursor(t,e),r=this._getIndexOnLine(t-1,i),s=this._textLines[t].slice(0,e),o=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+r-s.length+(1-o)},_getIndexOnLine:function(h,n){for(var a,l,t=this._textLines[h],e=this._getLineLeftOffset(h),i=0,r=0,s=t.length;r<s;r++)if(n<(e+=a=this.__charBounds[h][r].width)){l=!0;var u=e,g=Math.abs(e-a-n);i=Math.abs(u-n)<g?r:r-1;break}return l||(i=t.length-1),i},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,n){var a=this["get"+h+"CursorOffset"](n,"right"===this._selectionDirection);n.shiftKey?this.moveCursorWithShift(a):this.moveCursorWithoutShift(a),0!==a&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+h:this.selectionEnd+h),0!==h},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),0!==h},moveCursorLeft:function(h){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",h)},_move:function(h,n,a){var l;if(h.altKey)l=this["findWordBoundary"+a](this[n]);else{if(!h.metaKey&&35!==h.keyCode&&36!==h.keyCode)return this[n]+="Left"===a?-1:1,!0;l=this["findLineBoundary"+a](this[n])}if(void 0!==l&&this[n]!==l)return this[n]=l,!0},_moveLeft:function(h,n){return this._move(h,n,"Left")},_moveRight:function(h,n){return this._move(h,n,"Right")},moveCursorLeftWithoutShift:function(h){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(n=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(h){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(h,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(h,"selectionStart")):void 0},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,n){var a="moveCursor"+h+"With";this._currentCursorOpacity=1,this[a+=n.shiftKey?"Shift":"outShift"](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(h,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(h,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(h){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(h,n){void 0===n&&(n=h+1),this.removeStyleFromTo(h,n),this._text.splice(h,n-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,n,a,l){void 0===l&&(l=a),a<l&&this.removeStyleFromTo(a,l);var t=fabric.util.string.graphemeSplit(h);this.insertNewStyleBlock(t,a,n),this._text=[].concat(this._text.slice(0,a),t,this._text.slice(l)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=fabric.util.toFixed,n=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),l=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(l)},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var l=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",a.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(a,l){var t,e=[],i=[],r=a;this._setSVGBg(i);for(var s=0,o=this._textLines.length;s<o;s++)t=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(i,s,l+t,r),this._setSVGTextLineText(e,s,l+t,r),r+=this.getHeightOfLine(s);return{textSpans:e,textBgRects:i}},_createTextCharSpan:function(a,l,t,e){var i=a!==a.trim()||a.match(n),r=this.getSvgSpanStyles(l,i),s=r?'style="'+r+'"':"",o=l.deltaY,u="",g=fabric.Object.NUM_FRACTION_DIGITS;return o&&(u=' dy="'+h(o,g)+'" '),['<tspan x="',h(t,g),'" y="',h(e,g),'" ',u,s,">",fabric.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,l,t,e){var i,r,s,o,u,g=this.getHeightOfLine(l),v=-1!==this.textAlign.indexOf("justify"),b="",_=0,S=this._textLines[l];e+=g*(1-this._fontSizeFraction)/this.lineHeight;for(var E=0,M=S.length-1;E<=M;E++)u=E===M||this.charSpacing,b+=S[E],s=this.__charBounds[l][E],0===_?(t+=s.kernedWidth-s.width,_+=s.width):_+=s.kernedWidth,v&&!u&&this._reSpaceAndTab.test(S[E])&&(u=!0),u||(i=i||this.getCompleteStyleDeclaration(l,E),r=this.getCompleteStyleDeclaration(l,E+1),u=fabric.util.hasStyleChanged(i,r,!0)),u&&(o=this._getStyleDeclaration(l,E)||{},a.push(this._createTextCharSpan(b,o,t,e)),b="",i=r,t+=_,_=0)},_pushTextBgRect:function(a,l,t,e,i,r){var s=fabric.Object.NUM_FRACTION_DIGITS;a.push("\t\t<rect ",this._getFillAttributes(l),' x="',h(t,s),'" y="',h(e,s),'" width="',h(i,s),'" height="',h(r,s),'"></rect>\n')},_setSVGTextLineBg:function(a,l,t,e){for(var i,r,s=this._textLines[l],o=this.getHeightOfLine(l)/this.lineHeight,u=0,g=0,v=this.getValueOfPropertyAt(l,0,"textBackgroundColor"),b=0,_=s.length;b<_;b++)i=this.__charBounds[l][b],(r=this.getValueOfPropertyAt(l,b,"textBackgroundColor"))!==v?(v&&this._pushTextBgRect(a,v,t+g,e,u,o),g=i.left,u=i.width,v=r):u+=i.kernedWidth;r&&this._pushTextBgRect(a,r,t+g,e,u,o)},_getFillAttributes:function(a){var l=a&&"string"==typeof a?new fabric.Color(a):"";return l&&l.getSource()&&1!==l.getAlpha()?'opacity="'+l.getAlpha()+'" fill="'+l.setAlpha(1).toRgb()+'"':'fill="'+a+'"'},_getSVGLineTopOffset:function(a){for(var l,t=0,e=0;e<a;e++)t+=this.getHeightOfLine(e);return l=this.getHeightOfLine(e),{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){return fabric.Object.prototype.getSvgStyles.call(this,a)+" white-space: pre;"}})}(),function(h){"use strict";var n=h.fabric||(h.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(a){for(var l=0,t=0,e=0,i={},r=0;r<a.graphemeLines.length;r++)"\n"===a.graphemeText[e]&&0<r?(t=0,e++,l++):!this.splitByGrapheme&&this._reSpaceAndTab.test(a.graphemeText[e])&&0<r&&(t++,e++),i[r]={line:l,offset:t},e+=a.graphemeLines[r].length,t+=a.graphemeLines[r].length;return i},styleHas:function(a,l){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[l];t&&(l=t.line)}return n.Text.prototype.styleHas.call(this,a,l)},isEmptyStyles:function(a){if(!this.styles)return!0;var l,t,e=0,i=!1,r=this._styleMap[a],s=this._styleMap[a+1];for(var o in r&&(a=r.line,e=r.offset),s&&(i=s.line===a,l=s.offset),t=void 0===a?this.styles:{line:this.styles[a]})for(var u in t[o])if(e<=u&&(!i||u<l))for(var g in t[o][u])return!1;return!0},_getStyleDeclaration:function(a,l){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[a];if(!t)return null;a=t.line,l=t.offset+l}return this.callSuper("_getStyleDeclaration",a,l)},_setStyleDeclaration:function(a,l,t){var e=this._styleMap[a];this.styles[a=e.line][l=e.offset+l]=t},_deleteStyleDeclaration:function(a,l){var t=this._styleMap[a];delete this.styles[a=t.line][l=t.offset+l]},_getLineStyle:function(a){return!!this.styles[this._styleMap[a].line]},_setLineStyle:function(a){this.styles[this._styleMap[a].line]={}},_wrapText:function(a,l){var t,e=[];for(this.isWrapping=!0,t=0;t<a.length;t++)e=e.concat(this._wrapLine(a[t],t,l));return this.isWrapping=!1,e},_measureWord:function(a,l,t){var e,i=0;t=t||0;for(var r=0,s=a.length;r<s;r++)i+=this._getGraphemeBox(a[r],l,r+t,e,!0).kernedWidth,e=a[r];return i},_wrapLine:function(a,l,t,e){var i=0,r=this.splitByGrapheme,s=[],o=[],u=r?n.util.string.graphemeSplit(a):a.split(this._wordJoiners),g="",v=0,b=r?"":" ",_=0,S=0,E=0,M=!0,F=this._getWidthOfCharSpacing();e=e||0,0===u.length&&u.push([]),t-=e;for(var G=0;G<u.length;G++)g=r?u[G]:n.util.string.graphemeSplit(u[G]),_=this._measureWord(g,l,v),v+=g.length,t<(i+=S+_-F)&&!M?(s.push(o),o=[],i=_,M=!0):i+=F,M||r||o.push(b),o=o.concat(g),S=r?0:this._measureWord([b],l,v),v++,M=!1,E<_&&(E=_);return G&&s.push(o),E+e>this.dynamicMinWidth&&(this.dynamicMinWidth=E-F+e),s},isEndOfWrapping:function(a){return!this._styleMap[a+1]||this._styleMap[a+1].line!==this._styleMap[a].line},missingNewlineOffset:function(a){return this.splitByGrapheme?this.isEndOfWrapping(a)?1:0:1},_splitTextIntoLines:function(a){for(var l=n.Text.prototype._splitTextIntoLines.call(this,a),t=this._wrapText(l.lines,this.width),e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i].join("");return l.lines=e,l.graphemeLines=t,l},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var a={};for(var l in this._styleMap)this._textLines[l]&&(a[this._styleMap[l].line]=1);for(var l in this.styles)a[l]||delete this.styles[l]},toObject:function(a){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(a))}}),n.Textbox.fromObject=function(a,l){var t=n.util.stylesFromArray(a.styles,a.text),e=Object.assign({},a,{styles:t});return n.Object._fromObject("Textbox",e,l,"text")}}(typeof exports<"u"?exports:this),function(){var h=fabric.controlsUtils,n=h.scaleSkewCursorStyleHandler,a=h.scaleCursorStyleHandler,l=h.scalingEqually,t=h.scalingYOrSkewingX,e=h.scalingXOrSkewingY,i=h.scaleOrSkewActionName,r=fabric.Object.prototype.controls;if(r.ml=new fabric.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),r.mr=new fabric.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),r.mb=new fabric.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),r.mt=new fabric.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),r.tl=new fabric.Control({x:-.5,y:-.5,cursorStyleHandler:a,actionHandler:l}),r.tr=new fabric.Control({x:.5,y:-.5,cursorStyleHandler:a,actionHandler:l}),r.bl=new fabric.Control({x:-.5,y:.5,cursorStyleHandler:a,actionHandler:l}),r.br=new fabric.Control({x:.5,y:.5,cursorStyleHandler:a,actionHandler:l}),r.mtr=new fabric.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),fabric.Textbox){var s=fabric.Textbox.prototype.controls={};s.mtr=r.mtr,s.tr=r.tr,s.br=r.br,s.tl=r.tl,s.bl=r.bl,s.mt=r.mt,s.mb=r.mb,s.mr=new fabric.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),s.ml=new fabric.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}(),function(h,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=h.document?n(h,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return n(a)}:n(h)}(typeof window<"u"?window:this,function(h,n){"use strict";var a=[],l=Object.getPrototypeOf,t=a.slice,e=a.flat?function(c){return a.flat.call(c)}:function(c){return a.concat.apply([],c)},i=a.push,r=a.indexOf,s={},o=s.toString,u=s.hasOwnProperty,g=u.toString,v=g.call(Object),b={},_=function(c){return"function"==typeof c&&"number"!=typeof c.nodeType&&"function"!=typeof c.item},S=function(c){return null!=c&&c===c.window},E=h.document,M={type:!0,src:!0,nonce:!0,noModule:!0};function F(c,f,m){var y,x,C=(m=m||E).createElement("script");if(C.text=c,f)for(y in M)(x=f[y]||f.getAttribute&&f.getAttribute(y))&&C.setAttribute(y,x);m.head.appendChild(C).parentNode.removeChild(C)}function G(c){return null==c?c+"":"object"==typeof c||"function"==typeof c?s[o.call(c)]||"object":typeof c}var q="3.7.1",k=/HTML$/i,d=function(c,f){return new d.fn.init(c,f)};function H(c){var f=!!c&&"length"in c&&c.length,m=G(c);return!_(c)&&!S(c)&&("array"===m||0===f||"number"==typeof f&&0<f&&f-1 in c)}function X(c,f){return c.nodeName&&c.nodeName.toLowerCase()===f.toLowerCase()}d.fn=d.prototype={jquery:q,constructor:d,length:0,toArray:function(){return t.call(this)},get:function(c){return null==c?t.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var f=d.merge(this.constructor(),c);return f.prevObject=this,f},each:function(c){return d.each(this,c)},map:function(c){return this.pushStack(d.map(this,function(f,m){return c.call(f,m,f)}))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(c,f){return(f+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(c,f){return f%2}))},eq:function(c){var f=this.length,m=+c+(c<0?f:0);return this.pushStack(0<=m&&m<f?[this[m]]:[])},end:function(){return this.prevObject||this.constructor()},push:i,sort:a.sort,splice:a.splice},d.extend=d.fn.extend=function(){var c,f,m,y,x,C,O=arguments[0]||{},L=1,D=arguments.length,z=!1;for("boolean"==typeof O&&(z=O,O=arguments[L]||{},L++),"object"==typeof O||_(O)||(O={}),L===D&&(O=this,L--);L<D;L++)if(null!=(c=arguments[L]))for(f in c)y=c[f],"__proto__"!==f&&O!==y&&(z&&y&&(d.isPlainObject(y)||(x=Array.isArray(y)))?(m=O[f],C=x&&!Array.isArray(m)?[]:x||d.isPlainObject(m)?m:{},x=!1,O[f]=d.extend(z,C,y)):void 0!==y&&(O[f]=y));return O},d.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var f,m;return!(!c||"[object Object]"!==o.call(c)||(f=l(c))&&("function"!=typeof(m=u.call(f,"constructor")&&f.constructor)||g.call(m)!==v))},isEmptyObject:function(c){var f;for(f in c)return!1;return!0},globalEval:function(c,f,m){F(c,{nonce:f&&f.nonce},m)},each:function(c,f){var m,y=0;if(H(c))for(m=c.length;y<m&&!1!==f.call(c[y],y,c[y]);y++);else for(y in c)if(!1===f.call(c[y],y,c[y]))break;return c},text:function(c){var f,m="",y=0,x=c.nodeType;if(!x)for(;f=c[y++];)m+=d.text(f);return 1===x||11===x?c.textContent:9===x?c.documentElement.textContent:3===x||4===x?c.nodeValue:m},makeArray:function(c,f){var m=f||[];return null!=c&&(H(Object(c))?d.merge(m,"string"==typeof c?[c]:c):i.call(m,c)),m},inArray:function(c,f,m){return null==f?-1:r.call(f,c,m)},isXMLDoc:function(c){var m=c&&(c.ownerDocument||c).documentElement;return!k.test(c&&c.namespaceURI||m&&m.nodeName||"HTML")},merge:function(c,f){for(var m=+f.length,y=0,x=c.length;y<m;y++)c[x++]=f[y];return c.length=x,c},grep:function(c,f,m){for(var y=[],x=0,C=c.length,O=!m;x<C;x++)!f(c[x],x)!==O&&y.push(c[x]);return y},map:function(c,f,m){var y,x,C=0,O=[];if(H(c))for(y=c.length;C<y;C++)null!=(x=f(c[C],C,m))&&O.push(x);else for(C in c)null!=(x=f(c[C],C,m))&&O.push(x);return e(O)},guid:1,support:b}),"function"==typeof Symbol&&(d.fn[Symbol.iterator]=a[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,f){s["[object "+f+"]"]=f.toLowerCase()});var K=a.pop,it=a.sort,B=a.splice,P="[\\x20\\t\\r\\n\\f]",V=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");d.contains=function(c,f){var m=f&&f.parentNode;return c===m||!(!m||1!==m.nodeType||!(c.contains?c.contains(m):c.compareDocumentPosition&&16&c.compareDocumentPosition(m)))};var nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function J(c,f){return f?"\0"===c?"\ufffd":c.slice(0,-1)+"\\"+c.charCodeAt(c.length-1).toString(16)+" ":"\\"+c}d.escapeSelector=function(c){return(c+"").replace(nt,J)};var st=E,ft=i;!function(){var c,f,m,y,x,C,O,L,D,z,Z=ft,et=d.expando,$=0,ct=0,At=re(),Rt=re(),Bt=re(),ce=re(),me=function(A,W){return A===W&&(x=!0),0},Je="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ze="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",zt="\\["+P+"*("+Ze+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ze+"))|)"+P+"*\\]",ti=":("+Ze+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+zt+")*)|.*)\\)|)",Ut=new RegExp(P+"+","g"),ne=new RegExp("^"+P+"*,"+P+"*"),ai=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),Mi=new RegExp(P+"|>"),ei=new RegExp(ti),Li=new RegExp("^"+Ze+"$"),li={ID:new RegExp("^#("+Ze+")"),CLASS:new RegExp("^\\.("+Ze+")"),TAG:new RegExp("^("+Ze+"|[*])"),ATTR:new RegExp("^"+zt),PSEUDO:new RegExp("^"+ti),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+Je+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},De=/^(?:input|select|textarea|button)$/i,Oi=/^h\d$/i,Xe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,he=/[+~]/,oe=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),Ce=function(A,W){var Q="0x"+A.slice(1)-65536;return W||(Q<0?String.fromCharCode(Q+65536):String.fromCharCode(Q>>10|55296,1023&Q|56320))},ci=function(){vi()},we=Ui(function(A){return!0===A.disabled&&X(A,"fieldset")},{dir:"parentNode",next:"legend"});try{Z.apply(a=t.call(st.childNodes),st.childNodes)}catch{Z={apply:function(W,Q){ft.apply(W,t.call(Q))},call:function(W){ft.apply(W,t.call(arguments,1))}}}function Pt(A,W,Q,tt){var at,xt,Ct,Et,wt,Yt,Ft,Ht=W&&W.ownerDocument,Vt=W?W.nodeType:9;if(Q=Q||[],"string"!=typeof A||!A||1!==Vt&&9!==Vt&&11!==Vt)return Q;if(!tt&&(vi(W),W=W||C,L)){if(11!==Vt&&(wt=Xe.exec(A)))if(at=wt[1]){if(9===Vt){if(!(Ct=W.getElementById(at)))return Q;if(Ct.id===at)return Z.call(Q,Ct),Q}else if(Ht&&(Ct=Ht.getElementById(at))&&Pt.contains(W,Ct)&&Ct.id===at)return Z.call(Q,Ct),Q}else{if(wt[2])return Z.apply(Q,W.getElementsByTagName(A)),Q;if((at=wt[3])&&W.getElementsByClassName)return Z.apply(Q,W.getElementsByClassName(at)),Q}if(!(ce[A+" "]||D&&D.test(A))){if(Ft=A,Ht=W,1===Vt&&(Mi.test(A)||ai.test(A))){for((Ht=he.test(A)&&vn(W.parentNode)||W)==W&&b.scope||((Et=W.getAttribute("id"))?Et=d.escapeSelector(Et):W.setAttribute("id",Et=et)),xt=(Yt=Fi(A)).length;xt--;)Yt[xt]=(Et?"#"+Et:":scope")+" "+Yi(Yt[xt]);Ft=Yt.join(",")}try{return Z.apply(Q,Ht.querySelectorAll(Ft)),Q}catch{ce(A,!0)}finally{Et===et&&W.removeAttribute("id")}}}return $i(A.replace(V,"$1"),W,Q,tt)}function re(){var A=[];return function W(Q,tt){return A.push(Q+" ")>f.cacheLength&&delete W[A.shift()],W[Q+" "]=tt}}function ae(A){return A[et]=!0,A}function te(A){var W=C.createElement("fieldset");try{return!!A(W)}catch{return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function ii(A){return function(W){return X(W,"input")&&W.type===A}}function Ei(A){return function(W){return(X(W,"input")||X(W,"button"))&&W.type===A}}function mi(A){return function(W){return"form"in W?W.parentNode&&!1===W.disabled?"label"in W?"label"in W.parentNode?W.parentNode.disabled===A:W.disabled===A:W.isDisabled===A||W.isDisabled!==!A&&we(W)===A:W.disabled===A:"label"in W&&W.disabled===A}}function Ie(A){return ae(function(W){return W=+W,ae(function(Q,tt){for(var at,xt=A([],Q.length,W),Ct=xt.length;Ct--;)Q[at=xt[Ct]]&&(Q[at]=!(tt[at]=Q[at]))})})}function vn(A){return A&&typeof A.getElementsByTagName<"u"&&A}function vi(A){var W,Q=A?A.ownerDocument||A:st;return Q!=C&&9===Q.nodeType&&Q.documentElement&&(O=(C=Q).documentElement,L=!d.isXMLDoc(C),z=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&st!=C&&(W=C.defaultView)&&W.top!==W&&W.addEventListener("unload",ci),b.getById=te(function(tt){return O.appendChild(tt).id=d.expando,!C.getElementsByName||!C.getElementsByName(d.expando).length}),b.disconnectedMatch=te(function(tt){return z.call(tt,"*")}),b.scope=te(function(){return C.querySelectorAll(":scope")}),b.cssHas=te(function(){try{return C.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(f.filter.ID=function(tt){var at=tt.replace(oe,Ce);return function(xt){return xt.getAttribute("id")===at}},f.find.ID=function(tt,at){if(typeof at.getElementById<"u"&&L){var xt=at.getElementById(tt);return xt?[xt]:[]}}):(f.filter.ID=function(tt){var at=tt.replace(oe,Ce);return function(xt){var Ct=typeof xt.getAttributeNode<"u"&&xt.getAttributeNode("id");return Ct&&Ct.value===at}},f.find.ID=function(tt,at){if(typeof at.getElementById<"u"&&L){var xt,Ct,Et,wt=at.getElementById(tt);if(wt){if((xt=wt.getAttributeNode("id"))&&xt.value===tt)return[wt];for(Et=at.getElementsByName(tt),Ct=0;wt=Et[Ct++];)if((xt=wt.getAttributeNode("id"))&&xt.value===tt)return[wt]}return[]}}),f.find.TAG=function(tt,at){return typeof at.getElementsByTagName<"u"?at.getElementsByTagName(tt):at.querySelectorAll(tt)},f.find.CLASS=function(tt,at){if(typeof at.getElementsByClassName<"u"&&L)return at.getElementsByClassName(tt)},D=[],te(function(tt){var at;O.appendChild(tt).innerHTML="<a id='"+et+"' href='' disabled='disabled'></a><select id='"+et+"-\r\\' disabled='disabled'><option selected=''></option></select>",tt.querySelectorAll("[selected]").length||D.push("\\["+P+"*(?:value|"+Je+")"),tt.querySelectorAll("[id~="+et+"-]").length||D.push("~="),tt.querySelectorAll("a#"+et+"+*").length||D.push(".#.+[+~]"),tt.querySelectorAll(":checked").length||D.push(":checked"),(at=C.createElement("input")).setAttribute("type","hidden"),tt.appendChild(at).setAttribute("name","D"),O.appendChild(tt).disabled=!0,2!==tt.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled"),(at=C.createElement("input")).setAttribute("name",""),tt.appendChild(at),tt.querySelectorAll("[name='']").length||D.push("\\["+P+"*name"+P+"*="+P+"*(?:''|\"\")")}),b.cssHas||D.push(":has"),D=D.length&&new RegExp(D.join("|")),me=function(tt,at){if(tt===at)return x=!0,0;var xt=!tt.compareDocumentPosition-!at.compareDocumentPosition;return xt||(1&(xt=(tt.ownerDocument||tt)==(at.ownerDocument||at)?tt.compareDocumentPosition(at):1)||!b.sortDetached&&at.compareDocumentPosition(tt)===xt?tt===C||tt.ownerDocument==st&&Pt.contains(st,tt)?-1:at===C||at.ownerDocument==st&&Pt.contains(st,at)?1:y?r.call(y,tt)-r.call(y,at):0:4&xt?-1:1)}),C}for(c in Pt.matches=function(A,W){return Pt(A,null,null,W)},Pt.matchesSelector=function(A,W){if(vi(A),L&&!ce[W+" "]&&(!D||!D.test(W)))try{var Q=z.call(A,W);if(Q||b.disconnectedMatch||A.document&&11!==A.document.nodeType)return Q}catch{ce(W,!0)}return 0<Pt(W,C,null,[A]).length},Pt.contains=function(A,W){return(A.ownerDocument||A)!=C&&vi(A),d.contains(A,W)},Pt.attr=function(A,W){(A.ownerDocument||A)!=C&&vi(A);var Q=f.attrHandle[W.toLowerCase()],tt=Q&&u.call(f.attrHandle,W.toLowerCase())?Q(A,W,!L):void 0;return void 0!==tt?tt:A.getAttribute(W)},Pt.error=function(A){throw new Error("Syntax error, unrecognized expression: "+A)},d.uniqueSort=function(A){var W,Q=[],tt=0,at=0;if(x=!b.sortStable,y=!b.sortStable&&t.call(A,0),it.call(A,me),x){for(;W=A[at++];)W===A[at]&&(tt=Q.push(at));for(;tt--;)B.call(A,Q[tt],1)}return y=null,A},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(t.apply(this)))},(f=d.expr={cacheLength:50,createPseudo:ae,match:li,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(A){return A[1]=A[1].replace(oe,Ce),A[3]=(A[3]||A[4]||A[5]||"").replace(oe,Ce),"~="===A[2]&&(A[3]=" "+A[3]+" "),A.slice(0,4)},CHILD:function(A){return A[1]=A[1].toLowerCase(),"nth"===A[1].slice(0,3)?(A[3]||Pt.error(A[0]),A[4]=+(A[4]?A[5]+(A[6]||1):2*("even"===A[3]||"odd"===A[3])),A[5]=+(A[7]+A[8]||"odd"===A[3])):A[3]&&Pt.error(A[0]),A},PSEUDO:function(A){var W,Q=!A[6]&&A[2];return li.CHILD.test(A[0])?null:(A[3]?A[2]=A[4]||A[5]||"":Q&&ei.test(Q)&&(W=Fi(Q,!0))&&(W=Q.indexOf(")",Q.length-W)-Q.length)&&(A[0]=A[0].slice(0,W),A[2]=Q.slice(0,W)),A.slice(0,3))}},filter:{TAG:function(A){var W=A.replace(oe,Ce).toLowerCase();return"*"===A?function(){return!0}:function(Q){return X(Q,W)}},CLASS:function(A){var W=At[A+" "];return W||(W=new RegExp("(^|"+P+")"+A+"("+P+"|$)"))&&At(A,function(Q){return W.test("string"==typeof Q.className&&Q.className||typeof Q.getAttribute<"u"&&Q.getAttribute("class")||"")})},ATTR:function(A,W,Q){return function(tt){var at=Pt.attr(tt,A);return null==at?"!="===W:!W||(at+="","="===W?at===Q:"!="===W?at!==Q:"^="===W?Q&&0===at.indexOf(Q):"*="===W?Q&&-1<at.indexOf(Q):"$="===W?Q&&at.slice(-Q.length)===Q:"~="===W?-1<(" "+at.replace(Ut," ")+" ").indexOf(Q):"|="===W&&(at===Q||at.slice(0,Q.length+1)===Q+"-"))}},CHILD:function(A,W,Q,tt,at){var xt="nth"!==A.slice(0,3),Ct="last"!==A.slice(-4),Et="of-type"===W;return 1===tt&&0===at?function(wt){return!!wt.parentNode}:function(wt,Yt,Ft){var Ht,Vt,It,ge,_e,ve=xt!==Ct?"nextSibling":"previousSibling",je=wt.parentNode,Re=Et&&wt.nodeName.toLowerCase(),ze=!Ft&&!Et,$t=!1;if(je){if(xt){for(;ve;){for(It=wt;It=It[ve];)if(Et?X(It,Re):1===It.nodeType)return!1;_e=ve="only"===A&&!_e&&"nextSibling"}return!0}if(_e=[Ct?je.firstChild:je.lastChild],Ct&&ze){for($t=(ge=(Ht=(Vt=je[et]||(je[et]={}))[A]||[])[0]===$&&Ht[1])&&Ht[2],It=ge&&je.childNodes[ge];It=++ge&&It&&It[ve]||($t=ge=0)||_e.pop();)if(1===It.nodeType&&++$t&&It===wt){Vt[A]=[$,ge,$t];break}}else if(ze&&($t=ge=(Ht=(Vt=wt[et]||(wt[et]={}))[A]||[])[0]===$&&Ht[1]),!1===$t)for(;(It=++ge&&It&&It[ve]||($t=ge=0)||_e.pop())&&(!(Et?X(It,Re):1===It.nodeType)||!++$t||(ze&&((Vt=It[et]||(It[et]={}))[A]=[$,$t]),It!==wt)););return($t-=at)===tt||$t%tt==0&&0<=$t/tt}}},PSEUDO:function(A,W){var Q,tt=f.pseudos[A]||f.setFilters[A.toLowerCase()]||Pt.error("unsupported pseudo: "+A);return tt[et]?tt(W):1<tt.length?(Q=[A,A,"",W],f.setFilters.hasOwnProperty(A.toLowerCase())?ae(function(at,xt){for(var Ct,Et=tt(at,W),wt=Et.length;wt--;)at[Ct=r.call(at,Et[wt])]=!(xt[Ct]=Et[wt])}):function(at){return tt(at,0,Q)}):tt}},pseudos:{not:ae(function(A){var W=[],Q=[],tt=qi(A.replace(V,"$1"));return tt[et]?ae(function(at,xt,Ct,Et){for(var wt,Yt=tt(at,null,Et,[]),Ft=at.length;Ft--;)(wt=Yt[Ft])&&(at[Ft]=!(xt[Ft]=wt))}):function(at,xt,Ct){return W[0]=at,tt(W,null,Ct,Q),W[0]=null,!Q.pop()}}),has:ae(function(A){return function(W){return 0<Pt(A,W).length}}),contains:ae(function(A){return A=A.replace(oe,Ce),function(W){return-1<(W.textContent||d.text(W)).indexOf(A)}}),lang:ae(function(A){return Li.test(A||"")||Pt.error("unsupported lang: "+A),A=A.replace(oe,Ce).toLowerCase(),function(W){var Q;do{if(Q=L?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return(Q=Q.toLowerCase())===A||0===Q.indexOf(A+"-")}while((W=W.parentNode)&&1===W.nodeType);return!1}}),target:function(A){var W=h.location&&h.location.hash;return W&&W.slice(1)===A.id},root:function(A){return A===O},focus:function(A){return A===function(){try{return C.activeElement}catch{}}()&&C.hasFocus()&&!!(A.type||A.href||~A.tabIndex)},enabled:mi(!1),disabled:mi(!0),checked:function(A){return X(A,"input")&&!!A.checked||X(A,"option")&&!!A.selected},selected:function(A){return!0===A.selected},empty:function(A){for(A=A.firstChild;A;A=A.nextSibling)if(A.nodeType<6)return!1;return!0},parent:function(A){return!f.pseudos.empty(A)},header:function(A){return Oi.test(A.nodeName)},input:function(A){return De.test(A.nodeName)},button:function(A){return X(A,"input")&&"button"===A.type||X(A,"button")},text:function(A){var W;return X(A,"input")&&"text"===A.type&&(null==(W=A.getAttribute("type"))||"text"===W.toLowerCase())},first:Ie(function(){return[0]}),last:Ie(function(A,W){return[W-1]}),eq:Ie(function(A,W,Q){return[Q<0?Q+W:Q]}),even:Ie(function(A,W){for(var Q=0;Q<W;Q+=2)A.push(Q);return A}),odd:Ie(function(A,W){for(var Q=1;Q<W;Q+=2)A.push(Q);return A}),lt:Ie(function(A,W,Q){var tt;for(tt=Q<0?Q+W:W<Q?W:Q;0<=--tt;)A.push(tt);return A}),gt:Ie(function(A,W,Q){for(var tt=Q<0?Q+W:Q;++tt<W;)A.push(tt);return A})}}).pseudos.nth=f.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[c]=ii(c);for(c in{submit:!0,reset:!0})f.pseudos[c]=Ei(c);function Xn(){}function Fi(A,W){var Q,tt,at,xt,Ct,Et,wt,Yt=Rt[A+" "];if(Yt)return W?0:Yt.slice(0);for(Ct=A,Et=[],wt=f.preFilter;Ct;){for(xt in Q&&!(tt=ne.exec(Ct))||(tt&&(Ct=Ct.slice(tt[0].length)||Ct),Et.push(at=[])),Q=!1,(tt=ai.exec(Ct))&&(Q=tt.shift(),at.push({value:Q,type:tt[0].replace(V," ")}),Ct=Ct.slice(Q.length)),f.filter)!(tt=li[xt].exec(Ct))||wt[xt]&&!(tt=wt[xt](tt))||(Q=tt.shift(),at.push({value:Q,type:xt,matches:tt}),Ct=Ct.slice(Q.length));if(!Q)break}return W?Ct.length:Ct?Pt.error(A):Rt(A,Et).slice(0)}function Yi(A){for(var W=0,Q=A.length,tt="";W<Q;W++)tt+=A[W].value;return tt}function Ui(A,W,Q){var tt=W.dir,at=W.next,xt=at||tt,Ct=Q&&"parentNode"===xt,Et=ct++;return W.first?function(wt,Yt,Ft){for(;wt=wt[tt];)if(1===wt.nodeType||Ct)return A(wt,Yt,Ft);return!1}:function(wt,Yt,Ft){var Ht,Vt,It=[$,Et];if(Ft){for(;wt=wt[tt];)if((1===wt.nodeType||Ct)&&A(wt,Yt,Ft))return!0}else for(;wt=wt[tt];)if(1===wt.nodeType||Ct)if(Vt=wt[et]||(wt[et]={}),at&&X(wt,at))wt=wt[tt]||wt;else{if((Ht=Vt[xt])&&Ht[0]===$&&Ht[1]===Et)return It[2]=Ht[2];if((Vt[xt]=It)[2]=A(wt,Yt,Ft))return!0}return!1}}function yn(A){return 1<A.length?function(W,Q,tt){for(var at=A.length;at--;)if(!A[at](W,Q,tt))return!1;return!0}:A[0]}function Vi(A,W,Q,tt,at){for(var xt,Ct=[],Et=0,wt=A.length,Yt=null!=W;Et<wt;Et++)(xt=A[Et])&&(Q&&!Q(xt,tt,at)||(Ct.push(xt),Yt&&W.push(Et)));return Ct}function Gi(A,W,Q,tt,at,xt){return tt&&!tt[et]&&(tt=Gi(tt)),at&&!at[et]&&(at=Gi(at,xt)),ae(function(Ct,Et,wt,Yt){var Ft,Ht,Vt,It,ge=[],_e=[],ve=Et.length,je=Ct||function(ze,$t,ni){for(var Ge=0,Ki=$t.length;Ge<Ki;Ge++)Pt(ze,$t[Ge],ni);return ni}(W||"*",wt.nodeType?[wt]:wt,[]),Re=!A||!Ct&&W?je:Vi(je,ge,A,wt,Yt);if(Q?Q(Re,It=at||(Ct?A:ve||tt)?[]:Et,wt,Yt):It=Re,tt)for(Ft=Vi(It,_e),tt(Ft,[],wt,Yt),Ht=Ft.length;Ht--;)(Vt=Ft[Ht])&&(It[_e[Ht]]=!(Re[_e[Ht]]=Vt));if(Ct){if(at||A){if(at){for(Ft=[],Ht=It.length;Ht--;)(Vt=It[Ht])&&Ft.push(Re[Ht]=Vt);at(null,It=[],Ft,Yt)}for(Ht=It.length;Ht--;)(Vt=It[Ht])&&-1<(Ft=at?r.call(Ct,Vt):ge[Ht])&&(Ct[Ft]=!(Et[Ft]=Vt))}}else It=Vi(It===Et?It.splice(ve,It.length):It),at?at(null,Et,It,Yt):Z.apply(Et,It)})}function _n(A){for(var W,Q,tt,at=A.length,xt=f.relative[A[0].type],Ct=xt||f.relative[" "],Et=xt?1:0,wt=Ui(function(Ht){return Ht===W},Ct,!0),Yt=Ui(function(Ht){return-1<r.call(W,Ht)},Ct,!0),Ft=[function(Ht,Vt,It){var ge=!xt&&(It||Vt!=m)||((W=Vt).nodeType?wt(Ht,Vt,It):Yt(Ht,Vt,It));return W=null,ge}];Et<at;Et++)if(Q=f.relative[A[Et].type])Ft=[Ui(yn(Ft),Q)];else{if((Q=f.filter[A[Et].type].apply(null,A[Et].matches))[et]){for(tt=++Et;tt<at&&!f.relative[A[tt].type];tt++);return Gi(1<Et&&yn(Ft),1<Et&&Yi(A.slice(0,Et-1).concat({value:" "===A[Et-2].type?"*":""})).replace(V,"$1"),Q,Et<tt&&_n(A.slice(Et,tt)),tt<at&&_n(A=A.slice(tt)),tt<at&&Yi(A))}Ft.push(Q)}return yn(Ft)}function qi(A,W){var Q,tt,at,xt,Ct,Et,wt=[],Yt=[],Ft=Bt[A+" "];if(!Ft){for(W||(W=Fi(A)),Q=W.length;Q--;)(Ft=_n(W[Q]))[et]?wt.push(Ft):Yt.push(Ft);(Ft=Bt(A,(tt=Yt,xt=0<(at=wt).length,Ct=0<tt.length,Et=function(Ht,Vt,It,ge,_e){var ve,je,Re,ze=0,$t="0",ni=Ht&&[],Ge=[],Ki=m,ki=Ht||Ct&&f.find.TAG("*",_e),I=$+=null==Ki?1:Math.random()||.1,p=ki.length;for(_e&&(m=Vt==C||Vt||_e);$t!==p&&null!=(ve=ki[$t]);$t++){if(Ct&&ve){for(je=0,Vt||ve.ownerDocument==C||(vi(ve),It=!L);Re=tt[je++];)if(Re(ve,Vt||C,It)){Z.call(ge,ve);break}_e&&($=I)}xt&&((ve=!Re&&ve)&&ze--,Ht&&ni.push(ve))}if(ze+=$t,xt&&$t!==ze){for(je=0;Re=at[je++];)Re(ni,Ge,Vt,It);if(Ht){if(0<ze)for(;$t--;)ni[$t]||Ge[$t]||(Ge[$t]=K.call(ge));Ge=Vi(Ge)}Z.apply(ge,Ge),_e&&!Ht&&0<Ge.length&&1<ze+at.length&&d.uniqueSort(ge)}return _e&&($=I,m=Ki),ni},xt?ae(Et):Et))).selector=A}return Ft}function $i(A,W,Q,tt){var at,xt,Ct,Et,wt,Yt="function"==typeof A&&A,Ft=!tt&&Fi(A=Yt.selector||A);if(Q=Q||[],1===Ft.length){if(2<(xt=Ft[0]=Ft[0].slice(0)).length&&"ID"===(Ct=xt[0]).type&&9===W.nodeType&&L&&f.relative[xt[1].type]){if(!(W=(f.find.ID(Ct.matches[0].replace(oe,Ce),W)||[])[0]))return Q;Yt&&(W=W.parentNode),A=A.slice(xt.shift().value.length)}for(at=li.needsContext.test(A)?0:xt.length;at--&&!f.relative[Et=(Ct=xt[at]).type];)if((wt=f.find[Et])&&(tt=wt(Ct.matches[0].replace(oe,Ce),he.test(xt[0].type)&&vn(W.parentNode)||W))){if(xt.splice(at,1),!(A=tt.length&&Yi(xt)))return Z.apply(Q,tt),Q;break}}return(Yt||qi(A,Ft))(tt,W,!L,Q,!W||he.test(A)&&vn(W.parentNode)||W),Q}Xn.prototype=f.filters=f.pseudos,f.setFilters=new Xn,b.sortStable=et.split("").sort(me).join("")===et,vi(),b.sortDetached=te(function(A){return 1&A.compareDocumentPosition(C.createElement("fieldset"))}),d.find=Pt,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,Pt.compile=qi,Pt.select=$i,Pt.setDocument=vi,Pt.tokenize=Fi,Pt.escape=d.escapeSelector,Pt.getText=d.text,Pt.isXML=d.isXMLDoc,Pt.selectors=d.expr,Pt.support=d.support,Pt.uniqueSort=d.uniqueSort}();var ut=function(c,f,m){for(var y=[],x=void 0!==m;(c=c[f])&&9!==c.nodeType;)if(1===c.nodeType){if(x&&d(c).is(m))break;y.push(c)}return y},dt=function(c,f){for(var m=[];c;c=c.nextSibling)1===c.nodeType&&c!==f&&m.push(c);return m},yt=d.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function pt(c,f,m){return _(f)?d.grep(c,function(y,x){return!!f.call(y,x,y)!==m}):f.nodeType?d.grep(c,function(y){return y===f!==m}):"string"!=typeof f?d.grep(c,function(y){return-1<r.call(f,y)!==m}):d.filter(f,c,m)}d.filter=function(c,f,m){var y=f[0];return m&&(c=":not("+c+")"),1===f.length&&1===y.nodeType?d.find.matchesSelector(y,c)?[y]:[]:d.find.matches(c,d.grep(f,function(x){return 1===x.nodeType}))},d.fn.extend({find:function(c){var f,m,y=this.length,x=this;if("string"!=typeof c)return this.pushStack(d(c).filter(function(){for(f=0;f<y;f++)if(d.contains(x[f],this))return!0}));for(m=this.pushStack([]),f=0;f<y;f++)d.find(c,x[f],m);return 1<y?d.uniqueSort(m):m},filter:function(c){return this.pushStack(pt(this,c||[],!1))},not:function(c){return this.pushStack(pt(this,c||[],!0))},is:function(c){return!!pt(this,"string"==typeof c&&yt.test(c)?d(c):c||[],!1).length}});var mt,Dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(d.fn.init=function(c,f,m){var y,x;if(!c)return this;if(m=m||mt,"string"==typeof c){if(!(y="<"===c[0]&&">"===c[c.length-1]&&3<=c.length?[null,c,null]:Dt.exec(c))||!y[1]&&f)return!f||f.jquery?(f||m).find(c):this.constructor(f).find(c);if(y[1]){if(d.merge(this,d.parseHTML(y[1],(f=f instanceof d?f[0]:f)&&f.nodeType?f.ownerDocument||f:E,!0)),U.test(y[1])&&d.isPlainObject(f))for(y in f)_(this[y])?this[y](f[y]):this.attr(y,f[y]);return this}return(x=E.getElementById(y[2]))&&(this[0]=x,this.length=1),this}return c.nodeType?(this[0]=c,this.length=1,this):_(c)?void 0!==m.ready?m.ready(c):c(d):d.makeArray(c,this)}).prototype=d.fn,mt=d(E);var jt=/^(?:parents|prev(?:Until|All))/,Xt={children:!0,contents:!0,next:!0,prev:!0};function Zt(c,f){for(;(c=c[f])&&1!==c.nodeType;);return c}d.fn.extend({has:function(c){var f=d(c,this),m=f.length;return this.filter(function(){for(var y=0;y<m;y++)if(d.contains(this,f[y]))return!0})},closest:function(c,f){var m,y=0,x=this.length,C=[],O="string"!=typeof c&&d(c);if(!yt.test(c))for(;y<x;y++)for(m=this[y];m&&m!==f;m=m.parentNode)if(m.nodeType<11&&(O?-1<O.index(m):1===m.nodeType&&d.find.matchesSelector(m,c))){C.push(m);break}return this.pushStack(1<C.length?d.uniqueSort(C):C)},index:function(c){return c?"string"==typeof c?r.call(d(c),this[0]):r.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,f){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(c,f))))},addBack:function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))}}),d.each({parent:function(c){var f=c.parentNode;return f&&11!==f.nodeType?f:null},parents:function(c){return ut(c,"parentNode")},parentsUntil:function(c,f,m){return ut(c,"parentNode",m)},next:function(c){return Zt(c,"nextSibling")},prev:function(c){return Zt(c,"previousSibling")},nextAll:function(c){return ut(c,"nextSibling")},prevAll:function(c){return ut(c,"previousSibling")},nextUntil:function(c,f,m){return ut(c,"nextSibling",m)},prevUntil:function(c,f,m){return ut(c,"previousSibling",m)},siblings:function(c){return dt((c.parentNode||{}).firstChild,c)},children:function(c){return dt(c.firstChild)},contents:function(c){return null!=c.contentDocument&&l(c.contentDocument)?c.contentDocument:(X(c,"template")&&(c=c.content||c),d.merge([],c.childNodes))}},function(c,f){d.fn[c]=function(m,y){var x=d.map(this,f,m);return"Until"!==c.slice(-5)&&(y=m),y&&"string"==typeof y&&(x=d.filter(y,x)),1<this.length&&(Xt[c]||d.uniqueSort(x),jt.test(c)&&x.reverse()),this.pushStack(x)}});var qt=/[^\x20\t\r\n\f]+/g;function gt(c){return c}function Kt(c){throw c}function Qt(c,f,m,y){var x;try{c&&_(x=c.promise)?x.call(c).done(f).fail(m):c&&_(x=c.then)?x.call(c,f,m):f.apply(void 0,[c].slice(y))}catch(C){m.apply(void 0,[C])}}d.Callbacks=function(c){var m;c="string"==typeof c?(m={},d.each(c.match(qt)||[],function($,ct){m[ct]=!0}),m):d.extend({},c);var y,x,C,O,L=[],D=[],z=-1,Z=function(){for(O=O||c.once,C=y=!0;D.length;z=-1)for(x=D.shift();++z<L.length;)!1===L[z].apply(x[0],x[1])&&c.stopOnFalse&&(z=L.length,x=!1);c.memory||(x=!1),y=!1,O&&(L=x?[]:"")},et={add:function(){return L&&(x&&!y&&(z=L.length-1,D.push(x)),function $(ct){d.each(ct,function(At,Rt){_(Rt)?c.unique&&et.has(Rt)||L.push(Rt):Rt&&Rt.length&&"string"!==G(Rt)&&$(Rt)})}(arguments),x&&!y&&Z()),this},remove:function(){return d.each(arguments,function($,ct){for(var At;-1<(At=d.inArray(ct,L,At));)L.splice(At,1),At<=z&&z--}),this},has:function($){return $?-1<d.inArray($,L):0<L.length},empty:function(){return L&&(L=[]),this},disable:function(){return O=D=[],L=x="",this},disabled:function(){return!L},lock:function(){return O=D=[],x||y||(L=x=""),this},locked:function(){return!!O},fireWith:function($,ct){return O||(ct=[$,(ct=ct||[]).slice?ct.slice():ct],D.push(ct),y||Z()),this},fire:function(){return et.fireWith(this,arguments),this},fired:function(){return!!C}};return et},d.extend({Deferred:function(c){var f=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],m="pending",y={state:function(){return m},always:function(){return x.done(arguments).fail(arguments),this},catch:function(C){return y.then(null,C)},pipe:function(){var C=arguments;return d.Deferred(function(O){d.each(f,function(L,D){var z=_(C[D[4]])&&C[D[4]];x[D[1]](function(){var Z=z&&z.apply(this,arguments);Z&&_(Z.promise)?Z.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[D[0]+"With"](this,z?[Z]:arguments)})}),C=null}).promise()},then:function(C,O,L){var D=0;function z(Z,et,$,ct){return function(){var At=this,Rt=arguments,Bt=function(){var me,Je;if(!(Z<D)){if((me=$.apply(At,Rt))===et.promise())throw new TypeError("Thenable self-resolution");_(Je=me&&("object"==typeof me||"function"==typeof me)&&me.then)?ct?Je.call(me,z(D,et,gt,ct),z(D,et,Kt,ct)):(D++,Je.call(me,z(D,et,gt,ct),z(D,et,Kt,ct),z(D,et,gt,et.notifyWith))):($!==gt&&(At=void 0,Rt=[me]),(ct||et.resolveWith)(At,Rt))}},ce=ct?Bt:function(){try{Bt()}catch(me){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(me,ce.error),D<=Z+1&&($!==Kt&&(At=void 0,Rt=[me]),et.rejectWith(At,Rt))}};Z?ce():(d.Deferred.getErrorHook?ce.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(ce.error=d.Deferred.getStackHook()),h.setTimeout(ce))}}return d.Deferred(function(Z){f[0][3].add(z(0,Z,_(L)?L:gt,Z.notifyWith)),f[1][3].add(z(0,Z,_(C)?C:gt)),f[2][3].add(z(0,Z,_(O)?O:Kt))}).promise()},promise:function(C){return null!=C?d.extend(C,y):y}},x={};return d.each(f,function(C,O){var L=O[2],D=O[5];y[O[1]]=L.add,D&&L.add(function(){m=D},f[3-C][2].disable,f[3-C][3].disable,f[0][2].lock,f[0][3].lock),L.add(O[3].fire),x[O[0]]=function(){return x[O[0]+"With"](this===x?void 0:this,arguments),this},x[O[0]+"With"]=L.fireWith}),y.promise(x),c&&c.call(x,x),x},when:function(c){var f=arguments.length,m=f,y=Array(m),x=t.call(arguments),C=d.Deferred(),O=function(L){return function(D){y[L]=this,x[L]=1<arguments.length?t.call(arguments):D,--f||C.resolveWith(y,x)}};if(f<=1&&(Qt(c,C.done(O(m)).resolve,C.reject,!f),"pending"===C.state()||_(x[m]&&x[m].then)))return C.then();for(;m--;)Qt(x[m],O(m),C.reject);return C.promise()}});var Be=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(c,f){h.console&&h.console.warn&&c&&Be.test(c.name)&&h.console.warn("jQuery.Deferred exception: "+c.message,c.stack,f)},d.readyException=function(c){h.setTimeout(function(){throw c})};var Me=d.Deferred();function Se(){E.removeEventListener("DOMContentLoaded",Se),h.removeEventListener("load",Se),d.ready()}d.fn.ready=function(c){return Me.then(c).catch(function(f){d.readyException(f)}),this},d.extend({isReady:!1,readyWait:1,ready:function(c){(!0===c?--d.readyWait:d.isReady)||(d.isReady=!0)!==c&&0<--d.readyWait||Me.resolveWith(E,[d])}}),d.ready.then=Me.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?h.setTimeout(d.ready):(E.addEventListener("DOMContentLoaded",Se),h.addEventListener("load",Se));var fe=function(c,f,m,y,x,C,O){var L=0,D=c.length,z=null==m;if("object"===G(m))for(L in x=!0,m)fe(c,f,L,m[L],!0,C,O);else if(void 0!==y&&(x=!0,_(y)||(O=!0),z&&(O?(f.call(c,y),f=null):(z=f,f=function(Z,et,$){return z.call(d(Z),$)})),f))for(;L<D;L++)f(c[L],m,O?y:y.call(c[L],L,f(c[L],m)));return x?c:z?f.call(c):D?f(c[0],m):C},Le=/^-ms-/,Fe=/-([a-z])/g;function pe(c,f){return f.toUpperCase()}function ee(c){return c.replace(Le,"ms-").replace(Fe,pe)}var be=function(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType};function xe(){this.expando=d.expando+xe.uid++}xe.uid=1,xe.prototype={cache:function(c){var f=c[this.expando];return f||(f={},be(c)&&(c.nodeType?c[this.expando]=f:Object.defineProperty(c,this.expando,{value:f,configurable:!0}))),f},set:function(c,f,m){var y,x=this.cache(c);if("string"==typeof f)x[ee(f)]=m;else for(y in f)x[ee(y)]=f[y];return x},get:function(c,f){return void 0===f?this.cache(c):c[this.expando]&&c[this.expando][ee(f)]},access:function(c,f,m){return void 0===f||f&&"string"==typeof f&&void 0===m?this.get(c,f):(this.set(c,f,m),void 0!==m?m:f)},remove:function(c,f){var m,y=c[this.expando];if(void 0!==y){if(void 0!==f)for((m=(f=Array.isArray(f)?f.map(ee):(f=ee(f))in y?[f]:f.match(qt)||[]).length);m--;)delete y[f[m]];(void 0===f||d.isEmptyObject(y))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var f=c[this.expando];return void 0!==f&&!d.isEmptyObject(f)}};var Ot=new xe,de=new xe,$e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ri=/[A-Z]/g;function Te(c,f,m){var y,x;if(void 0===m&&1===c.nodeType)if(y="data-"+f.replace(ri,"-$&").toLowerCase(),"string"==typeof(m=c.getAttribute(y))){try{m="true"===(x=m)||"false"!==x&&("null"===x?null:x===+x+""?+x:$e.test(x)?JSON.parse(x):x)}catch{}de.set(c,f,m)}else m=void 0;return m}d.extend({hasData:function(c){return de.hasData(c)||Ot.hasData(c)},data:function(c,f,m){return de.access(c,f,m)},removeData:function(c,f){de.remove(c,f)},_data:function(c,f,m){return Ot.access(c,f,m)},_removeData:function(c,f){Ot.remove(c,f)}}),d.fn.extend({data:function(c,f){var m,y,x,C=this[0],O=C&&C.attributes;if(void 0===c){if(this.length&&(x=de.get(C),1===C.nodeType&&!Ot.get(C,"hasDataAttrs"))){for(m=O.length;m--;)O[m]&&0===(y=O[m].name).indexOf("data-")&&(y=ee(y.slice(5)),Te(C,y,x[y]));Ot.set(C,"hasDataAttrs",!0)}return x}return"object"==typeof c?this.each(function(){de.set(this,c)}):fe(this,function(L){var D;if(C&&void 0===L)return void 0!==(D=de.get(C,c))||void 0!==(D=Te(C,c))?D:void 0;this.each(function(){de.set(this,c,L)})},null,f,1<arguments.length,null,!0)},removeData:function(c){return this.each(function(){de.remove(this,c)})}}),d.extend({queue:function(c,f,m){var y;if(c)return y=Ot.get(c,f=(f||"fx")+"queue"),m&&(!y||Array.isArray(m)?y=Ot.access(c,f,d.makeArray(m)):y.push(m)),y||[]},dequeue:function(c,f){var m=d.queue(c,f=f||"fx"),y=m.length,x=m.shift(),C=d._queueHooks(c,f);"inprogress"===x&&(x=m.shift(),y--),x&&("fx"===f&&m.unshift("inprogress"),delete C.stop,x.call(c,function(){d.dequeue(c,f)},C)),!y&&C&&C.empty.fire()},_queueHooks:function(c,f){var m=f+"queueHooks";return Ot.get(c,m)||Ot.access(c,m,{empty:d.Callbacks("once memory").add(function(){Ot.remove(c,[f+"queue",m])})})}}),d.fn.extend({queue:function(c,f){var m=2;return"string"!=typeof c&&(f=c,c="fx",m--),arguments.length<m?d.queue(this[0],c):void 0===f?this:this.each(function(){var y=d.queue(this,c,f);d._queueHooks(this,c),"fx"===c&&"inprogress"!==y[0]&&d.dequeue(this,c)})},dequeue:function(c){return this.each(function(){d.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,f){var m,y=1,x=d.Deferred(),C=this,O=this.length,L=function(){--y||x.resolveWith(C,[C])};for("string"!=typeof c&&(f=c,c=void 0),c=c||"fx";O--;)(m=Ot.get(C[O],c+"queueHooks"))&&m.empty&&(y++,m.empty.add(L));return L(),x.promise(f)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Jt=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],le=E.documentElement,ye=function(c){return d.contains(c.ownerDocument,c)},fi={composed:!0};le.getRootNode&&(ye=function(c){return d.contains(c.ownerDocument,c)||c.getRootNode(fi)===c.ownerDocument});var Ee=function(c,f){return"none"===(c=f||c).style.display||""===c.style.display&&ye(c)&&"none"===d.css(c,"display")};function T(c,f,m,y){var x,C,O=20,L=y?function(){return y.cur()}:function(){return d.css(c,f,"")},D=L(),z=m&&m[3]||(d.cssNumber[f]?"":"px"),Z=c.nodeType&&(d.cssNumber[f]||"px"!==z&&+D)&&Jt.exec(d.css(c,f));if(Z&&Z[3]!==z){for(z=z||Z[3],Z=+(D/=2)||1;O--;)d.style(c,f,Z+z),(1-C)*(1-(C=L()/D||.5))<=0&&(O=0),Z/=C;d.style(c,f,(Z*=2)+z),m=m||[]}return m&&(Z=+Z||+D||0,x=m[1]?Z+(m[1]+1)*m[2]:+m[2],y&&(y.unit=z,y.start=Z,y.end=x)),x}var j={};function N(c,f){for(var m,y,x,C,O,L,D,z=[],Z=0,et=c.length;Z<et;Z++)(y=c[Z]).style&&(m=y.style.display,f?("none"===m&&(z[Z]=Ot.get(y,"display")||null,z[Z]||(y.style.display="")),""===y.style.display&&Ee(y)&&(z[Z]=(D=O=C=void 0,O=(x=y).ownerDocument,(D=j[L=x.nodeName])||(C=O.body.appendChild(O.createElement(L)),D=d.css(C,"display"),C.parentNode.removeChild(C),"none"===D&&(D="block"),j[L]=D)))):"none"!==m&&(z[Z]="none",Ot.set(y,"display",m)));for(Z=0;Z<et;Z++)null!=z[Z]&&(c[Z].style.display=z[Z]);return c}d.fn.extend({show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(c){return"boolean"==typeof c?c?this.show():this.hide():this.each(function(){Ee(this)?d(this).show():d(this).hide()})}});var Y,ot,lt=/^(?:checkbox|radio)$/i,rt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_t=/^$|^module$|\/(?:java|ecma)script/i;Y=E.createDocumentFragment().appendChild(E.createElement("div")),(ot=E.createElement("input")).setAttribute("type","radio"),ot.setAttribute("checked","checked"),ot.setAttribute("name","t"),Y.appendChild(ot),b.checkClone=Y.cloneNode(!0).cloneNode(!0).lastChild.checked,Y.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!Y.cloneNode(!0).lastChild.defaultValue,Y.innerHTML="<option></option>",b.option=!!Y.lastChild;var vt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function St(c,f){var m;return m=typeof c.getElementsByTagName<"u"?c.getElementsByTagName(f||"*"):typeof c.querySelectorAll<"u"?c.querySelectorAll(f||"*"):[],void 0===f||f&&X(c,f)?d.merge([c],m):m}function Lt(c,f){for(var m=0,y=c.length;m<y;m++)Ot.set(c[m],"globalEval",!f||Ot.get(f[m],"globalEval"))}vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,b.option||(vt.optgroup=vt.option=[1,"<select multiple='multiple'>","</select>"]);var Tt=/<|&#?\w+;/;function Mt(c,f,m,y,x){for(var C,O,L,D,z,Z,et=f.createDocumentFragment(),$=[],ct=0,At=c.length;ct<At;ct++)if((C=c[ct])||0===C)if("object"===G(C))d.merge($,C.nodeType?[C]:C);else if(Tt.test(C)){for(O=O||et.appendChild(f.createElement("div")),L=(rt.exec(C)||["",""])[1].toLowerCase(),O.innerHTML=(D=vt[L]||vt._default)[1]+d.htmlPrefilter(C)+D[2],Z=D[0];Z--;)O=O.lastChild;d.merge($,O.childNodes),(O=et.firstChild).textContent=""}else $.push(f.createTextNode(C));for(et.textContent="",ct=0;C=$[ct++];)if(y&&-1<d.inArray(C,y))x&&x.push(C);else if(z=ye(C),O=St(et.appendChild(C),"script"),z&&Lt(O),m)for(Z=0;C=O[Z++];)_t.test(C.type||"")&&m.push(C);return et}var Wt=/^([^.]*)(?:\.(.+)|)/;function Nt(){return!0}function ie(){return!1}function Ne(c,f,m,y,x,C){var O,L;if("object"==typeof f){for(L in"string"!=typeof m&&(y=y||m,m=void 0),f)Ne(c,L,m,y,f[L],C);return c}if(null==y&&null==x?(x=m,y=m=void 0):null==x&&("string"==typeof m?(x=y,y=void 0):(x=y,y=m,m=void 0)),!1===x)x=ie;else if(!x)return c;return 1===C&&(O=x,(x=function(D){return d().off(D),O.apply(this,arguments)}).guid=O.guid||(O.guid=d.guid++)),c.each(function(){d.event.add(this,f,x,y,m)})}function Ue(c,f,m){m?(Ot.set(c,f,!1),d.event.add(c,f,{namespace:!1,handler:function(y){var x,C=Ot.get(this,f);if(1&y.isTrigger&&this[f]){if(C)(d.event.special[f]||{}).delegateType&&y.stopPropagation();else if(C=t.call(arguments),Ot.set(this,f,C),this[f](),x=Ot.get(this,f),Ot.set(this,f,!1),C!==x)return y.stopImmediatePropagation(),y.preventDefault(),x}else C&&(Ot.set(this,f,d.event.trigger(C[0],C.slice(1),this)),y.stopPropagation(),y.isImmediatePropagationStopped=Nt)}})):void 0===Ot.get(c,f)&&d.event.add(c,f,Nt)}d.event={global:{},add:function(c,f,m,y,x){var C,O,L,D,z,Z,et,$,ct,At,Rt,Bt=Ot.get(c);if(be(c))for(m.handler&&(m=(C=m).handler,x=C.selector),x&&d.find.matchesSelector(le,x),m.guid||(m.guid=d.guid++),(D=Bt.events)||(D=Bt.events=Object.create(null)),(O=Bt.handle)||(O=Bt.handle=function(ce){return typeof d<"u"&&d.event.triggered!==ce.type?d.event.dispatch.apply(c,arguments):void 0}),z=(f=(f||"").match(qt)||[""]).length;z--;)ct=Rt=(L=Wt.exec(f[z])||[])[1],At=(L[2]||"").split(".").sort(),ct&&(et=d.event.special[ct]||{},et=d.event.special[ct=(x?et.delegateType:et.bindType)||ct]||{},Z=d.extend({type:ct,origType:Rt,data:y,handler:m,guid:m.guid,selector:x,needsContext:x&&d.expr.match.needsContext.test(x),namespace:At.join(".")},C),($=D[ct])||(($=D[ct]=[]).delegateCount=0,et.setup&&!1!==et.setup.call(c,y,At,O)||c.addEventListener&&c.addEventListener(ct,O)),et.add&&(et.add.call(c,Z),Z.handler.guid||(Z.handler.guid=m.guid)),x?$.splice($.delegateCount++,0,Z):$.push(Z),d.event.global[ct]=!0)},remove:function(c,f,m,y,x){var C,O,L,D,z,Z,et,$,ct,At,Rt,Bt=Ot.hasData(c)&&Ot.get(c);if(Bt&&(D=Bt.events)){for(z=(f=(f||"").match(qt)||[""]).length;z--;)if(ct=Rt=(L=Wt.exec(f[z])||[])[1],At=(L[2]||"").split(".").sort(),ct){for(et=d.event.special[ct]||{},$=D[ct=(y?et.delegateType:et.bindType)||ct]||[],L=L[2]&&new RegExp("(^|\\.)"+At.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=C=$.length;C--;)Z=$[C],!x&&Rt!==Z.origType||m&&m.guid!==Z.guid||L&&!L.test(Z.namespace)||y&&y!==Z.selector&&("**"!==y||!Z.selector)||($.splice(C,1),Z.selector&&$.delegateCount--,et.remove&&et.remove.call(c,Z));O&&!$.length&&(et.teardown&&!1!==et.teardown.call(c,At,Bt.handle)||d.removeEvent(c,ct,Bt.handle),delete D[ct])}else for(ct in D)d.event.remove(c,ct+f[z],m,y,!0);d.isEmptyObject(D)&&Ot.remove(c,"handle events")}},dispatch:function(c){var f,m,y,x,C,O,L=new Array(arguments.length),D=d.event.fix(c),z=(Ot.get(this,"events")||Object.create(null))[D.type]||[],Z=d.event.special[D.type]||{};for(L[0]=D,f=1;f<arguments.length;f++)L[f]=arguments[f];if(D.delegateTarget=this,!Z.preDispatch||!1!==Z.preDispatch.call(this,D)){for(O=d.event.handlers.call(this,D,z),f=0;(x=O[f++])&&!D.isPropagationStopped();)for(D.currentTarget=x.elem,m=0;(C=x.handlers[m++])&&!D.isImmediatePropagationStopped();)D.rnamespace&&!1!==C.namespace&&!D.rnamespace.test(C.namespace)||(D.handleObj=C,D.data=C.data,void 0!==(y=((d.event.special[C.origType]||{}).handle||C.handler).apply(x.elem,L))&&!1===(D.result=y)&&(D.preventDefault(),D.stopPropagation()));return Z.postDispatch&&Z.postDispatch.call(this,D),D.result}},handlers:function(c,f){var m,y,x,C,O,L=[],D=f.delegateCount,z=c.target;if(D&&z.nodeType&&!("click"===c.type&&1<=c.button))for(;z!==this;z=z.parentNode||this)if(1===z.nodeType&&("click"!==c.type||!0!==z.disabled)){for(C=[],O={},m=0;m<D;m++)void 0===O[x=(y=f[m]).selector+" "]&&(O[x]=y.needsContext?-1<d(x,this).index(z):d.find(x,this,null,[z]).length),O[x]&&C.push(y);C.length&&L.push({elem:z,handlers:C})}return z=this,D<f.length&&L.push({elem:z,handlers:f.slice(D)}),L},addProp:function(c,f){Object.defineProperty(d.Event.prototype,c,{enumerable:!0,configurable:!0,get:_(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(m){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:m})}})},fix:function(c){return c[d.expando]?c:new d.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var f=this||c;return lt.test(f.type)&&f.click&&X(f,"input")&&Ue(f,"click",!0),!1},trigger:function(c){var f=this||c;return lt.test(f.type)&&f.click&&X(f,"input")&&Ue(f,"click"),!0},_default:function(c){var f=c.target;return lt.test(f.type)&&f.click&&X(f,"input")&&Ot.get(f,"click")||X(f,"a")}},beforeunload:{postDispatch:function(c){void 0!==c.result&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}},d.removeEvent=function(c,f,m){c.removeEventListener&&c.removeEventListener(f,m)},d.Event=function(c,f){if(!(this instanceof d.Event))return new d.Event(c,f);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?Nt:ie,this.target=c.target&&3===c.target.nodeType?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,f&&d.extend(this,f),this.timeStamp=c&&c.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:ie,isPropagationStopped:ie,isImmediatePropagationStopped:ie,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=Nt,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=Nt,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=Nt,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(c,f){function m(y){if(E.documentMode){var x=Ot.get(this,"handle"),C=d.event.fix(y);C.type="focusin"===y.type?"focus":"blur",C.isSimulated=!0,x(y),C.target===C.currentTarget&&x(C)}else d.event.simulate(f,y.target,d.event.fix(y))}d.event.special[c]={setup:function(){var y;if(Ue(this,c,!0),!E.documentMode)return!1;(y=Ot.get(this,f))||this.addEventListener(f,m),Ot.set(this,f,(y||0)+1)},trigger:function(){return Ue(this,c),!0},teardown:function(){var y;if(!E.documentMode)return!1;(y=Ot.get(this,f)-1)?Ot.set(this,f,y):(this.removeEventListener(f,m),Ot.remove(this,f))},_default:function(y){return Ot.get(y.target,c)},delegateType:f},d.event.special[f]={setup:function(){var y=this.ownerDocument||this.document||this,x=E.documentMode?this:y,C=Ot.get(x,f);C||(E.documentMode?this.addEventListener(f,m):y.addEventListener(c,m,!0)),Ot.set(x,f,(C||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,x=E.documentMode?this:y,C=Ot.get(x,f)-1;C?Ot.set(x,f,C):(E.documentMode?this.removeEventListener(f,m):y.removeEventListener(c,m,!0),Ot.remove(x,f))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,f){d.event.special[c]={delegateType:f,bindType:f,handle:function(m){var y,x=m.relatedTarget,C=m.handleObj;return x&&(x===this||d.contains(this,x))||(m.type=C.origType,y=C.handler.apply(this,arguments),m.type=f),y}}}),d.fn.extend({on:function(c,f,m,y){return Ne(this,c,f,m,y)},one:function(c,f,m,y){return Ne(this,c,f,m,y,1)},off:function(c,f,m){var y,x;if(c&&c.preventDefault&&c.handleObj)return y=c.handleObj,d(c.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if("object"==typeof c){for(x in c)this.off(x,f,c[x]);return this}return!1!==f&&"function"!=typeof f||(m=f,f=void 0),!1===m&&(m=ie),this.each(function(){d.event.remove(this,c,m,f)})}});var ke=/<script|<style|<link/i,si=/checked\s*(?:[^=]|=\s*.checked.)/i,Qi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function yi(c,f){return X(c,"table")&&X(11!==f.nodeType?f:f.firstChild,"tr")&&d(c).children("tbody")[0]||c}function wi(c){return c.type=(null!==c.getAttribute("type"))+"/"+c.type,c}function Bi(c){return"true/"===(c.type||"").slice(0,5)?c.type=c.type.slice(5):c.removeAttribute("type"),c}function xn(c,f){var m,y,x,C,O,L;if(1===f.nodeType){if(Ot.hasData(c)&&(L=Ot.get(c).events))for(x in Ot.remove(f,"handle events"),L)for(m=0,y=L[x].length;m<y;m++)d.event.add(f,x,L[x][m]);de.hasData(c)&&(C=de.access(c),O=d.extend({},C),de.set(f,O))}}function di(c,f,m,y){f=e(f);var x,C,O,L,D,z,Z=0,et=c.length,$=et-1,ct=f[0],At=_(ct);if(At||1<et&&"string"==typeof ct&&!b.checkClone&&si.test(ct))return c.each(function(Rt){var Bt=c.eq(Rt);At&&(f[0]=ct.call(this,Rt,Bt.html())),di(Bt,f,m,y)});if(et&&(C=(x=Mt(f,c[0].ownerDocument,!1,c,y)).firstChild,1===x.childNodes.length&&(x=C),C||y)){for(L=(O=d.map(St(x,"script"),wi)).length;Z<et;Z++)D=x,Z!==$&&(D=d.clone(D,!0,!0),L&&d.merge(O,St(D,"script"))),m.call(c[Z],D,Z);if(L)for(z=O[O.length-1].ownerDocument,d.map(O,Bi),Z=0;Z<L;Z++)_t.test((D=O[Z]).type||"")&&!Ot.access(D,"globalEval")&&d.contains(z,D)&&(D.src&&"module"!==(D.type||"").toLowerCase()?d._evalUrl&&!D.noModule&&d._evalUrl(D.src,{nonce:D.nonce||D.getAttribute("nonce")},z):F(D.textContent.replace(Qi,""),D,z))}return c}function Cn(c,f,m){for(var y,x=f?d.filter(f,c):c,C=0;null!=(y=x[C]);C++)m||1!==y.nodeType||d.cleanData(St(y)),y.parentNode&&(m&&ye(y)&&Lt(St(y,"script")),y.parentNode.removeChild(y));return c}d.extend({htmlPrefilter:function(c){return c},clone:function(c,f,m){var y,x,C,O,L,D,z,Z=c.cloneNode(!0),et=ye(c);if(!(b.noCloneChecked||1!==c.nodeType&&11!==c.nodeType||d.isXMLDoc(c)))for(O=St(Z),y=0,x=(C=St(c)).length;y<x;y++)L=C[y],"input"===(z=(D=O[y]).nodeName.toLowerCase())&&lt.test(L.type)?D.checked=L.checked:"input"!==z&&"textarea"!==z||(D.defaultValue=L.defaultValue);if(f)if(m)for(C=C||St(c),O=O||St(Z),y=0,x=C.length;y<x;y++)xn(C[y],O[y]);else xn(c,Z);return 0<(O=St(Z,"script")).length&&Lt(O,!et&&St(c,"script")),Z},cleanData:function(c){for(var f,m,y,x=d.event.special,C=0;void 0!==(m=c[C]);C++)if(be(m)){if(f=m[Ot.expando]){if(f.events)for(y in f.events)x[y]?d.event.remove(m,y):d.removeEvent(m,y,f.handle);m[Ot.expando]=void 0}m[de.expando]&&(m[de.expando]=void 0)}}}),d.fn.extend({detach:function(c){return Cn(this,c,!0)},remove:function(c){return Cn(this,c)},text:function(c){return fe(this,function(f){return void 0===f?d.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=f)})},null,c,arguments.length)},append:function(){return di(this,arguments,function(c){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||yi(this,c).appendChild(c)})},prepend:function(){return di(this,arguments,function(c){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var f=yi(this,c);f.insertBefore(c,f.firstChild)}})},before:function(){return di(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return di(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,f=0;null!=(c=this[f]);f++)1===c.nodeType&&(d.cleanData(St(c,!1)),c.textContent="");return this},clone:function(c,f){return c=null!=c&&c,f=f??c,this.map(function(){return d.clone(this,c,f)})},html:function(c){return fe(this,function(f){var m=this[0]||{},y=0,x=this.length;if(void 0===f&&1===m.nodeType)return m.innerHTML;if("string"==typeof f&&!ke.test(f)&&!vt[(rt.exec(f)||["",""])[1].toLowerCase()]){f=d.htmlPrefilter(f);try{for(;y<x;y++)1===(m=this[y]||{}).nodeType&&(d.cleanData(St(m,!1)),m.innerHTML=f);m=0}catch{}}m&&this.empty().append(f)},null,c,arguments.length)},replaceWith:function(){var c=[];return di(this,arguments,function(f){var m=this.parentNode;d.inArray(this,c)<0&&(d.cleanData(St(this)),m&&m.replaceChild(f,this))},c)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,f){d.fn[c]=function(m){for(var y,x=[],C=d(m),O=C.length-1,L=0;L<=O;L++)y=L===O?this:this.clone(!0),d(C[L])[f](y),i.apply(x,y.get());return this.pushStack(x)}});var Ji=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),pi=/^--/,Ai=function(c){var f=c.ownerDocument.defaultView;return f&&f.opener||(f=h),f.getComputedStyle(c)},gi=function(c,f,m){var y,x,C={};for(x in f)C[x]=c.style[x],c.style[x]=f[x];for(x in y=m.call(c),f)c.style[x]=C[x];return y},Zi=new RegExp(se.join("|"),"i");function Pi(c,f,m){var y,x,C,O,L=pi.test(f),D=c.style;return(m=m||Ai(c))&&(O=m.getPropertyValue(f)||m[f],L&&O&&(O=O.replace(V,"$1")||void 0),""!==O||ye(c)||(O=d.style(c,f)),!b.pixelBoxStyles()&&Ji.test(O)&&Zi.test(f)&&(y=D.width,x=D.minWidth,C=D.maxWidth,D.minWidth=D.maxWidth=D.width=O,O=m.width,D.width=y,D.minWidth=x,D.maxWidth=C)),void 0!==O?O+"":O}function tn(c,f){return{get:function(){if(!c())return(this.get=f).apply(this,arguments);delete this.get}}}!function(){function c(){if(z){D.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",le.appendChild(D).appendChild(z);var Z=h.getComputedStyle(z);m="1%"!==Z.top,L=12===f(Z.marginLeft),z.style.right="60%",C=36===f(Z.right),y=36===f(Z.width),z.style.position="absolute",x=12===f(z.offsetWidth/3),le.removeChild(D),z=null}}function f(Z){return Math.round(parseFloat(Z))}var m,y,x,C,O,L,D=E.createElement("div"),z=E.createElement("div");z.style&&(z.style.backgroundClip="content-box",z.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===z.style.backgroundClip,d.extend(b,{boxSizingReliable:function(){return c(),y},pixelBoxStyles:function(){return c(),C},pixelPosition:function(){return c(),m},reliableMarginLeft:function(){return c(),L},scrollboxSize:function(){return c(),x},reliableTrDimensions:function(){var Z,et,$,ct;return null==O&&(Z=E.createElement("table"),et=E.createElement("tr"),$=E.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",et.style.cssText="box-sizing:content-box;border:1px solid",et.style.height="1px",$.style.height="9px",$.style.display="block",le.appendChild(Z).appendChild(et).appendChild($),ct=h.getComputedStyle(et),O=parseInt(ct.height,10)+parseInt(ct.borderTopWidth,10)+parseInt(ct.borderBottomWidth,10)===et.offsetHeight,le.removeChild(Z)),O}}))}();var wn=["Webkit","Moz","ms"],Sn=E.createElement("div").style,Tn={};function en(c){return d.cssProps[c]||Tn[c]||(c in Sn?c:Tn[c]=function(m){for(var y=m[0].toUpperCase()+m.slice(1),x=wn.length;x--;)if((m=wn[x]+y)in Sn)return m}(c)||c)}var On=/^(none|table(?!-c[ea]).+)/,En={position:"absolute",visibility:"hidden",display:"block"},kn={letterSpacing:"0",fontWeight:"400"};function _i(c,f,m){var y=Jt.exec(f);return y?Math.max(0,y[2]-(m||0))+(y[3]||"px"):f}function oi(c,f,m,y,x,C){var O="width"===f?1:0,L=0,D=0,z=0;if(m===(y?"border":"content"))return 0;for(;O<4;O+=2)"margin"===m&&(z+=d.css(c,m+se[O],!0,x)),y?("content"===m&&(D-=d.css(c,"padding"+se[O],!0,x)),"margin"!==m&&(D-=d.css(c,"border"+se[O]+"Width",!0,x))):(D+=d.css(c,"padding"+se[O],!0,x),"padding"!==m?D+=d.css(c,"border"+se[O]+"Width",!0,x):L+=d.css(c,"border"+se[O]+"Width",!0,x));return!y&&0<=C&&(D+=Math.max(0,Math.ceil(c["offset"+f[0].toUpperCase()+f.slice(1)]-C-D-L-.5))||0),D+z}function An(c,f,m){var y=Ai(c),x=(!b.boxSizingReliable()||m)&&"border-box"===d.css(c,"boxSizing",!1,y),C=x,O=Pi(c,f,y),L="offset"+f[0].toUpperCase()+f.slice(1);if(Ji.test(O)){if(!m)return O;O="auto"}return(!b.boxSizingReliable()&&x||!b.reliableTrDimensions()&&X(c,"tr")||"auto"===O||!parseFloat(O)&&"inline"===d.css(c,"display",!1,y))&&c.getClientRects().length&&(x="border-box"===d.css(c,"boxSizing",!1,y),(C=L in c)&&(O=c[L])),(O=parseFloat(O)||0)+oi(c,f,m||(x?"border":"content"),C,y,O)+"px"}function Ae(c,f,m,y,x){return new Ae.prototype.init(c,f,m,y,x)}d.extend({cssHooks:{opacity:{get:function(c,f){if(f){var m=Pi(c,"opacity");return""===m?"1":m}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(c,f,m,y){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var x,C,O,L=ee(f),D=pi.test(f),z=c.style;if(D||(f=en(L)),O=d.cssHooks[f]||d.cssHooks[L],void 0===m)return O&&"get"in O&&void 0!==(x=O.get(c,!1,y))?x:z[f];"string"==(C=typeof m)&&(x=Jt.exec(m))&&x[1]&&(m=T(c,f,x),C="number"),null!=m&&m==m&&("number"!==C||D||(m+=x&&x[3]||(d.cssNumber[L]?"":"px")),b.clearCloneStyle||""!==m||0!==f.indexOf("background")||(z[f]="inherit"),O&&"set"in O&&void 0===(m=O.set(c,m,y))||(D?z.setProperty(f,m):z[f]=m))}},css:function(c,f,m,y){var x,C,O,L=ee(f);return pi.test(f)||(f=en(L)),(O=d.cssHooks[f]||d.cssHooks[L])&&"get"in O&&(x=O.get(c,!0,m)),void 0===x&&(x=Pi(c,f,y)),"normal"===x&&f in kn&&(x=kn[f]),""===m||m?(C=parseFloat(x),!0===m||isFinite(C)?C||0:x):x}}),d.each(["height","width"],function(c,f){d.cssHooks[f]={get:function(m,y,x){if(y)return!On.test(d.css(m,"display"))||m.getClientRects().length&&m.getBoundingClientRect().width?An(m,f,x):gi(m,En,function(){return An(m,f,x)})},set:function(m,y,x){var C,O=Ai(m),L=!b.scrollboxSize()&&"absolute"===O.position,D=(L||x)&&"border-box"===d.css(m,"boxSizing",!1,O),z=x?oi(m,f,x,D,O):0;return D&&L&&(z-=Math.ceil(m["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(O[f])-oi(m,f,"border",!1,O)-.5)),z&&(C=Jt.exec(y))&&"px"!==(C[3]||"px")&&(m.style[f]=y,y=d.css(m,f)),_i(0,y,z)}}}),d.cssHooks.marginLeft=tn(b.reliableMarginLeft,function(c,f){if(f)return(parseFloat(Pi(c,"marginLeft"))||c.getBoundingClientRect().left-gi(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(c,f){d.cssHooks[c+f]={expand:function(m){for(var y=0,x={},C="string"==typeof m?m.split(" "):[m];y<4;y++)x[c+se[y]+f]=C[y]||C[y-2]||C[0];return x}},"margin"!==c&&(d.cssHooks[c+f].set=_i)}),d.fn.extend({css:function(c,f){return fe(this,function(m,y,x){var C,O,L={},D=0;if(Array.isArray(y)){for(C=Ai(m),O=y.length;D<O;D++)L[y[D]]=d.css(m,y[D],!1,C);return L}return void 0!==x?d.style(m,y,x):d.css(m,y)},c,f,1<arguments.length)}}),((d.Tween=Ae).prototype={constructor:Ae,init:function(c,f,m,y,x,C){this.elem=c,this.prop=m,this.easing=x||d.easing._default,this.options=f,this.start=this.now=this.cur(),this.end=y,this.unit=C||(d.cssNumber[m]?"":"px")},cur:function(){var c=Ae.propHooks[this.prop];return c&&c.get?c.get(this):Ae.propHooks._default.get(this)},run:function(c){var f,m=Ae.propHooks[this.prop];return this.pos=f=this.options.duration?d.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):c,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),m&&m.set?m.set(this):Ae.propHooks._default.set(this),this}}).init.prototype=Ae.prototype,(Ae.propHooks={_default:{get:function(c){var f;return 1!==c.elem.nodeType||null!=c.elem[c.prop]&&null==c.elem.style[c.prop]?c.elem[c.prop]:(f=d.css(c.elem,c.prop,""))&&"auto"!==f?f:0},set:function(c){d.fx.step[c.prop]?d.fx.step[c.prop](c):1!==c.elem.nodeType||!d.cssHooks[c.prop]&&null==c.elem.style[en(c.prop)]?c.elem[c.prop]=c.now:d.style(c.elem,c.prop,c.now+c.unit)}}}).scrollTop=Ae.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},d.easing={linear:function(c){return c},swing:function(c){return.5-Math.cos(c*Math.PI)/2},_default:"swing"},d.fx=Ae.prototype.init,d.fx.step={};var Si,Ni,Ti,Pn,Yn=/^(?:toggle|show|hide)$/,Un=/queueHooks$/;function nn(){Ni&&(!1===E.hidden&&h.requestAnimationFrame?h.requestAnimationFrame(nn):h.setTimeout(nn,d.fx.interval),d.fx.tick())}function Dn(){return h.setTimeout(function(){Si=void 0}),Si=Date.now()}function Pe(c,f){var m,y=0,x={height:c};for(f=f?1:0;y<4;y+=2-f)x["margin"+(m=se[y])]=x["padding"+m]=c;return f&&(x.opacity=x.width=c),x}function rn(c,f,m){for(var y,x=(He.tweeners[f]||[]).concat(He.tweeners["*"]),C=0,O=x.length;C<O;C++)if(y=x[C].call(m,f,c))return y}function He(c,f,m){var y,x,C=0,O=He.prefilters.length,L=d.Deferred().always(function(){delete D.elem}),D=function(){if(x)return!1;for(var et=Si||Dn(),$=Math.max(0,z.startTime+z.duration-et),ct=1-($/z.duration||0),At=0,Rt=z.tweens.length;At<Rt;At++)z.tweens[At].run(ct);return L.notifyWith(c,[z,ct,$]),ct<1&&Rt?$:(Rt||L.notifyWith(c,[z,1,0]),L.resolveWith(c,[z]),!1)},z=L.promise({elem:c,props:d.extend({},f),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},m),originalProperties:f,originalOptions:m,startTime:Si||Dn(),duration:m.duration,tweens:[],createTween:function(et,$){var ct=d.Tween(c,z.opts,et,$,z.opts.specialEasing[et]||z.opts.easing);return z.tweens.push(ct),ct},stop:function(et){var $=0,ct=et?z.tweens.length:0;if(x)return this;for(x=!0;$<ct;$++)z.tweens[$].run(1);return et?(L.notifyWith(c,[z,1,0]),L.resolveWith(c,[z,et])):L.rejectWith(c,[z,et]),this}}),Z=z.props;for(function(et,$){var ct,At,Rt,Bt,ce;for(ct in et)if(Rt=$[At=ee(ct)],Bt=et[ct],Array.isArray(Bt)&&(Rt=Bt[1],Bt=et[ct]=Bt[0]),ct!==At&&(et[At]=Bt,delete et[ct]),(ce=d.cssHooks[At])&&"expand"in ce)for(ct in Bt=ce.expand(Bt),delete et[At],Bt)ct in et||(et[ct]=Bt[ct],$[ct]=Rt);else $[At]=Rt}(Z,z.opts.specialEasing);C<O;C++)if(y=He.prefilters[C].call(z,c,Z,z.opts))return _(y.stop)&&(d._queueHooks(z.elem,z.opts.queue).stop=y.stop.bind(y)),y;return d.map(Z,rn,z),_(z.opts.start)&&z.opts.start.call(c,z),z.progress(z.opts.progress).done(z.opts.done,z.opts.complete).fail(z.opts.fail).always(z.opts.always),d.fx.timer(d.extend(D,{elem:c,anim:z,queue:z.opts.queue})),z}d.Animation=d.extend(He,{tweeners:{"*":[function(c,f){var m=this.createTween(c,f);return T(m.elem,c,Jt.exec(f),m),m}]},tweener:function(c,f){_(c)?(f=c,c=["*"]):c=c.match(qt);for(var m,y=0,x=c.length;y<x;y++)(He.tweeners[m=c[y]]=He.tweeners[m]||[]).unshift(f)},prefilters:[function(c,f,m){var y,x,C,O,L,D,z,Z,et="width"in f||"height"in f,$=this,ct={},At=c.style,Rt=c.nodeType&&Ee(c),Bt=Ot.get(c,"fxshow");for(y in m.queue||(null==(O=d._queueHooks(c,"fx")).unqueued&&(O.unqueued=0,L=O.empty.fire,O.empty.fire=function(){O.unqueued||L()}),O.unqueued++,$.always(function(){$.always(function(){O.unqueued--,d.queue(c,"fx").length||O.empty.fire()})})),f)if(Yn.test(x=f[y])){if(delete f[y],C=C||"toggle"===x,x===(Rt?"hide":"show")){if("show"!==x||!Bt||void 0===Bt[y])continue;Rt=!0}ct[y]=Bt&&Bt[y]||d.style(c,y)}if((D=!d.isEmptyObject(f))||!d.isEmptyObject(ct))for(y in et&&1===c.nodeType&&(m.overflow=[At.overflow,At.overflowX,At.overflowY],null==(z=Bt&&Bt.display)&&(z=Ot.get(c,"display")),"none"===(Z=d.css(c,"display"))&&(z?Z=z:(N([c],!0),z=c.style.display||z,Z=d.css(c,"display"),N([c]))),("inline"===Z||"inline-block"===Z&&null!=z)&&"none"===d.css(c,"float")&&(D||($.done(function(){At.display=z}),null==z&&(z="none"===(Z=At.display)?"":Z)),At.display="inline-block")),m.overflow&&(At.overflow="hidden",$.always(function(){At.overflow=m.overflow[0],At.overflowX=m.overflow[1],At.overflowY=m.overflow[2]})),D=!1,ct)D||(Bt?"hidden"in Bt&&(Rt=Bt.hidden):Bt=Ot.access(c,"fxshow",{display:z}),C&&(Bt.hidden=!Rt),Rt&&N([c],!0),$.done(function(){for(y in Rt||N([c]),Ot.remove(c,"fxshow"),ct)d.style(c,y,ct[y])})),D=rn(Rt?Bt[y]:0,y,$),y in Bt||(Bt[y]=D.start,Rt&&(D.end=D.start,D.start=0))}],prefilter:function(c,f){f?He.prefilters.unshift(c):He.prefilters.push(c)}}),d.speed=function(c,f,m){var y=c&&"object"==typeof c?d.extend({},c):{complete:m||!m&&f||_(c)&&c,duration:c,easing:m&&f||f&&!_(f)&&f};return d.fx.off?y.duration=0:"number"!=typeof y.duration&&(y.duration=y.duration in d.fx.speeds?d.fx.speeds[y.duration]:d.fx.speeds._default),null!=y.queue&&!0!==y.queue||(y.queue="fx"),y.old=y.complete,y.complete=function(){_(y.old)&&y.old.call(this),y.queue&&d.dequeue(this,y.queue)},y},d.fn.extend({fadeTo:function(c,f,m,y){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:f},c,m,y)},animate:function(c,f,m,y){var x=d.isEmptyObject(c),C=d.speed(f,m,y),O=function(){var L=He(this,d.extend({},c),C);(x||Ot.get(this,"finish"))&&L.stop(!0)};return O.finish=O,x||!1===C.queue?this.each(O):this.queue(C.queue,O)},stop:function(c,f,m){var y=function(x){var C=x.stop;delete x.stop,C(m)};return"string"!=typeof c&&(m=f,f=c,c=void 0),f&&this.queue(c||"fx",[]),this.each(function(){var x=!0,C=null!=c&&c+"queueHooks",O=d.timers,L=Ot.get(this);if(C)L[C]&&L[C].stop&&y(L[C]);else for(C in L)L[C]&&L[C].stop&&Un.test(C)&&y(L[C]);for(C=O.length;C--;)O[C].elem!==this||null!=c&&O[C].queue!==c||(O[C].anim.stop(m),x=!1,O.splice(C,1));!x&&m||d.dequeue(this,c)})},finish:function(c){return!1!==c&&(c=c||"fx"),this.each(function(){var f,m=Ot.get(this),y=m[c+"queue"],x=m[c+"queueHooks"],C=d.timers,O=y?y.length:0;for(m.finish=!0,d.queue(this,c,[]),x&&x.stop&&x.stop.call(this,!0),f=C.length;f--;)C[f].elem===this&&C[f].queue===c&&(C[f].anim.stop(!0),C.splice(f,1));for(f=0;f<O;f++)y[f]&&y[f].finish&&y[f].finish.call(this);delete m.finish})}}),d.each(["toggle","show","hide"],function(c,f){var m=d.fn[f];d.fn[f]=function(y,x,C){return null==y||"boolean"==typeof y?m.apply(this,arguments):this.animate(Pe(f,!0),y,x,C)}}),d.each({slideDown:Pe("show"),slideUp:Pe("hide"),slideToggle:Pe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,f){d.fn[c]=function(m,y,x){return this.animate(f,m,y,x)}}),d.timers=[],d.fx.tick=function(){var c,f=0,m=d.timers;for(Si=Date.now();f<m.length;f++)(c=m[f])()||m[f]!==c||m.splice(f--,1);m.length||d.fx.stop(),Si=void 0},d.fx.timer=function(c){d.timers.push(c),d.fx.start()},d.fx.interval=13,d.fx.start=function(){Ni||(Ni=!0,nn())},d.fx.stop=function(){Ni=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(c,f){return c=d.fx&&d.fx.speeds[c]||c,this.queue(f=f||"fx",function(m,y){var x=h.setTimeout(m,c);y.stop=function(){h.clearTimeout(x)}})},Ti=E.createElement("input"),Pn=E.createElement("select").appendChild(E.createElement("option")),Ti.type="checkbox",b.checkOn=""!==Ti.value,b.optSelected=Pn.selected,(Ti=E.createElement("input")).value="t",Ti.type="radio",b.radioValue="t"===Ti.value;var sn,Di=d.expr.attrHandle;d.fn.extend({attr:function(c,f){return fe(this,d.attr,c,f,1<arguments.length)},removeAttr:function(c){return this.each(function(){d.removeAttr(this,c)})}}),d.extend({attr:function(c,f,m){var y,x,C=c.nodeType;if(3!==C&&8!==C&&2!==C)return typeof c.getAttribute>"u"?d.prop(c,f,m):(1===C&&d.isXMLDoc(c)||(x=d.attrHooks[f.toLowerCase()]||(d.expr.match.bool.test(f)?sn:void 0)),void 0!==m?null===m?void d.removeAttr(c,f):x&&"set"in x&&void 0!==(y=x.set(c,m,f))?y:(c.setAttribute(f,m+""),m):x&&"get"in x&&null!==(y=x.get(c,f))?y:null==(y=d.find.attr(c,f))?void 0:y)},attrHooks:{type:{set:function(c,f){if(!b.radioValue&&"radio"===f&&X(c,"input")){var m=c.value;return c.setAttribute("type",f),m&&(c.value=m),f}}}},removeAttr:function(c,f){var m,y=0,x=f&&f.match(qt);if(x&&1===c.nodeType)for(;m=x[y++];)c.removeAttribute(m)}}),sn={set:function(c,f,m){return!1===f?d.removeAttr(c,m):c.setAttribute(m,m),m}},d.each(d.expr.match.bool.source.match(/\w+/g),function(c,f){var m=Di[f]||d.find.attr;Di[f]=function(y,x,C){var O,L,D=x.toLowerCase();return C||(L=Di[D],Di[D]=O,O=null!=m(y,x,C)?D:null,Di[D]=L),O}});var Vn=/^(?:input|select|textarea|button)$/i,jn=/^(?:a|area)$/i;function Ke(c){return(c.match(qt)||[]).join(" ")}function bi(c){return c.getAttribute&&c.getAttribute("class")||""}function on(c){return Array.isArray(c)?c:"string"==typeof c&&c.match(qt)||[]}d.fn.extend({prop:function(c,f){return fe(this,d.prop,c,f,1<arguments.length)},removeProp:function(c){return this.each(function(){delete this[d.propFix[c]||c]})}}),d.extend({prop:function(c,f,m){var y,x,C=c.nodeType;if(3!==C&&8!==C&&2!==C)return 1===C&&d.isXMLDoc(c)||(x=d.propHooks[f=d.propFix[f]||f]),void 0!==m?x&&"set"in x&&void 0!==(y=x.set(c,m,f))?y:c[f]=m:x&&"get"in x&&null!==(y=x.get(c,f))?y:c[f]},propHooks:{tabIndex:{get:function(c){var f=d.find.attr(c,"tabindex");return f?parseInt(f,10):Vn.test(c.nodeName)||jn.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(d.propHooks.selected={get:function(c){return null},set:function(c){}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this}),d.fn.extend({addClass:function(c){var f,m,y,x,C,O;return _(c)?this.each(function(L){d(this).addClass(c.call(this,L,bi(this)))}):(f=on(c)).length?this.each(function(){if(y=bi(this),m=1===this.nodeType&&" "+Ke(y)+" "){for(C=0;C<f.length;C++)m.indexOf(" "+(x=f[C])+" ")<0&&(m+=x+" ");O=Ke(m),y!==O&&this.setAttribute("class",O)}}):this},removeClass:function(c){var f,m,y,x,C,O;return _(c)?this.each(function(L){d(this).removeClass(c.call(this,L,bi(this)))}):arguments.length?(f=on(c)).length?this.each(function(){if(y=bi(this),m=1===this.nodeType&&" "+Ke(y)+" "){for(C=0;C<f.length;C++)for(x=f[C];-1<m.indexOf(" "+x+" ");)m=m.replace(" "+x+" "," ");O=Ke(m),y!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(c,f){var m,y,x,C,O=typeof c,L="string"===O||Array.isArray(c);return _(c)?this.each(function(D){d(this).toggleClass(c.call(this,D,bi(this),f),f)}):"boolean"==typeof f&&L?f?this.addClass(c):this.removeClass(c):(m=on(c),this.each(function(){if(L)for(C=d(this),x=0;x<m.length;x++)C.hasClass(y=m[x])?C.removeClass(y):C.addClass(y);else void 0!==c&&"boolean"!==O||((y=bi(this))&&Ot.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||!1===c?"":Ot.get(this,"__className__")||""))}))},hasClass:function(c){var f,m,y=0;for(f=" "+c+" ";m=this[y++];)if(1===m.nodeType&&-1<(" "+Ke(bi(m))+" ").indexOf(f))return!0;return!1}});var Mn=/\r/g;d.fn.extend({val:function(c){var f,m,y,x=this[0];return arguments.length?(y=_(c),this.each(function(C){var O;1===this.nodeType&&(null==(O=y?c.call(this,C,d(this).val()):c)?O="":"number"==typeof O?O+="":Array.isArray(O)&&(O=d.map(O,function(L){return null==L?"":L+""})),(f=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()])&&"set"in f&&void 0!==f.set(this,O,"value")||(this.value=O))})):x?(f=d.valHooks[x.type]||d.valHooks[x.nodeName.toLowerCase()])&&"get"in f&&void 0!==(m=f.get(x,"value"))?m:"string"==typeof(m=x.value)?m.replace(Mn,""):m??"":void 0}}),d.extend({valHooks:{option:{get:function(c){return d.find.attr(c,"value")??Ke(d.text(c))}},select:{get:function(c){var f,m,y,x=c.options,C=c.selectedIndex,O="select-one"===c.type,L=O?null:[],D=O?C+1:x.length;for(y=C<0?D:O?C:0;y<D;y++)if(((m=x[y]).selected||y===C)&&!m.disabled&&(!m.parentNode.disabled||!X(m.parentNode,"optgroup"))){if(f=d(m).val(),O)return f;L.push(f)}return L},set:function(c,f){for(var m,y,x=c.options,C=d.makeArray(f),O=x.length;O--;)((y=x[O]).selected=-1<d.inArray(d.valHooks.option.get(y),C))&&(m=!0);return m||(c.selectedIndex=-1),C}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(c,f){if(Array.isArray(f))return c.checked=-1<d.inArray(d(c).val(),f)}},b.checkOn||(d.valHooks[this].get=function(c){return null===c.getAttribute("value")?"on":c.value})});var ji=h.location,Ln={guid:Date.now()},Hi=/\?/;d.parseXML=function(c){var f,m;if(!c||"string"!=typeof c)return null;try{f=(new h.DOMParser).parseFromString(c,"text/xml")}catch{}return m=f&&f.getElementsByTagName("parsererror")[0],f&&!m||d.error("Invalid XML: "+(m?d.map(m.childNodes,function(y){return y.textContent}).join("\n"):c)),f};var an=/^(?:focusinfocus|focusoutblur)$/,ln=function(c){c.stopPropagation()};d.extend(d.event,{trigger:function(c,f,m,y){var x,C,O,L,D,z,Z,et,$=[m||E],ct=u.call(c,"type")?c.type:c,At=u.call(c,"namespace")?c.namespace.split("."):[];if(C=et=O=m=m||E,3!==m.nodeType&&8!==m.nodeType&&!an.test(ct+d.event.triggered)&&(-1<ct.indexOf(".")&&(ct=(At=ct.split(".")).shift(),At.sort()),D=ct.indexOf(":")<0&&"on"+ct,(c=c[d.expando]?c:new d.Event(ct,"object"==typeof c&&c)).isTrigger=y?2:3,c.namespace=At.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+At.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=m),f=null==f?[c]:d.makeArray(f,[c]),Z=d.event.special[ct]||{},y||!Z.trigger||!1!==Z.trigger.apply(m,f))){if(!y&&!Z.noBubble&&!S(m)){for(an.test((L=Z.delegateType||ct)+ct)||(C=C.parentNode);C;C=C.parentNode)$.push(C),O=C;O===(m.ownerDocument||E)&&$.push(O.defaultView||O.parentWindow||h)}for(x=0;(C=$[x++])&&!c.isPropagationStopped();)et=C,c.type=1<x?L:Z.bindType||ct,(z=(Ot.get(C,"events")||Object.create(null))[c.type]&&Ot.get(C,"handle"))&&z.apply(C,f),(z=D&&C[D])&&z.apply&&be(C)&&(c.result=z.apply(C,f),!1===c.result&&c.preventDefault());return c.type=ct,y||c.isDefaultPrevented()||Z._default&&!1!==Z._default.apply($.pop(),f)||!be(m)||D&&_(m[ct])&&!S(m)&&((O=m[D])&&(m[D]=null),d.event.triggered=ct,c.isPropagationStopped()&&et.addEventListener(ct,ln),m[ct](),c.isPropagationStopped()&&et.removeEventListener(ct,ln),d.event.triggered=void 0,O&&(m[D]=O)),c.result}},simulate:function(c,f,m){var y=d.extend(new d.Event,m,{type:c,isSimulated:!0});d.event.trigger(y,null,f)}}),d.fn.extend({trigger:function(c,f){return this.each(function(){d.event.trigger(c,f,this)})},triggerHandler:function(c,f){var m=this[0];if(m)return d.event.trigger(c,f,m,!0)}});var Wi=/\[\]$/,cn=/\r?\n/g,hn=/^(?:submit|button|image|reset|file)$/i,We=/^(?:input|select|textarea|keygen)/i;function un(c,f,m,y){var x;if(Array.isArray(f))d.each(f,function(C,O){m||Wi.test(c)?y(c,O):un(c+"["+("object"==typeof O&&null!=O?C:"")+"]",O,m,y)});else if(m||"object"!==G(f))y(c,f);else for(x in f)un(c+"["+x+"]",f[x],m,y)}d.param=function(c,f){var m,y=[],x=function(C,O){var L=_(O)?O():O;y[y.length]=encodeURIComponent(C)+"="+encodeURIComponent(L??"")};if(null==c)return"";if(Array.isArray(c)||c.jquery&&!d.isPlainObject(c))d.each(c,function(){x(this.name,this.value)});else for(m in c)un(m,c[m],f,x);return y.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=d.prop(this,"elements");return c?d.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!d(this).is(":disabled")&&We.test(this.nodeName)&&!hn.test(c)&&(this.checked||!lt.test(c))}).map(function(c,f){var m=d(this).val();return null==m?null:Array.isArray(m)?d.map(m,function(y){return{name:f.name,value:y.replace(cn,"\r\n")}}):{name:f.name,value:m.replace(cn,"\r\n")}}).get()}});var Gn=/%20/g,Fn=/#.*$/,In=/([?&])_=[^&]*/,qn=/^(.*?):[ \t]*([^\r\n]*)$/gm,$n=/^(?:GET|HEAD)$/,Kn=/^\/\//,Rn={},fn={},Bn="*/".concat("*"),Xi=E.createElement("a");function dn(c){return function(f,m){"string"!=typeof f&&(m=f,f="*");var y,x=0,C=f.toLowerCase().match(qt)||[];if(_(m))for(;y=C[x++];)"+"===y[0]?(y=y.slice(1)||"*",(c[y]=c[y]||[]).unshift(m)):(c[y]=c[y]||[]).push(m)}}function zi(c,f,m,y){var x={},C=c===fn;function O(L){var D;return x[L]=!0,d.each(c[L]||[],function(z,Z){var et=Z(f,m,y);return"string"!=typeof et||C||x[et]?C?!(D=et):void 0:(f.dataTypes.unshift(et),O(et),!1)}),D}return O(f.dataTypes[0])||!x["*"]&&O("*")}function pn(c,f){var m,y,x=d.ajaxSettings.flatOptions||{};for(m in f)void 0!==f[m]&&((x[m]?c:y||(y={}))[m]=f[m]);return y&&d.extend(!0,c,y),c}Xi.href=ji.href,d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ji.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ji.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,f){return f?pn(pn(c,d.ajaxSettings),f):pn(d.ajaxSettings,c)},ajaxPrefilter:dn(Rn),ajaxTransport:dn(fn),ajax:function(c,f){"object"==typeof c&&(f=c,c=void 0);var m,y,x,C,O,L,D,z,Z,et,$=d.ajaxSetup({},f=f||{}),ct=$.context||$,At=$.context&&(ct.nodeType||ct.jquery)?d(ct):d.event,Rt=d.Deferred(),Bt=d.Callbacks("once memory"),ce=$.statusCode||{},me={},Je={},Ze="canceled",zt={readyState:0,getResponseHeader:function(Ut){var ne;if(D){if(!C)for(C={};ne=qn.exec(x);)C[ne[1].toLowerCase()+" "]=(C[ne[1].toLowerCase()+" "]||[]).concat(ne[2]);ne=C[Ut.toLowerCase()+" "]}return null==ne?null:ne.join(", ")},getAllResponseHeaders:function(){return D?x:null},setRequestHeader:function(Ut,ne){return null==D&&(Ut=Je[Ut.toLowerCase()]=Je[Ut.toLowerCase()]||Ut,me[Ut]=ne),this},overrideMimeType:function(Ut){return null==D&&($.mimeType=Ut),this},statusCode:function(Ut){var ne;if(Ut)if(D)zt.always(Ut[zt.status]);else for(ne in Ut)ce[ne]=[ce[ne],Ut[ne]];return this},abort:function(Ut){var ne=Ut||Ze;return m&&m.abort(ne),ti(0,ne),this}};if(Rt.promise(zt),$.url=((c||$.url||ji.href)+"").replace(Kn,ji.protocol+"//"),$.type=f.method||f.type||$.method||$.type,$.dataTypes=($.dataType||"*").toLowerCase().match(qt)||[""],null==$.crossDomain){L=E.createElement("a");try{L.href=$.url,L.href=L.href,$.crossDomain=Xi.protocol+"//"+Xi.host!=L.protocol+"//"+L.host}catch{$.crossDomain=!0}}if($.data&&$.processData&&"string"!=typeof $.data&&($.data=d.param($.data,$.traditional)),zi(Rn,$,f,zt),D)return zt;for(Z in(z=d.event&&$.global)&&0==d.active++&&d.event.trigger("ajaxStart"),$.type=$.type.toUpperCase(),$.hasContent=!$n.test($.type),y=$.url.replace(Fn,""),$.hasContent?$.data&&$.processData&&0===($.contentType||"").indexOf("application/x-www-form-urlencoded")&&($.data=$.data.replace(Gn,"+")):(et=$.url.slice(y.length),$.data&&($.processData||"string"==typeof $.data)&&(y+=(Hi.test(y)?"&":"?")+$.data,delete $.data),!1===$.cache&&(y=y.replace(In,"$1"),et=(Hi.test(y)?"&":"?")+"_="+Ln.guid+++et),$.url=y+et),$.ifModified&&(d.lastModified[y]&&zt.setRequestHeader("If-Modified-Since",d.lastModified[y]),d.etag[y]&&zt.setRequestHeader("If-None-Match",d.etag[y])),($.data&&$.hasContent&&!1!==$.contentType||f.contentType)&&zt.setRequestHeader("Content-Type",$.contentType),zt.setRequestHeader("Accept",$.dataTypes[0]&&$.accepts[$.dataTypes[0]]?$.accepts[$.dataTypes[0]]+("*"!==$.dataTypes[0]?", "+Bn+"; q=0.01":""):$.accepts["*"]),$.headers)zt.setRequestHeader(Z,$.headers[Z]);if($.beforeSend&&(!1===$.beforeSend.call(ct,zt,$)||D))return zt.abort();if(Ze="abort",Bt.add($.complete),zt.done($.success),zt.fail($.error),m=zi(fn,$,f,zt)){if(zt.readyState=1,z&&At.trigger("ajaxSend",[zt,$]),D)return zt;$.async&&0<$.timeout&&(O=h.setTimeout(function(){zt.abort("timeout")},$.timeout));try{D=!1,m.send(me,ti)}catch(Ut){if(D)throw Ut;ti(-1,Ut)}}else ti(-1,"No Transport");function ti(Ut,ne,ai,Mi){var ei,Li,li,De,Oi,Xe=ne;D||(D=!0,O&&h.clearTimeout(O),m=void 0,x=Mi||"",zt.readyState=0<Ut?4:0,ei=200<=Ut&&Ut<300||304===Ut,ai&&(De=function(he,oe,Ce){for(var ci,we,Pt,re,ae=he.contents,te=he.dataTypes;"*"===te[0];)te.shift(),void 0===ci&&(ci=he.mimeType||oe.getResponseHeader("Content-Type"));if(ci)for(we in ae)if(ae[we]&&ae[we].test(ci)){te.unshift(we);break}if(te[0]in Ce)Pt=te[0];else{for(we in Ce){if(!te[0]||he.converters[we+" "+te[0]]){Pt=we;break}re||(re=we)}Pt=Pt||re}if(Pt)return Pt!==te[0]&&te.unshift(Pt),Ce[Pt]}($,zt,ai)),!ei&&-1<d.inArray("script",$.dataTypes)&&d.inArray("json",$.dataTypes)<0&&($.converters["text script"]=function(){}),De=function(he,oe,Ce,ci){var we,Pt,re,ae,te,ii={},Ei=he.dataTypes.slice();if(Ei[1])for(re in he.converters)ii[re.toLowerCase()]=he.converters[re];for(Pt=Ei.shift();Pt;)if(he.responseFields[Pt]&&(Ce[he.responseFields[Pt]]=oe),!te&&ci&&he.dataFilter&&(oe=he.dataFilter(oe,he.dataType)),te=Pt,Pt=Ei.shift())if("*"===Pt)Pt=te;else if("*"!==te&&te!==Pt){if(!(re=ii[te+" "+Pt]||ii["* "+Pt]))for(we in ii)if((ae=we.split(" "))[1]===Pt&&(re=ii[te+" "+ae[0]]||ii["* "+ae[0]])){!0===re?re=ii[we]:!0!==ii[we]&&(Pt=ae[0],Ei.unshift(ae[1]));break}if(!0!==re)if(re&&he.throws)oe=re(oe);else try{oe=re(oe)}catch(mi){return{state:"parsererror",error:re?mi:"No conversion from "+te+" to "+Pt}}}return{state:"success",data:oe}}($,De,zt,ei),ei?($.ifModified&&((Oi=zt.getResponseHeader("Last-Modified"))&&(d.lastModified[y]=Oi),(Oi=zt.getResponseHeader("etag"))&&(d.etag[y]=Oi)),204===Ut||"HEAD"===$.type?Xe="nocontent":304===Ut?Xe="notmodified":(Xe=De.state,Li=De.data,ei=!(li=De.error))):(li=Xe,!Ut&&Xe||(Xe="error",Ut<0&&(Ut=0))),zt.status=Ut,zt.statusText=(ne||Xe)+"",ei?Rt.resolveWith(ct,[Li,Xe,zt]):Rt.rejectWith(ct,[zt,Xe,li]),zt.statusCode(ce),ce=void 0,z&&At.trigger(ei?"ajaxSuccess":"ajaxError",[zt,$,ei?Li:li]),Bt.fireWith(ct,[zt,Xe]),z&&(At.trigger("ajaxComplete",[zt,$]),--d.active||d.event.trigger("ajaxStop")))}return zt},getJSON:function(c,f,m){return d.get(c,f,m,"json")},getScript:function(c,f){return d.get(c,void 0,f,"script")}}),d.each(["get","post"],function(c,f){d[f]=function(m,y,x,C){return _(y)&&(C=C||x,x=y,y=void 0),d.ajax(d.extend({url:m,type:f,dataType:C,data:y,success:x},d.isPlainObject(m)&&m))}}),d.ajaxPrefilter(function(c){var f;for(f in c.headers)"content-type"===f.toLowerCase()&&(c.contentType=c.headers[f]||"")}),d._evalUrl=function(c,f,m){return d.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){d.globalEval(y,f,m)}})},d.fn.extend({wrapAll:function(c){var f;return this[0]&&(_(c)&&(c=c.call(this[0])),f=d(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var m=this;m.firstElementChild;)m=m.firstElementChild;return m}).append(this)),this},wrapInner:function(c){return _(c)?this.each(function(f){d(this).wrapInner(c.call(this,f))}):this.each(function(){var f=d(this),m=f.contents();m.length?m.wrapAll(c):f.append(c)})},wrap:function(c){var f=_(c);return this.each(function(m){d(this).wrapAll(f?c.call(this,m):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(c){return!d.expr.pseudos.visible(c)},d.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new h.XMLHttpRequest}catch{}};var Qn={0:200,1223:204},Ve=d.ajaxSettings.xhr();b.cors=!!Ve&&"withCredentials"in Ve,b.ajax=Ve=!!Ve,d.ajaxTransport(function(c){var f,m;if(b.cors||Ve&&!c.crossDomain)return{send:function(y,x){var C,O=c.xhr();if(O.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(C in c.xhrFields)O[C]=c.xhrFields[C];for(C in c.mimeType&&O.overrideMimeType&&O.overrideMimeType(c.mimeType),c.crossDomain||y["X-Requested-With"]||(y["X-Requested-With"]="XMLHttpRequest"),y)O.setRequestHeader(C,y[C]);f=function(L){return function(){f&&(f=m=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,"abort"===L?O.abort():"error"===L?"number"!=typeof O.status?x(0,"error"):x(O.status,O.statusText):x(Qn[O.status]||O.status,O.statusText,"text"!==(O.responseType||"text")||"string"!=typeof O.responseText?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=f(),m=O.onerror=O.ontimeout=f("error"),void 0!==O.onabort?O.onabort=m:O.onreadystatechange=function(){4===O.readyState&&h.setTimeout(function(){f&&m()})},f=f("abort");try{O.send(c.hasContent&&c.data||null)}catch(L){if(f)throw L}},abort:function(){f&&f()}}}),d.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return d.globalEval(c),c}}}),d.ajaxPrefilter("script",function(c){void 0===c.cache&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),d.ajaxTransport("script",function(c){var f,m;if(c.crossDomain||c.scriptAttrs)return{send:function(y,x){f=d("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",m=function(C){f.remove(),m=null,C&&x("error"===C.type?404:200,C.type)}),E.head.appendChild(f[0])},abort:function(){m&&m()}}});var Qe,gn=[],mn=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=gn.pop()||d.expando+"_"+Ln.guid++;return this[c]=!0,c}}),d.ajaxPrefilter("json jsonp",function(c,f,m){var y,x,C,O=!1!==c.jsonp&&(mn.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&mn.test(c.data)&&"data");if(O||"jsonp"===c.dataTypes[0])return y=c.jsonpCallback=_(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,O?c[O]=c[O].replace(mn,"$1"+y):!1!==c.jsonp&&(c.url+=(Hi.test(c.url)?"&":"?")+c.jsonp+"="+y),c.converters["script json"]=function(){return C||d.error(y+" was not called"),C[0]},c.dataTypes[0]="json",x=h[y],h[y]=function(){C=arguments},m.always(function(){void 0===x?d(h).removeProp(y):h[y]=x,c[y]&&(c.jsonpCallback=f.jsonpCallback,gn.push(y)),C&&_(x)&&x(C[0]),C=x=void 0}),"script"}),b.createHTMLDocument=((Qe=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qe.childNodes.length),d.parseHTML=function(c,f,m){return"string"!=typeof c?[]:("boolean"==typeof f&&(m=f,f=!1),f||(b.createHTMLDocument?((y=(f=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,f.head.appendChild(y)):f=E),C=!m&&[],(x=U.exec(c))?[f.createElement(x[1])]:(x=Mt([c],f,C),C&&C.length&&d(C).remove(),d.merge([],x.childNodes)));var y,x,C},d.fn.load=function(c,f,m){var y,x,C,O=this,L=c.indexOf(" ");return-1<L&&(y=Ke(c.slice(L)),c=c.slice(0,L)),_(f)?(m=f,f=void 0):f&&"object"==typeof f&&(x="POST"),0<O.length&&d.ajax({url:c,type:x||"GET",dataType:"html",data:f}).done(function(D){C=arguments,O.html(y?d("<div>").append(d.parseHTML(D)).find(y):D)}).always(m&&function(D,z){O.each(function(){m.apply(this,C||[D.responseText,z,D])})}),this},d.expr.pseudos.animated=function(c){return d.grep(d.timers,function(f){return c===f.elem}).length},d.offset={setOffset:function(c,f,m){var y,x,C,O,L,D,z=d.css(c,"position"),Z=d(c),et={};"static"===z&&(c.style.position="relative"),L=Z.offset(),C=d.css(c,"top"),D=d.css(c,"left"),("absolute"===z||"fixed"===z)&&-1<(C+D).indexOf("auto")?(O=(y=Z.position()).top,x=y.left):(O=parseFloat(C)||0,x=parseFloat(D)||0),_(f)&&(f=f.call(c,m,d.extend({},L))),null!=f.top&&(et.top=f.top-L.top+O),null!=f.left&&(et.left=f.left-L.left+x),"using"in f?f.using.call(c,et):Z.css(et)}},d.fn.extend({offset:function(c){if(arguments.length)return void 0===c?this:this.each(function(x){d.offset.setOffset(this,c,x)});var f,m,y=this[0];return y?y.getClientRects().length?{top:(f=y.getBoundingClientRect()).top+(m=y.ownerDocument.defaultView).pageYOffset,left:f.left+m.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var c,f,m,y=this[0],x={top:0,left:0};if("fixed"===d.css(y,"position"))f=y.getBoundingClientRect();else{for(f=this.offset(),m=y.ownerDocument,c=y.offsetParent||m.documentElement;c&&(c===m.body||c===m.documentElement)&&"static"===d.css(c,"position");)c=c.parentNode;c&&c!==y&&1===c.nodeType&&((x=d(c).offset()).top+=d.css(c,"borderTopWidth",!0),x.left+=d.css(c,"borderLeftWidth",!0))}return{top:f.top-x.top-d.css(y,"marginTop",!0),left:f.left-x.left-d.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&"static"===d.css(c,"position");)c=c.offsetParent;return c||le})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,f){var m="pageYOffset"===f;d.fn[c]=function(y){return fe(this,function(x,C,O){var L;if(S(x)?L=x:9===x.nodeType&&(L=x.defaultView),void 0===O)return L?L[f]:x[C];L?L.scrollTo(m?L.pageXOffset:O,m?O:L.pageYOffset):x[C]=O},c,y,arguments.length)}}),d.each(["top","left"],function(c,f){d.cssHooks[f]=tn(b.pixelPosition,function(m,y){if(y)return y=Pi(m,f),Ji.test(y)?d(m).position()[f]+"px":y})}),d.each({Height:"height",Width:"width"},function(c,f){d.each({padding:"inner"+c,content:f,"":"outer"+c},function(m,y){d.fn[y]=function(x,C){var O=arguments.length&&(m||"boolean"!=typeof x),L=m||(!0===x||!0===C?"margin":"border");return fe(this,function(D,z,Z){var et;return S(D)?0===y.indexOf("outer")?D["inner"+c]:D.document.documentElement["client"+c]:9===D.nodeType?(et=D.documentElement,Math.max(D.body["scroll"+c],et["scroll"+c],D.body["offset"+c],et["offset"+c],et["client"+c])):void 0===Z?d.css(D,z,L):d.style(D,z,Z,L)},f,O?x:void 0,O)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,f){d.fn[f]=function(m){return this.on(f,m)}}),d.fn.extend({bind:function(c,f,m){return this.on(c,null,f,m)},unbind:function(c,f){return this.off(c,null,f)},delegate:function(c,f,m,y){return this.on(f,c,m,y)},undelegate:function(c,f,m){return 1===arguments.length?this.off(c,"**"):this.off(f,c||"**",m)},hover:function(c,f){return this.on("mouseenter",c).on("mouseleave",f||c)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,f){d.fn[f]=function(m,y){return 0<arguments.length?this.on(f,null,m,y):this.trigger(f)}});var Nn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(c,f){var m,y,x;if("string"==typeof f&&(m=c[f],f=c,c=m),_(c))return y=t.call(arguments,2),(x=function(){return c.apply(f||this,y.concat(t.call(arguments)))}).guid=c.guid=c.guid||d.guid++,x},d.holdReady=function(c){c?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=X,d.isFunction=_,d.isWindow=S,d.camelCase=ee,d.type=G,d.now=Date.now,d.isNumeric=function(c){var f=d.type(c);return("number"===f||"string"===f)&&!isNaN(c-parseFloat(c))},d.trim=function(c){return null==c?"":(c+"").replace(Nn,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return d});var Hn=h.jQuery,Wn=h.$;return d.noConflict=function(c){return h.$===d&&(h.$=Wn),c&&h.jQuery===d&&(h.jQuery=Hn),d},typeof n>"u"&&(h.jQuery=h.$=d),d}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):h.Popper=n()}(this,function(){"use strict";function h(T){return T&&"[object Function]"==={}.toString.call(T)}function n(T,j){if(1!==T.nodeType)return[];var Y=T.ownerDocument.defaultView.getComputedStyle(T,null);return j?Y[j]:Y}function a(T){return"HTML"===T.nodeName?T:T.parentNode||T.host}function l(T){if(!T)return document.body;switch(T.nodeName){case"HTML":case"BODY":return T.ownerDocument.body;case"#document":return T.body}var j=n(T);return/(auto|scroll|overlay)/.test(j.overflow+j.overflowY+j.overflowX)?T:l(a(T))}function t(T){return T&&T.referenceNode?T.referenceNode:T}function e(T){return 11===T?de:10===T?$e:de||$e}function i(T){if(!T)return document.documentElement;for(var j=e(10)?document.body:null,N=T.offsetParent||null;N===j&&T.nextElementSibling;)N=(T=T.nextElementSibling).offsetParent;var Y=N&&N.nodeName;return Y&&"BODY"!==Y&&"HTML"!==Y?-1!==["TH","TD","TABLE"].indexOf(N.nodeName)&&"static"===n(N,"position")?i(N):N:T?T.ownerDocument.documentElement:document.documentElement}function s(T){return null===T.parentNode?T:s(T.parentNode)}function o(T,j){if(!(T&&T.nodeType&&j&&j.nodeType))return document.documentElement;var N=T.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING,Y=N?T:j,ot=N?j:T,lt=document.createRange();lt.setStart(Y,0),lt.setEnd(ot,0);var rt=lt.commonAncestorContainer;if(T!==rt&&j!==rt||Y.contains(ot))return function r(T){var j=T.nodeName;return"BODY"!==j&&("HTML"===j||i(T.firstElementChild)===T)}(rt)?rt:i(rt);var _t=s(T);return _t.host?o(_t.host,j):o(T,s(j).host)}function u(T){var j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",N="top"===j?"scrollTop":"scrollLeft",Y=T.nodeName;if("BODY"===Y||"HTML"===Y){var ot=T.ownerDocument.documentElement,lt=T.ownerDocument.scrollingElement||ot;return lt[N]}return T[N]}function g(T,j){var N=2<arguments.length&&void 0!==arguments[2]&&arguments[2],Y=u(j,"top"),ot=u(j,"left"),lt=N?-1:1;return T.top+=Y*lt,T.bottom+=Y*lt,T.left+=ot*lt,T.right+=ot*lt,T}function v(T,j){var N="x"===j?"Left":"Top",Y="Left"==N?"Right":"Bottom";return parseFloat(T["border"+N+"Width"])+parseFloat(T["border"+Y+"Width"])}function b(T,j,N,Y){return pe(j["offset"+T],j["scroll"+T],N["client"+T],N["offset"+T],N["scroll"+T],e(10)?parseInt(N["offset"+T])+parseInt(Y["margin"+("Height"===T?"Top":"Left")])+parseInt(Y["margin"+("Height"===T?"Bottom":"Right")]):0)}function _(T){var j=T.body,N=T.documentElement,Y=e(10)&&getComputedStyle(N);return{height:b("Height",j,N,Y),width:b("Width",j,N,Y)}}function S(T){return Jt({},T,{right:T.left+T.width,bottom:T.top+T.height})}function E(T){var j={};try{if(e(10)){j=T.getBoundingClientRect();var N=u(T,"top"),Y=u(T,"left");j.top+=N,j.left+=Y,j.bottom+=N,j.right+=Y}else j=T.getBoundingClientRect()}catch{}var ot={left:j.left,top:j.top,width:j.right-j.left,height:j.bottom-j.top},lt="HTML"===T.nodeName?_(T.ownerDocument):{},vt=T.offsetWidth-(lt.width||T.clientWidth||ot.width),St=T.offsetHeight-(lt.height||T.clientHeight||ot.height);if(vt||St){var Lt=n(T);vt-=v(Lt,"x"),St-=v(Lt,"y"),ot.width-=vt,ot.height-=St}return S(ot)}function M(T,j){var N=2<arguments.length&&void 0!==arguments[2]&&arguments[2],Y=e(10),ot="HTML"===j.nodeName,lt=E(T),rt=E(j),_t=l(T),vt=n(j),St=parseFloat(vt.borderTopWidth),Lt=parseFloat(vt.borderLeftWidth);N&&ot&&(rt.top=pe(rt.top,0),rt.left=pe(rt.left,0));var Tt=S({top:lt.top-rt.top-St,left:lt.left-rt.left-Lt,width:lt.width,height:lt.height});if(Tt.marginTop=0,Tt.marginLeft=0,!Y&&ot){var Mt=parseFloat(vt.marginTop),Wt=parseFloat(vt.marginLeft);Tt.top-=St-Mt,Tt.bottom-=St-Mt,Tt.left-=Lt-Wt,Tt.right-=Lt-Wt,Tt.marginTop=Mt,Tt.marginLeft=Wt}return(Y&&!N?j.contains(_t):j===_t&&"BODY"!==_t.nodeName)&&(Tt=g(Tt,j)),Tt}function F(T){var j=1<arguments.length&&void 0!==arguments[1]&&arguments[1],N=T.ownerDocument.documentElement,Y=M(T,N),ot=pe(N.clientWidth,window.innerWidth||0),lt=pe(N.clientHeight,window.innerHeight||0),rt=j?0:u(N),_t=j?0:u(N,"left"),vt={top:rt-Y.top+Y.marginTop,left:_t-Y.left+Y.marginLeft,width:ot,height:lt};return S(vt)}function G(T){var j=T.nodeName;if("BODY"===j||"HTML"===j)return!1;if("fixed"===n(T,"position"))return!0;var N=a(T);return!!N&&G(N)}function q(T){if(!T||!T.parentElement||e())return document.documentElement;for(var j=T.parentElement;j&&"none"===n(j,"transform");)j=j.parentElement;return j||document.documentElement}function k(T,j,N,Y){var ot=4<arguments.length&&void 0!==arguments[4]&&arguments[4],lt={top:0,left:0},rt=ot?q(T):o(T,t(j));if("viewport"===Y)lt=F(rt,ot);else{var _t;"scrollParent"===Y?"BODY"===(_t=l(a(j))).nodeName&&(_t=T.ownerDocument.documentElement):_t="window"===Y?T.ownerDocument.documentElement:Y;var vt=M(_t,rt,ot);if("HTML"!==_t.nodeName||G(rt))lt=vt;else{var St=_(T.ownerDocument),Lt=St.height,Tt=St.width;lt.top+=vt.top-vt.marginTop,lt.bottom=Lt+vt.top,lt.left+=vt.left-vt.marginLeft,lt.right=Tt+vt.left}}var Mt="number"==typeof(N=N||0);return lt.left+=Mt?N:N.left||0,lt.top+=Mt?N:N.top||0,lt.right-=Mt?N:N.right||0,lt.bottom-=Mt?N:N.bottom||0,lt}function d(T){return T.width*T.height}function H(T,j,N,Y,ot){var lt=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===T.indexOf("auto"))return T;var rt=k(N,Y,lt,ot),_t={top:{width:rt.width,height:j.top-rt.top},right:{width:rt.right-j.right,height:rt.height},bottom:{width:rt.width,height:rt.bottom-j.bottom},left:{width:j.left-rt.left,height:rt.height}},vt=Object.keys(_t).map(function(Mt){return Jt({key:Mt},_t[Mt],{area:d(_t[Mt])})}).sort(function(Mt,Wt){return Wt.area-Mt.area}),St=vt.filter(function(Mt){return Mt.width>=N.clientWidth&&Mt.height>=N.clientHeight}),Lt=0<St.length?St[0].key:vt[0].key,Tt=T.split("-")[1];return Lt+(Tt?"-"+Tt:"")}function X(T,j,N){var Y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,ot=Y?q(j):o(j,t(N));return M(N,ot,Y)}function K(T){var N=T.ownerDocument.defaultView.getComputedStyle(T),Y=parseFloat(N.marginTop||0)+parseFloat(N.marginBottom||0),ot=parseFloat(N.marginLeft||0)+parseFloat(N.marginRight||0);return{width:T.offsetWidth+ot,height:T.offsetHeight+Y}}function it(T){var j={left:"right",right:"left",bottom:"top",top:"bottom"};return T.replace(/left|right|bottom|top/g,function(N){return j[N]})}function B(T,j,N){N=N.split("-")[0];var Y=K(T),ot={width:Y.width,height:Y.height},lt=-1!==["right","left"].indexOf(N),rt=lt?"top":"left",_t=lt?"left":"top",vt=lt?"height":"width",St=lt?"width":"height";return ot[rt]=j[rt]+j[vt]/2-Y[vt]/2,ot[_t]=N===_t?j[_t]-Y[St]:j[it(_t)],ot}function P(T,j){return Array.prototype.find?T.find(j):T.filter(j)[0]}function nt(T,j,N){var Y=void 0===N?T:T.slice(0,function V(T,j,N){if(Array.prototype.findIndex)return T.findIndex(function(ot){return ot[j]===N});var Y=P(T,function(ot){return ot[j]===N});return T.indexOf(Y)}(T,"name",N));return Y.forEach(function(ot){ot.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var lt=ot.function||ot.fn;ot.enabled&&h(lt)&&(j.offsets.popper=S(j.offsets.popper),j.offsets.reference=S(j.offsets.reference),j=lt(j,ot))}),j}function J(){if(!this.state.isDestroyed){var T={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};T.offsets.reference=X(this.state,this.popper,this.reference,this.options.positionFixed),T.placement=H(this.options.placement,T.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),T.originalPlacement=T.placement,T.positionFixed=this.options.positionFixed,T.offsets.popper=B(this.popper,T.offsets.reference,T.placement),T.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",T=nt(this.modifiers,T),this.state.isCreated?this.options.onUpdate(T):(this.state.isCreated=!0,this.options.onCreate(T))}}function st(T,j){return T.some(function(N){return N.enabled&&N.name===j})}function ft(T){for(var j=[!1,"ms","Webkit","Moz","O"],N=T.charAt(0).toUpperCase()+T.slice(1),Y=0;Y<j.length;Y++){var ot=j[Y],lt=ot?""+ot+N:T;if(typeof document.body.style[lt]<"u")return lt}return null}function ut(){return this.state.isDestroyed=!0,st(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[ft("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function dt(T){var j=T.ownerDocument;return j?j.defaultView:window}function yt(T,j,N,Y){var ot="BODY"===T.nodeName,lt=ot?T.ownerDocument.defaultView:T;lt.addEventListener(j,N,{passive:!0}),ot||yt(l(lt.parentNode),j,N,Y),Y.push(lt)}function U(T,j,N,Y){N.updateBound=Y,dt(T).addEventListener("resize",N.updateBound,{passive:!0});var ot=l(T);return yt(ot,"scroll",N.updateBound,N.scrollParents),N.scrollElement=ot,N.eventsEnabled=!0,N}function pt(){this.state.eventsEnabled||(this.state=U(this.reference,0,this.state,this.scheduleUpdate))}function Dt(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function mt(T,j){return dt(T).removeEventListener("resize",j.updateBound),j.scrollParents.forEach(function(N){N.removeEventListener("scroll",j.updateBound)}),j.updateBound=null,j.scrollParents=[],j.scrollElement=null,j.eventsEnabled=!1,j}(this.reference,this.state))}function jt(T){return""!==T&&!isNaN(parseFloat(T))&&isFinite(T)}function Xt(T,j){Object.keys(j).forEach(function(N){var Y="";-1!==["width","height","top","right","bottom","left"].indexOf(N)&&jt(j[N])&&(Y="px"),T.style[N]=j[N]+Y})}function gt(T,j,N){var Y=P(T,function(rt){return rt.name===j}),ot=!!Y&&T.some(function(rt){return rt.name===N&&rt.enabled&&rt.order<Y.order});if(!ot){var lt="`"+j+"`";console.warn("`"+N+"` modifier is required by "+lt+" modifier in order to work, be sure to include it before "+lt+"!")}return ot}function Qt(T){var j=1<arguments.length&&void 0!==arguments[1]&&arguments[1],N=ye.indexOf(T),Y=ye.slice(N+1).concat(ye.slice(0,N));return j?Y.reverse():Y}var fe=Math.min,Le=Math.floor,Fe=Math.round,pe=Math.max,ee=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",be=function(){for(var T=["Edge","Trident","Firefox"],j=0;j<T.length;j+=1)if(ee&&0<=navigator.userAgent.indexOf(T[j]))return 1;return 0}(),Ot=ee&&window.Promise?function(T){var j=!1;return function(){j||(j=!0,window.Promise.resolve().then(function(){j=!1,T()}))}}:function(T){var j=!1;return function(){j||(j=!0,setTimeout(function(){j=!1,T()},be))}},de=ee&&!(!window.MSInputMethodContext||!document.documentMode),$e=ee&&/MSIE 10/.test(navigator.userAgent),ri=function(T,j){if(!(T instanceof j))throw new TypeError("Cannot call a class as a function")},Te=function(){function T(j,N){for(var Y,ot=0;ot<N.length;ot++)(Y=N[ot]).enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(j,Y.key,Y)}return function(j,N,Y){return N&&T(j.prototype,N),Y&&T(j,Y),j}}(),Oe=function(T,j,N){return j in T?Object.defineProperty(T,j,{value:N,enumerable:!0,configurable:!0,writable:!0}):T[j]=N,T},Jt=Object.assign||function(T){for(var j,N=1;N<arguments.length;N++)for(var Y in j=arguments[N])Object.prototype.hasOwnProperty.call(j,Y)&&(T[Y]=j[Y]);return T},se=ee&&/Firefox/i.test(navigator.userAgent),le=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ye=le.slice(3),Ee=function(){function T(j,N){var Y=this,ot=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};ri(this,T),this.scheduleUpdate=function(){return requestAnimationFrame(Y.update)},this.update=Ot(this.update.bind(this)),this.options=Jt({},T.Defaults,ot),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=j&&j.jquery?j[0]:j,this.popper=N&&N.jquery?N[0]:N,this.options.modifiers={},Object.keys(Jt({},T.Defaults.modifiers,ot.modifiers)).forEach(function(rt){Y.options.modifiers[rt]=Jt({},T.Defaults.modifiers[rt]||{},ot.modifiers?ot.modifiers[rt]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(rt){return Jt({name:rt},Y.options.modifiers[rt])}).sort(function(rt,_t){return rt.order-_t.order}),this.modifiers.forEach(function(rt){rt.enabled&&h(rt.onLoad)&&rt.onLoad(Y.reference,Y.popper,Y.options,rt,Y.state)}),this.update();var lt=this.options.eventsEnabled;lt&&this.enableEventListeners(),this.state.eventsEnabled=lt}return Te(T,[{key:"update",value:function(){return J.call(this)}},{key:"destroy",value:function(){return ut.call(this)}},{key:"enableEventListeners",value:function(){return pt.call(this)}},{key:"disableEventListeners",value:function(){return Dt.call(this)}}]),T}();return Ee.Utils=(typeof window>"u"?global:window).PopperUtils,Ee.placements=le,Ee.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(T){var j=T.placement,N=j.split("-")[0],Y=j.split("-")[1];if(Y){var ot=T.offsets,lt=ot.reference,rt=ot.popper,_t=-1!==["bottom","top"].indexOf(N),vt=_t?"left":"top",St=_t?"width":"height",Lt={start:Oe({},vt,lt[vt]),end:Oe({},vt,lt[vt]+lt[St]-rt[St])};T.offsets.popper=Jt({},rt,Lt[Y])}return T}},offset:{order:200,enabled:!0,fn:function Se(T,j){var N,Y=j.offset,lt=T.offsets,rt=lt.popper,_t=lt.reference,vt=T.placement.split("-")[0];return N=jt(+Y)?[+Y,0]:function Me(T,j,N,Y){var ot=[0,0],lt=-1!==["right","left"].indexOf(Y),rt=T.split(/(\+|\-)/).map(function(Lt){return Lt.trim()}),_t=rt.indexOf(P(rt,function(Lt){return-1!==Lt.search(/,|\s/)}));rt[_t]&&-1===rt[_t].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var vt=/\s*,\s*|\s+/,St=-1===_t?[rt]:[rt.slice(0,_t).concat([rt[_t].split(vt)[0]]),[rt[_t].split(vt)[1]].concat(rt.slice(_t+1))];return St=St.map(function(Lt,Tt){var Mt=(1===Tt?!lt:lt)?"height":"width",Wt=!1;return Lt.reduce(function(Nt,ie){return""===Nt[Nt.length-1]&&-1!==["+","-"].indexOf(ie)?(Nt[Nt.length-1]=ie,Wt=!0,Nt):Wt?(Nt[Nt.length-1]+=ie,Wt=!1,Nt):Nt.concat(ie)},[]).map(function(Nt){return function Be(T,j,N,Y){var ot=T.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),lt=+ot[1],rt=ot[2];return lt?0===rt.indexOf("%")?S("%p"===rt?N:Y)[j]/100*lt:"vh"===rt||"vw"===rt?("vh"===rt?pe(document.documentElement.clientHeight,window.innerHeight||0):pe(document.documentElement.clientWidth,window.innerWidth||0))/100*lt:lt:T}(Nt,Mt,j,N)})}),St.forEach(function(Lt,Tt){Lt.forEach(function(Mt,Wt){jt(Mt)&&(ot[Tt]+=Mt*("-"===Lt[Wt-1]?-1:1))})}),ot}(Y,rt,_t,vt),"left"===vt?(rt.top+=N[0],rt.left-=N[1]):"right"===vt?(rt.top+=N[0],rt.left+=N[1]):"top"===vt?(rt.left+=N[0],rt.top-=N[1]):"bottom"===vt&&(rt.left+=N[0],rt.top+=N[1]),T.popper=rt,T},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(T,j){var N=j.boundariesElement||i(T.instance.popper);T.instance.reference===N&&(N=i(N));var Y=ft("transform"),ot=T.instance.popper.style,lt=ot.top,rt=ot.left,_t=ot[Y];ot.top="",ot.left="",ot[Y]="";var vt=k(T.instance.popper,T.instance.reference,j.padding,N,T.positionFixed);ot.top=lt,ot.left=rt,ot[Y]=_t,j.boundaries=vt;var Lt=T.offsets.popper,Tt={primary:function(Mt){var Wt=Lt[Mt];return Lt[Mt]<vt[Mt]&&!j.escapeWithReference&&(Wt=pe(Lt[Mt],vt[Mt])),Oe({},Mt,Wt)},secondary:function(Mt){var Wt="right"===Mt?"left":"top",Nt=Lt[Wt];return Lt[Mt]>vt[Mt]&&!j.escapeWithReference&&(Nt=fe(Lt[Wt],vt[Mt]-("right"===Mt?Lt.width:Lt.height))),Oe({},Wt,Nt)}};return j.priority.forEach(function(Mt){var Wt=-1===["left","top"].indexOf(Mt)?"secondary":"primary";Lt=Jt({},Lt,Tt[Wt](Mt))}),T.offsets.popper=Lt,T},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(T){var j=T.offsets,N=j.popper,Y=j.reference,ot=T.placement.split("-")[0],lt=Le,rt=-1!==["top","bottom"].indexOf(ot),_t=rt?"right":"bottom",vt=rt?"left":"top",St=rt?"width":"height";return N[_t]<lt(Y[vt])&&(T.offsets.popper[vt]=lt(Y[vt])-N[St]),N[vt]>lt(Y[_t])&&(T.offsets.popper[vt]=lt(Y[_t])),T}},arrow:{order:500,enabled:!0,fn:function(T,j){var N;if(!gt(T.instance.modifiers,"arrow","keepTogether"))return T;var Y=j.element;if("string"==typeof Y){if(!(Y=T.instance.popper.querySelector(Y)))return T}else if(!T.instance.popper.contains(Y))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),T;var ot=T.placement.split("-")[0],lt=T.offsets,rt=lt.popper,_t=lt.reference,vt=-1!==["left","right"].indexOf(ot),St=vt?"height":"width",Lt=vt?"Top":"Left",Tt=Lt.toLowerCase(),Mt=vt?"left":"top",Wt=vt?"bottom":"right",Nt=K(Y)[St];_t[Wt]-Nt<rt[Tt]&&(T.offsets.popper[Tt]-=rt[Tt]-(_t[Wt]-Nt)),_t[Tt]+Nt>rt[Wt]&&(T.offsets.popper[Tt]+=_t[Tt]+Nt-rt[Wt]),T.offsets.popper=S(T.offsets.popper);var ie=_t[Tt]+_t[St]/2-Nt/2,Ne=n(T.instance.popper),Ue=parseFloat(Ne["margin"+Lt]),ke=parseFloat(Ne["border"+Lt+"Width"]),si=ie-T.offsets.popper[Tt]-Ue-ke;return si=pe(fe(rt[St]-Nt,si),0),T.arrowElement=Y,T.offsets.arrow=(Oe(N={},Tt,Fe(si)),Oe(N,Mt,""),N),T},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(T,j){if(st(T.instance.modifiers,"inner")||T.flipped&&T.placement===T.originalPlacement)return T;var N=k(T.instance.popper,T.instance.reference,j.padding,j.boundariesElement,T.positionFixed),Y=T.placement.split("-")[0],ot=it(Y),lt=T.placement.split("-")[1]||"",rt=[];switch(j.behavior){case"flip":rt=[Y,ot];break;case"clockwise":rt=Qt(Y);break;case"counterclockwise":rt=Qt(Y,!0);break;default:rt=j.behavior}return rt.forEach(function(_t,vt){if(Y!==_t||rt.length===vt+1)return T;Y=T.placement.split("-")[0],ot=it(Y);var St=T.offsets.popper,Lt=T.offsets.reference,Tt=Le,Mt="left"===Y&&Tt(St.right)>Tt(Lt.left)||"right"===Y&&Tt(St.left)<Tt(Lt.right)||"top"===Y&&Tt(St.bottom)>Tt(Lt.top)||"bottom"===Y&&Tt(St.top)<Tt(Lt.bottom),Wt=Tt(St.left)<Tt(N.left),Nt=Tt(St.right)>Tt(N.right),ie=Tt(St.top)<Tt(N.top),Ne=Tt(St.bottom)>Tt(N.bottom),Ue="left"===Y&&Wt||"right"===Y&&Nt||"top"===Y&&ie||"bottom"===Y&&Ne,ke=-1!==["top","bottom"].indexOf(Y),yi=!!j.flipVariations&&(ke&&"start"===lt&&Wt||ke&&"end"===lt&&Nt||!ke&&"start"===lt&&ie||!ke&&"end"===lt&&Ne)||!!j.flipVariationsByContent&&(ke&&"start"===lt&&Nt||ke&&"end"===lt&&Wt||!ke&&"start"===lt&&Ne||!ke&&"end"===lt&&ie);(Mt||Ue||yi)&&(T.flipped=!0,(Mt||Ue)&&(Y=rt[vt+1]),yi&&(lt=function Kt(T){return"end"===T?"start":"start"===T?"end":T}(lt)),T.placement=Y+(lt?"-"+lt:""),T.offsets.popper=Jt({},T.offsets.popper,B(T.instance.popper,T.offsets.reference,T.placement)),T=nt(T.instance.modifiers,T,"flip"))}),T},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(T){var j=T.placement,N=j.split("-")[0],Y=T.offsets,ot=Y.popper,lt=Y.reference,rt=-1!==["left","right"].indexOf(N),_t=-1===["top","left"].indexOf(N);return ot[rt?"left":"top"]=lt[N]-(_t?ot[rt?"width":"height"]:0),T.placement=it(j),T.offsets.popper=S(ot),T}},hide:{order:800,enabled:!0,fn:function(T){if(!gt(T.instance.modifiers,"hide","preventOverflow"))return T;var j=T.offsets.reference,N=P(T.instance.modifiers,function(Y){return"preventOverflow"===Y.name}).boundaries;if(j.bottom<N.top||j.left>N.right||j.top>N.bottom||j.right<N.left){if(!0===T.hide)return T;T.hide=!0,T.attributes["x-out-of-boundaries"]=""}else{if(!1===T.hide)return T;T.hide=!1,T.attributes["x-out-of-boundaries"]=!1}return T}},computeStyle:{order:850,enabled:!0,fn:function(T,j){var N=j.x,Y=j.y,ot=T.offsets.popper,lt=P(T.instance.modifiers,function(si){return"applyStyle"===si.name}).gpuAcceleration;void 0!==lt&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var rt,_t,vt=void 0===lt?j.gpuAcceleration:lt,St=i(T.instance.popper),Lt=E(St),Tt={position:ot.position},Mt=function qt(T,j){var N=T.offsets,Y=N.popper,lt=Fe,rt=function(Wt){return Wt},_t=lt(N.reference.width),vt=lt(Y.width),St=-1!==["left","right"].indexOf(T.placement),Lt=-1!==T.placement.indexOf("-"),Tt=j?St||Lt||_t%2==vt%2?lt:Le:rt,Mt=j?lt:rt;return{left:Tt(_t%2==1&&vt%2==1&&!Lt&&j?Y.left-1:Y.left),top:Mt(Y.top),bottom:Mt(Y.bottom),right:Tt(Y.right)}}(T,2>window.devicePixelRatio||!se),Wt="bottom"===N?"top":"bottom",Nt="right"===Y?"left":"right",ie=ft("transform");if(_t="bottom"==Wt?"HTML"===St.nodeName?-St.clientHeight+Mt.bottom:-Lt.height+Mt.bottom:Mt.top,rt="right"==Nt?"HTML"===St.nodeName?-St.clientWidth+Mt.right:-Lt.width+Mt.right:Mt.left,vt&&ie)Tt[ie]="translate3d("+rt+"px, "+_t+"px, 0)",Tt[Wt]=0,Tt[Nt]=0,Tt.willChange="transform";else{var Ue="right"==Nt?-1:1;Tt[Wt]=_t*("bottom"==Wt?-1:1),Tt[Nt]=rt*Ue,Tt.willChange=Wt+", "+Nt}return T.attributes=Jt({},{"x-placement":T.placement},T.attributes),T.styles=Jt({},Tt,T.styles),T.arrowStyles=Jt({},T.offsets.arrow,T.arrowStyles),T},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(T){return Xt(T.instance.popper,T.styles),function Zt(T,j){Object.keys(j).forEach(function(N){!1===j[N]?T.removeAttribute(N):T.setAttribute(N,j[N])})}(T.instance.popper,T.attributes),T.arrowElement&&Object.keys(T.arrowStyles).length&&Xt(T.arrowElement,T.arrowStyles),T},onLoad:function(T,j,N,Y,ot){var lt=X(ot,j,T,N.positionFixed),rt=H(N.placement,lt,j,T,N.modifiers.flip.boundariesElement,N.modifiers.flip.padding);return j.setAttribute("x-placement",rt),Xt(j,{position:N.positionFixed?"fixed":"absolute"}),N},gpuAcceleration:void 0}}},Ee}),function(h,n){"object"==typeof exports&&typeof module<"u"?module.exports=n(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],n):(h=typeof globalThis<"u"?globalThis:h||self).bootstrap=n(h.Popper)}(this,function(h){"use strict";const a=function n(I){const p=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(I)for(const w in I)if("default"!==w){const R=Object.getOwnPropertyDescriptor(I,w);Object.defineProperty(p,w,R.get?R:{enumerable:!0,get:()=>I[w]})}return p.default=I,Object.freeze(p)}(h),l=new Map,t={set(I,p,w){l.has(I)||l.set(I,new Map);const R=l.get(I);R.has(p)||0===R.size?R.set(p,w):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(R.keys())[0]}.`)},get:(I,p)=>l.has(I)&&l.get(I).get(p)||null,remove(I,p){if(!l.has(I))return;const w=l.get(I);w.delete(p),0===w.size&&l.delete(I)}},e="transitionend",i=I=>(I&&window.CSS&&window.CSS.escape&&(I=I.replace(/#([^\s"#']+)/g,(p,w)=>`#${CSS.escape(w)}`)),I),r=I=>{I.dispatchEvent(new Event(e))},s=I=>!(!I||"object"!=typeof I)&&(void 0!==I.jquery&&(I=I[0]),void 0!==I.nodeType),o=I=>s(I)?I.jquery?I[0]:I:"string"==typeof I&&I.length>0?document.querySelector(i(I)):null,u=I=>{if(!s(I)||0===I.getClientRects().length)return!1;const p="visible"===getComputedStyle(I).getPropertyValue("visibility"),w=I.closest("details:not([open])");if(!w)return p;if(w!==I){const R=I.closest("summary");if(R&&R.parentNode!==w||null===R)return!1}return p},g=I=>!I||I.nodeType!==Node.ELEMENT_NODE||!!I.classList.contains("disabled")||(void 0!==I.disabled?I.disabled:I.hasAttribute("disabled")&&"false"!==I.getAttribute("disabled")),v=I=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof I.getRootNode){const p=I.getRootNode();return p instanceof ShadowRoot?p:null}return I instanceof ShadowRoot?I:I.parentNode?v(I.parentNode):null},b=()=>{},S=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],M=()=>"rtl"===document.documentElement.dir,F=I=>{var p;p=()=>{const w=S();if(w){const R=I.NAME,ht=w.fn[R];w.fn[R]=I.jQueryInterface,w.fn[R].Constructor=I,w.fn[R].noConflict=()=>(w.fn[R]=ht,I.jQueryInterface)}},"loading"===document.readyState?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const w of E)w()}),E.push(p)):p()},G=(I,p=[],w=I)=>"function"==typeof I?I(...p):w,q=(I,p,w=!0)=>{if(!w)return void G(I);const R=(kt=>{if(!kt)return 0;let{transitionDuration:Gt,transitionDelay:ue}=window.getComputedStyle(kt);const Ye=Number.parseFloat(Gt),qe=Number.parseFloat(ue);return Ye||qe?(Gt=Gt.split(",")[0],ue=ue.split(",")[0],1e3*(Number.parseFloat(Gt)+Number.parseFloat(ue))):0})(p)+5;let ht=!1;const bt=({target:kt})=>{kt===p&&(ht=!0,p.removeEventListener(e,bt),G(I))};p.addEventListener(e,bt),setTimeout(()=>{ht||r(p)},R)},k=(I,p,w,R)=>{const ht=I.length;let bt=I.indexOf(p);return-1===bt?!w&&R?I[ht-1]:I[0]:(bt+=w?1:-1,R&&(bt=(bt+ht)%ht),I[Math.max(0,Math.min(bt,ht-1))])},d=/[^.]*(?=\..*)\.|.*/,H=/\..*/,X=/::\d+$/,K={};let it=1;const B={mouseenter:"mouseover",mouseleave:"mouseout"},P=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function V(I,p){return p&&`${p}::${it++}`||I.uidEvent||it++}function nt(I){const p=V(I);return I.uidEvent=p,K[p]=K[p]||{},K[p]}function J(I,p,w=null){return Object.values(I).find(R=>R.callable===p&&R.delegationSelector===w)}function st(I,p,w){const R="string"==typeof p,ht=R?w:p||w;let bt=yt(I);return P.has(bt)||(bt=I),[R,ht,bt]}function ft(I,p,w,R,ht){if("string"!=typeof p||!I)return;let[bt,kt,Gt]=st(p,w,R);var Ii;p in B&&(Ii=kt,kt=function(ui){if(!ui.relatedTarget||ui.relatedTarget!==ui.delegateTarget&&!ui.delegateTarget.contains(ui.relatedTarget))return Ii.call(this,ui)});const ue=nt(I),Ye=ue[Gt]||(ue[Gt]={}),qe=J(Ye,kt,bt?w:null);if(qe)return void(qe.oneOff=qe.oneOff&&ht);const hi=V(kt,p.replace(d,"")),xi=bt?function(Ci,Ii,ui){return function bn(zn){const Jn=Ci.querySelectorAll(Ii);for(let{target:Ri}=zn;Ri&&Ri!==this;Ri=Ri.parentNode)for(const Zn of Jn)if(Zn===Ri)return pt(zn,{delegateTarget:Ri}),bn.oneOff&&U.off(Ci,zn.type,Ii,ui),ui.apply(Ri,[zn])}}(I,w,kt):function(Ci,Ii){return function ui(bn){return pt(bn,{delegateTarget:Ci}),ui.oneOff&&U.off(Ci,bn.type,Ii),Ii.apply(Ci,[bn])}}(I,kt);xi.delegationSelector=bt?w:null,xi.callable=kt,xi.oneOff=ht,xi.uidEvent=hi,Ye[hi]=xi,I.addEventListener(Gt,xi,bt)}function ut(I,p,w,R,ht){const bt=J(p[w],R,ht);bt&&(I.removeEventListener(w,bt,Boolean(ht)),delete p[w][bt.uidEvent])}function dt(I,p,w,R){const ht=p[w]||{};for(const[bt,kt]of Object.entries(ht))bt.includes(R)&&ut(I,p,w,kt.callable,kt.delegationSelector)}function yt(I){return I=I.replace(H,""),B[I]||I}const U={on(I,p,w,R){ft(I,p,w,R,!1)},one(I,p,w,R){ft(I,p,w,R,!0)},off(I,p,w,R){if("string"!=typeof p||!I)return;const[ht,bt,kt]=st(p,w,R),Gt=kt!==p,ue=nt(I),Ye=ue[kt]||{},qe=p.startsWith(".");if(void 0===bt){if(qe)for(const hi of Object.keys(ue))dt(I,ue,hi,p.slice(1));for(const[hi,xi]of Object.entries(Ye)){const Ci=hi.replace(X,"");Gt&&!p.includes(Ci)||ut(I,ue,kt,xi.callable,xi.delegationSelector)}}else{if(!Object.keys(Ye).length)return;ut(I,ue,kt,bt,ht?w:null)}},trigger(I,p,w){if("string"!=typeof p||!I)return null;const R=S();let ht=null,bt=!0,kt=!0,Gt=!1;p!==yt(p)&&R&&(ht=R.Event(p,w),R(I).trigger(ht),bt=!ht.isPropagationStopped(),kt=!ht.isImmediatePropagationStopped(),Gt=ht.isDefaultPrevented());const ue=pt(new Event(p,{bubbles:bt,cancelable:!0}),w);return Gt&&ue.preventDefault(),kt&&I.dispatchEvent(ue),ue.defaultPrevented&&ht&&ht.preventDefault(),ue}};function pt(I,p={}){for(const[w,R]of Object.entries(p))try{I[w]=R}catch{Object.defineProperty(I,w,{configurable:!0,get:()=>R})}return I}function mt(I){if("true"===I)return!0;if("false"===I)return!1;if(I===Number(I).toString())return Number(I);if(""===I||"null"===I)return null;if("string"!=typeof I)return I;try{return JSON.parse(decodeURIComponent(I))}catch{return I}}function Dt(I){return I.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)}const jt={setDataAttribute(I,p,w){I.setAttribute(`data-bs-${Dt(p)}`,w)},removeDataAttribute(I,p){I.removeAttribute(`data-bs-${Dt(p)}`)},getDataAttributes(I){if(!I)return{};const p={},w=Object.keys(I.dataset).filter(R=>R.startsWith("bs")&&!R.startsWith("bsConfig"));for(const R of w){let ht=R.replace(/^bs/,"");ht=ht.charAt(0).toLowerCase()+ht.slice(1,ht.length),p[ht]=mt(I.dataset[R])}return p},getDataAttribute:(I,p)=>mt(I.getAttribute(`data-bs-${Dt(p)}`))};class Xt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(p){return p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p}_mergeConfigObj(p,w){const R=s(w)?jt.getDataAttribute(w,"config"):{};return{...this.constructor.Default,..."object"==typeof R?R:{},...s(w)?jt.getDataAttributes(w):{},..."object"==typeof p?p:{}}}_typeCheckConfig(p,w=this.constructor.DefaultType){for(const[ht,bt]of Object.entries(w)){const kt=p[ht],Gt=s(kt)?"element":null==(R=kt)?`${R}`:Object.prototype.toString.call(R).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(bt).test(Gt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ht}" provided type "${Gt}" but expected type "${bt}".`)}var R}}class Zt extends Xt{constructor(p,w){super(),(p=o(p))&&(this._element=p,this._config=this._getConfig(w),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const p of Object.getOwnPropertyNames(this))this[p]=null}_queueCallback(p,w,R=!0){q(p,w,R)}_getConfig(p){return p=this._mergeConfigObj(p,this._element),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}static getInstance(p){return t.get(o(p),this.DATA_KEY)}static getOrCreateInstance(p,w={}){return this.getInstance(p)||new this(p,"object"==typeof w?w:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(p){return`${p}${this.EVENT_KEY}`}}const qt=I=>{let p=I.getAttribute("data-bs-target");if(!p||"#"===p){let w=I.getAttribute("href");if(!w||!w.includes("#")&&!w.startsWith("."))return null;w.includes("#")&&!w.startsWith("#")&&(w=`#${w.split("#")[1]}`),p=w&&"#"!==w?i(w.trim()):null}return p},gt={find:(I,p=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(p,I)),findOne:(I,p=document.documentElement)=>Element.prototype.querySelector.call(p,I),children:(I,p)=>[].concat(...I.children).filter(w=>w.matches(p)),parents(I,p){const w=[];let R=I.parentNode.closest(p);for(;R;)w.push(R),R=R.parentNode.closest(p);return w},prev(I,p){let w=I.previousElementSibling;for(;w;){if(w.matches(p))return[w];w=w.previousElementSibling}return[]},next(I,p){let w=I.nextElementSibling;for(;w;){if(w.matches(p))return[w];w=w.nextElementSibling}return[]},focusableChildren(I){const p=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(w=>`${w}:not([tabindex^="-"])`).join(",");return this.find(p,I).filter(w=>!g(w)&&u(w))},getSelectorFromElement(I){const p=qt(I);return p&&gt.findOne(p)?p:null},getElementFromSelector(I){const p=qt(I);return p?gt.findOne(p):null},getMultipleElementsFromSelector(I){const p=qt(I);return p?gt.find(p):[]}},Kt=(I,p="hide")=>{const R=I.NAME;U.on(document,`click.dismiss${I.EVENT_KEY}`,`[data-bs-dismiss="${R}"]`,function(ht){if(["A","AREA"].includes(this.tagName)&&ht.preventDefault(),g(this))return;const bt=gt.getElementFromSelector(this)||this.closest(`.${R}`);I.getOrCreateInstance(bt)[p]()})},Qt=".bs.alert",Be=`close${Qt}`,Me=`closed${Qt}`;class Se extends Zt{static get NAME(){return"alert"}close(){if(U.trigger(this._element,Be).defaultPrevented)return;this._element.classList.remove("show");const p=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,p)}_destroyElement(){this._element.remove(),U.trigger(this._element,Me),this.dispose()}static jQueryInterface(p){return this.each(function(){const w=Se.getOrCreateInstance(this);if("string"==typeof p){if(void 0===w[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);w[p](this)}})}}Kt(Se,"close"),F(Se);const fe='[data-bs-toggle="button"]';class Le extends Zt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(p){return this.each(function(){const w=Le.getOrCreateInstance(this);"toggle"===p&&w[p]()})}}U.on(document,"click.bs.button.data-api",fe,I=>{I.preventDefault();const p=I.target.closest(fe);Le.getOrCreateInstance(p).toggle()}),F(Le);const Fe=".bs.swipe",pe=`touchstart${Fe}`,ee=`touchmove${Fe}`,be=`touchend${Fe}`,xe=`pointerdown${Fe}`,Ot=`pointerup${Fe}`,de={endCallback:null,leftCallback:null,rightCallback:null},$e={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ri extends Xt{constructor(p,w){super(),this._element=p,p&&ri.isSupported()&&(this._config=this._getConfig(w),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return de}static get DefaultType(){return $e}static get NAME(){return"swipe"}dispose(){U.off(this._element,Fe)}_start(p){this._supportPointerEvents?this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX):this._deltaX=p.touches[0].clientX}_end(p){this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX-this._deltaX),this._handleSwipe(),G(this._config.endCallback)}_move(p){this._deltaX=p.touches&&p.touches.length>1?0:p.touches[0].clientX-this._deltaX}_handleSwipe(){const p=Math.abs(this._deltaX);if(p<=40)return;const w=p/this._deltaX;this._deltaX=0,w&&G(w>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,xe,p=>this._start(p)),U.on(this._element,Ot,p=>this._end(p)),this._element.classList.add("pointer-event")):(U.on(this._element,pe,p=>this._start(p)),U.on(this._element,ee,p=>this._move(p)),U.on(this._element,be,p=>this._end(p)))}_eventIsPointerPenTouch(p){return this._supportPointerEvents&&("pen"===p.pointerType||"touch"===p.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Te=".bs.carousel",Oe=".data-api",Jt="next",se="prev",le="left",ye="right",fi=`slide${Te}`,Ee=`slid${Te}`,T=`keydown${Te}`,j=`mouseenter${Te}`,N=`mouseleave${Te}`,Y=`dragstart${Te}`,ot=`load${Te}${Oe}`,lt=`click${Te}${Oe}`,rt="carousel",_t="active",Tt={ArrowLeft:ye,ArrowRight:le},Mt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Wt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Nt extends Zt{constructor(p,w){super(p,w),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=gt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===rt&&this.cycle()}static get Default(){return Mt}static get DefaultType(){return Wt}static get NAME(){return"carousel"}next(){this._slide(Jt)}nextWhenVisible(){!document.hidden&&u(this._element)&&this.next()}prev(){this._slide(se)}pause(){this._isSliding&&r(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?U.one(this._element,Ee,()=>this.cycle()):this.cycle())}to(p){const w=this._getItems();if(p>w.length-1||p<0)return;if(this._isSliding)return void U.one(this._element,Ee,()=>this.to(p));const R=this._getItemIndex(this._getActive());R!==p&&this._slide(p>R?Jt:se,w[p])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(p){return p.defaultInterval=p.interval,p}_addEventListeners(){this._config.keyboard&&U.on(this._element,T,p=>this._keydown(p)),"hover"===this._config.pause&&(U.on(this._element,j,()=>this.pause()),U.on(this._element,N,()=>this._maybeEnableCycle())),this._config.touch&&ri.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const w of gt.find(".carousel-item img",this._element))U.on(w,Y,R=>R.preventDefault());this._swipeHelper=new ri(this._element,{leftCallback:()=>this._slide(this._directionToOrder(le)),rightCallback:()=>this._slide(this._directionToOrder(ye)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(p){if(/input|textarea/i.test(p.target.tagName))return;const w=Tt[p.key];w&&(p.preventDefault(),this._slide(this._directionToOrder(w)))}_getItemIndex(p){return this._getItems().indexOf(p)}_setActiveIndicatorElement(p){if(!this._indicatorsElement)return;const w=gt.findOne(".active",this._indicatorsElement);w.classList.remove(_t),w.removeAttribute("aria-current");const R=gt.findOne(`[data-bs-slide-to="${p}"]`,this._indicatorsElement);R&&(R.classList.add(_t),R.setAttribute("aria-current","true"))}_updateInterval(){const p=this._activeElement||this._getActive();if(!p)return;const w=Number.parseInt(p.getAttribute("data-bs-interval"),10);this._config.interval=w||this._config.defaultInterval}_slide(p,w=null){if(this._isSliding)return;const R=this._getActive(),ht=p===Jt,bt=w||k(this._getItems(),R,ht,this._config.wrap);if(bt===R)return;const kt=this._getItemIndex(bt),Gt=hi=>U.trigger(this._element,hi,{relatedTarget:bt,direction:this._orderToDirection(p),from:this._getItemIndex(R),to:kt});if(Gt(fi).defaultPrevented||!R||!bt)return;const ue=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(kt),this._activeElement=bt;const Ye=ht?"carousel-item-start":"carousel-item-end",qe=ht?"carousel-item-next":"carousel-item-prev";bt.classList.add(qe),R.classList.add(Ye),bt.classList.add(Ye),this._queueCallback(()=>{bt.classList.remove(Ye,qe),bt.classList.add(_t),R.classList.remove(_t,qe,Ye),this._isSliding=!1,Gt(Ee)},R,this._isAnimated()),ue&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return gt.findOne(".active.carousel-item",this._element)}_getItems(){return gt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(p){return M()?p===le?se:Jt:p===le?Jt:se}_orderToDirection(p){return M()?p===se?le:ye:p===se?ye:le}static jQueryInterface(p){return this.each(function(){const w=Nt.getOrCreateInstance(this,p);if("number"!=typeof p){if("string"==typeof p){if(void 0===w[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);w[p]()}}else w.to(p)})}}U.on(document,lt,"[data-bs-slide], [data-bs-slide-to]",function(I){const p=gt.getElementFromSelector(this);if(!p||!p.classList.contains(rt))return;I.preventDefault();const w=Nt.getOrCreateInstance(p),R=this.getAttribute("data-bs-slide-to");return R?(w.to(R),void w._maybeEnableCycle()):"next"===jt.getDataAttribute(this,"slide")?(w.next(),void w._maybeEnableCycle()):(w.prev(),void w._maybeEnableCycle())}),U.on(window,ot,()=>{const I=gt.find('[data-bs-ride="carousel"]');for(const p of I)Nt.getOrCreateInstance(p)}),F(Nt);const ie=".bs.collapse",Ne=`show${ie}`,Ue=`shown${ie}`,ke=`hide${ie}`,si=`hidden${ie}`,Qi=`click${ie}.data-api`,yi="show",wi="collapse",Bi="collapsing",xn=`:scope .${wi} .${wi}`,di='[data-bs-toggle="collapse"]',Cn={parent:null,toggle:!0},Ji={parent:"(null|element)",toggle:"boolean"};class pi extends Zt{constructor(p,w){super(p,w),this._isTransitioning=!1,this._triggerArray=[];const R=gt.find(di);for(const ht of R){const bt=gt.getSelectorFromElement(ht),kt=gt.find(bt).filter(Gt=>Gt===this._element);null!==bt&&kt.length&&this._triggerArray.push(ht)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Cn}static get DefaultType(){return Ji}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let p=[];if(this._config.parent&&(p=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(ht=>ht!==this._element).map(ht=>pi.getOrCreateInstance(ht,{toggle:!1}))),p.length&&p[0]._isTransitioning||U.trigger(this._element,Ne).defaultPrevented)return;for(const ht of p)ht.hide();const w=this._getDimension();this._element.classList.remove(wi),this._element.classList.add(Bi),this._element.style[w]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const R=`scroll${w[0].toUpperCase()+w.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Bi),this._element.classList.add(wi,yi),this._element.style[w]="",U.trigger(this._element,Ue)},this._element,!0),this._element.style[w]=`${this._element[R]}px`}hide(){if(this._isTransitioning||!this._isShown()||U.trigger(this._element,ke).defaultPrevented)return;const p=this._getDimension();this._element.style[p]=`${this._element.getBoundingClientRect()[p]}px`,this._element.classList.add(Bi),this._element.classList.remove(wi,yi);for(const w of this._triggerArray){const R=gt.getElementFromSelector(w);R&&!this._isShown(R)&&this._addAriaAndCollapsedClass([w],!1)}this._isTransitioning=!0,this._element.style[p]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Bi),this._element.classList.add(wi),U.trigger(this._element,si)},this._element,!0)}_isShown(p=this._element){return p.classList.contains(yi)}_configAfterMerge(p){return p.toggle=Boolean(p.toggle),p.parent=o(p.parent),p}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const p=this._getFirstLevelChildren(di);for(const w of p){const R=gt.getElementFromSelector(w);R&&this._addAriaAndCollapsedClass([w],this._isShown(R))}}_getFirstLevelChildren(p){const w=gt.find(xn,this._config.parent);return gt.find(p,this._config.parent).filter(R=>!w.includes(R))}_addAriaAndCollapsedClass(p,w){if(p.length)for(const R of p)R.classList.toggle("collapsed",!w),R.setAttribute("aria-expanded",w)}static jQueryInterface(p){const w={};return"string"==typeof p&&/show|hide/.test(p)&&(w.toggle=!1),this.each(function(){const R=pi.getOrCreateInstance(this,w);if("string"==typeof p){if(void 0===R[p])throw new TypeError(`No method named "${p}"`);R[p]()}})}}U.on(document,Qi,di,function(I){("A"===I.target.tagName||I.delegateTarget&&"A"===I.delegateTarget.tagName)&&I.preventDefault();for(const p of gt.getMultipleElementsFromSelector(this))pi.getOrCreateInstance(p,{toggle:!1}).toggle()}),F(pi);const Ai="dropdown",gi=".bs.dropdown",Zi=".data-api",Pi="ArrowUp",tn="ArrowDown",wn=`hide${gi}`,Sn=`hidden${gi}`,Tn=`show${gi}`,en=`shown${gi}`,On=`click${gi}${Zi}`,En=`keydown${gi}${Zi}`,kn=`keyup${gi}${Zi}`,_i="show",oi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',An=`${oi}.show`,Ae=".dropdown-menu",Si=M()?"top-end":"top-start",Ni=M()?"top-start":"top-end",Ti=M()?"bottom-end":"bottom-start",Pn=M()?"bottom-start":"bottom-end",Yn=M()?"left-start":"right-start",Un=M()?"right-start":"left-start",nn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Dn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Pe extends Zt{constructor(p,w){super(p,w),this._popper=null,this._parent=this._element.parentNode,this._menu=gt.next(this._element,Ae)[0]||gt.prev(this._element,Ae)[0]||gt.findOne(Ae,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return nn}static get DefaultType(){return Dn}static get NAME(){return Ai}toggle(){return this._isShown()?this.hide():this.show()}show(){if(g(this._element)||this._isShown())return;const p={relatedTarget:this._element};if(!U.trigger(this._element,Tn,p).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const w of[].concat(...document.body.children))U.on(w,"mouseover",b);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(_i),this._element.classList.add(_i),U.trigger(this._element,en,p)}}hide(){!g(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(p){if(!U.trigger(this._element,wn,p).defaultPrevented){if("ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))U.off(w,"mouseover",b);this._popper&&this._popper.destroy(),this._menu.classList.remove(_i),this._element.classList.remove(_i),this._element.setAttribute("aria-expanded","false"),jt.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,Sn,p)}}_getConfig(p){if("object"==typeof(p=super._getConfig(p)).reference&&!s(p.reference)&&"function"!=typeof p.reference.getBoundingClientRect)throw new TypeError(`${Ai.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return p}_createPopper(){if(void 0===a)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let p=this._element;"parent"===this._config.reference?p=this._parent:s(this._config.reference)?p=o(this._config.reference):"object"==typeof this._config.reference&&(p=this._config.reference);const w=this._getPopperConfig();this._popper=a.createPopper(p,this._menu,w)}_isShown(){return this._menu.classList.contains(_i)}_getPlacement(){const p=this._parent;if(p.classList.contains("dropend"))return Yn;if(p.classList.contains("dropstart"))return Un;if(p.classList.contains("dropup-center"))return"top";if(p.classList.contains("dropdown-center"))return"bottom";const w="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return p.classList.contains("dropup")?w?Ni:Si:w?Pn:Ti}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:p}=this._config;return"string"==typeof p?p.split(",").map(w=>Number.parseInt(w,10)):"function"==typeof p?w=>p(w,this._element):p}_getPopperConfig(){const p={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(jt.setDataAttribute(this._menu,"popper","static"),p.modifiers=[{name:"applyStyles",enabled:!1}]),{...p,...G(this._config.popperConfig,[p])}}_selectMenuItem({key:p,target:w}){const R=gt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(ht=>u(ht));R.length&&k(R,w,p===tn,!R.includes(w)).focus()}static jQueryInterface(p){return this.each(function(){const w=Pe.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===w[p])throw new TypeError(`No method named "${p}"`);w[p]()}})}static clearMenus(p){if(2===p.button||"keyup"===p.type&&"Tab"!==p.key)return;const w=gt.find(An);for(const R of w){const ht=Pe.getInstance(R);if(!ht||!1===ht._config.autoClose)continue;const bt=p.composedPath(),kt=bt.includes(ht._menu);if(bt.includes(ht._element)||"inside"===ht._config.autoClose&&!kt||"outside"===ht._config.autoClose&&kt||ht._menu.contains(p.target)&&("keyup"===p.type&&"Tab"===p.key||/input|select|option|textarea|form/i.test(p.target.tagName)))continue;const Gt={relatedTarget:ht._element};"click"===p.type&&(Gt.clickEvent=p),ht._completeHide(Gt)}}static dataApiKeydownHandler(p){const w=/input|textarea/i.test(p.target.tagName),R="Escape"===p.key,ht=[Pi,tn].includes(p.key);if(!ht&&!R||w&&!R)return;p.preventDefault();const bt=this.matches(oi)?this:gt.prev(this,oi)[0]||gt.next(this,oi)[0]||gt.findOne(oi,p.delegateTarget.parentNode),kt=Pe.getOrCreateInstance(bt);if(ht)return p.stopPropagation(),kt.show(),void kt._selectMenuItem(p);kt._isShown()&&(p.stopPropagation(),kt.hide(),bt.focus())}}U.on(document,En,oi,Pe.dataApiKeydownHandler),U.on(document,En,Ae,Pe.dataApiKeydownHandler),U.on(document,On,Pe.clearMenus),U.on(document,kn,Pe.clearMenus),U.on(document,On,oi,function(I){I.preventDefault(),Pe.getOrCreateInstance(this).toggle()}),F(Pe);const rn="backdrop",sn=`mousedown.bs.${rn}`,Di={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Vn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class jn extends Xt{constructor(p){super(),this._config=this._getConfig(p),this._isAppended=!1,this._element=null}static get Default(){return Di}static get DefaultType(){return Vn}static get NAME(){return rn}show(p){if(!this._config.isVisible)return void G(p);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{G(p)})}hide(p){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),G(p)})):G(p)}dispose(){this._isAppended&&(U.off(this._element,sn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const p=document.createElement("div");p.className=this._config.className,this._config.isAnimated&&p.classList.add("fade"),this._element=p}return this._element}_configAfterMerge(p){return p.rootElement=o(p.rootElement),p}_append(){if(this._isAppended)return;const p=this._getElement();this._config.rootElement.append(p),U.on(p,sn,()=>{G(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(p){q(p,this._getElement(),this._config.isAnimated)}}const Ke=".bs.focustrap",bi=`focusin${Ke}`,on=`keydown.tab${Ke}`,Mn="backward",ji={autofocus:!0,trapElement:null},Ln={autofocus:"boolean",trapElement:"element"};class Hi extends Xt{constructor(p){super(),this._config=this._getConfig(p),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ji}static get DefaultType(){return Ln}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,Ke),U.on(document,bi,p=>this._handleFocusin(p)),U.on(document,on,p=>this._handleKeydown(p)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,Ke))}_handleFocusin(p){const{trapElement:w}=this._config;if(p.target===document||p.target===w||w.contains(p.target))return;const R=gt.focusableChildren(w);0===R.length?w.focus():this._lastTabNavDirection===Mn?R[R.length-1].focus():R[0].focus()}_handleKeydown(p){"Tab"===p.key&&(this._lastTabNavDirection=p.shiftKey?Mn:"forward")}}const an=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ln=".sticky-top",Wi="padding-right",cn="margin-right";class hn{constructor(){this._element=document.body}getWidth(){const p=document.documentElement.clientWidth;return Math.abs(window.innerWidth-p)}hide(){const p=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Wi,w=>w+p),this._setElementAttributes(an,Wi,w=>w+p),this._setElementAttributes(ln,cn,w=>w-p)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Wi),this._resetElementAttributes(an,Wi),this._resetElementAttributes(ln,cn)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(p,w,R){const ht=this.getWidth();this._applyManipulationCallback(p,bt=>{if(bt!==this._element&&window.innerWidth>bt.clientWidth+ht)return;this._saveInitialAttribute(bt,w);const kt=window.getComputedStyle(bt).getPropertyValue(w);bt.style.setProperty(w,`${R(Number.parseFloat(kt))}px`)})}_saveInitialAttribute(p,w){const R=p.style.getPropertyValue(w);R&&jt.setDataAttribute(p,w,R)}_resetElementAttributes(p,w){this._applyManipulationCallback(p,R=>{const ht=jt.getDataAttribute(R,w);null!==ht?(jt.removeDataAttribute(R,w),R.style.setProperty(w,ht)):R.style.removeProperty(w)})}_applyManipulationCallback(p,w){if(s(p))w(p);else for(const R of gt.find(p,this._element))w(R)}}const We=".bs.modal",un=`hide${We}`,Gn=`hidePrevented${We}`,Fn=`hidden${We}`,In=`show${We}`,qn=`shown${We}`,$n=`resize${We}`,Kn=`click.dismiss${We}`,Rn=`mousedown.dismiss${We}`,fn=`keydown.dismiss${We}`,Bn=`click${We}.data-api`,Xi="modal-open",zi="modal-static",pn={backdrop:!0,focus:!0,keyboard:!0},Qn={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ve extends Zt{constructor(p,w){super(p,w),this._dialog=gt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new hn,this._addEventListeners()}static get Default(){return pn}static get DefaultType(){return Qn}static get NAME(){return"modal"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||this._isTransitioning||U.trigger(this._element,In,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Xi),this._adjustDialog(),this._backdrop.show(()=>this._showElement(p)))}hide(){this._isShown&&!this._isTransitioning&&(U.trigger(this._element,un).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){U.off(window,We),U.off(this._dialog,We),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new jn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Hi({trapElement:this._element})}_showElement(p){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const w=gt.findOne(".modal-body",this._dialog);w&&(w.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,qn,{relatedTarget:p})},this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,fn,p=>{"Escape"===p.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),U.on(window,$n,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),U.on(this._element,Rn,p=>{U.one(this._element,Kn,w=>{this._element===p.target&&this._element===w.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Xi),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,Fn)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(U.trigger(this._element,Gn).defaultPrevented)return;const p=this._element.scrollHeight>document.documentElement.clientHeight,w=this._element.style.overflowY;"hidden"===w||this._element.classList.contains(zi)||(p||(this._element.style.overflowY="hidden"),this._element.classList.add(zi),this._queueCallback(()=>{this._element.classList.remove(zi),this._queueCallback(()=>{this._element.style.overflowY=w},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const p=this._element.scrollHeight>document.documentElement.clientHeight,w=this._scrollBar.getWidth(),R=w>0;if(R&&!p){const ht=M()?"paddingLeft":"paddingRight";this._element.style[ht]=`${w}px`}if(!R&&p){const ht=M()?"paddingRight":"paddingLeft";this._element.style[ht]=`${w}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(p,w){return this.each(function(){const R=Ve.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===R[p])throw new TypeError(`No method named "${p}"`);R[p](w)}})}}U.on(document,Bn,'[data-bs-toggle="modal"]',function(I){const p=gt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&I.preventDefault(),U.one(p,In,R=>{R.defaultPrevented||U.one(p,Fn,()=>{u(this)&&this.focus()})});const w=gt.findOne(".modal.show");w&&Ve.getInstance(w).hide(),Ve.getOrCreateInstance(p).toggle(this)}),Kt(Ve),F(Ve);const Qe=".bs.offcanvas",gn=".data-api",mn=`load${Qe}${gn}`,Hn="showing",c=".offcanvas.show",f=`show${Qe}`,m=`shown${Qe}`,y=`hide${Qe}`,x=`hidePrevented${Qe}`,C=`hidden${Qe}`,O=`resize${Qe}`,L=`click${Qe}${gn}`,D=`keydown.dismiss${Qe}`,z={backdrop:!0,keyboard:!0,scroll:!1},Z={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class et extends Zt{constructor(p,w){super(p,w),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return z}static get DefaultType(){return Z}static get NAME(){return"offcanvas"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||U.trigger(this._element,f,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new hn).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hn),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(Hn),U.trigger(this._element,m,{relatedTarget:p})},this._element,!0))}hide(){this._isShown&&(U.trigger(this._element,y).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new hn).reset(),U.trigger(this._element,C)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const p=Boolean(this._config.backdrop);return new jn({className:"offcanvas-backdrop",isVisible:p,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:p?()=>{"static"!==this._config.backdrop?this.hide():U.trigger(this._element,x)}:null})}_initializeFocusTrap(){return new Hi({trapElement:this._element})}_addEventListeners(){U.on(this._element,D,p=>{"Escape"===p.key&&(this._config.keyboard?this.hide():U.trigger(this._element,x))})}static jQueryInterface(p){return this.each(function(){const w=et.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===w[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);w[p](this)}})}}U.on(document,L,'[data-bs-toggle="offcanvas"]',function(I){const p=gt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&I.preventDefault(),g(this))return;U.one(p,C,()=>{u(this)&&this.focus()});const w=gt.findOne(c);w&&w!==p&&et.getInstance(w).hide(),et.getOrCreateInstance(p).toggle(this)}),U.on(window,mn,()=>{for(const I of gt.find(c))et.getOrCreateInstance(I).show()}),U.on(window,O,()=>{for(const I of gt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(I).position&&et.getOrCreateInstance(I).hide()}),Kt(et),F(et);const $={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ct=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),At=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Rt=(I,p)=>{const w=I.nodeName.toLowerCase();return p.includes(w)?!ct.has(w)||Boolean(At.test(I.nodeValue)):p.filter(R=>R instanceof RegExp).some(R=>R.test(w))},Bt={allowList:$,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ce={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},me={entry:"(string|element|function|null)",selector:"(string|element)"};class Je extends Xt{constructor(p){super(),this._config=this._getConfig(p)}static get Default(){return Bt}static get DefaultType(){return ce}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(p=>this._resolvePossibleFunction(p)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(p){return this._checkContent(p),this._config.content={...this._config.content,...p},this}toHtml(){const p=document.createElement("div");p.innerHTML=this._maybeSanitize(this._config.template);for(const[ht,bt]of Object.entries(this._config.content))this._setContent(p,bt,ht);const w=p.children[0],R=this._resolvePossibleFunction(this._config.extraClass);return R&&w.classList.add(...R.split(" ")),w}_typeCheckConfig(p){super._typeCheckConfig(p),this._checkContent(p.content)}_checkContent(p){for(const[w,R]of Object.entries(p))super._typeCheckConfig({selector:w,entry:R},me)}_setContent(p,w,R){const ht=gt.findOne(R,p);ht&&((w=this._resolvePossibleFunction(w))?s(w)?this._putElementInTemplate(o(w),ht):this._config.html?ht.innerHTML=this._maybeSanitize(w):ht.textContent=w:ht.remove())}_maybeSanitize(p){return this._config.sanitize?function(w,R,ht){if(!w.length)return w;if(ht&&"function"==typeof ht)return ht(w);const bt=(new window.DOMParser).parseFromString(w,"text/html"),kt=[].concat(...bt.body.querySelectorAll("*"));for(const Gt of kt){const ue=Gt.nodeName.toLowerCase();if(!Object.keys(R).includes(ue)){Gt.remove();continue}const Ye=[].concat(...Gt.attributes),qe=[].concat(R["*"]||[],R[ue]||[]);for(const hi of Ye)Rt(hi,qe)||Gt.removeAttribute(hi.nodeName)}return bt.body.innerHTML}(p,this._config.allowList,this._config.sanitizeFn):p}_resolvePossibleFunction(p){return G(p,[this])}_putElementInTemplate(p,w){if(this._config.html)return w.innerHTML="",void w.append(p);w.textContent=p.textContent}}const Ze=new Set(["sanitize","allowList","sanitizeFn"]),zt="fade",ti="show",ne="hide.bs.modal",ai="hover",Mi="focus",ei={AUTO:"auto",TOP:"top",RIGHT:M()?"left":"right",BOTTOM:"bottom",LEFT:M()?"right":"left"},Li={allowList:$,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},li={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class De extends Zt{constructor(p,w){if(void 0===a)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(p,w),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Li}static get DefaultType(){return li}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(".modal"),ne,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const p=U.trigger(this._element,this.constructor.eventName("show")),w=(v(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(p.defaultPrevented||!w)return;this._disposePopper();const R=this._getTipElement();this._element.setAttribute("aria-describedby",R.getAttribute("id"));const{container:ht}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ht.append(R),U.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(R),R.classList.add(ti),"ontouchstart"in document.documentElement)for(const bt of[].concat(...document.body.children))U.on(bt,"mouseover",b);this._queueCallback(()=>{U.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!U.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ti),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))U.off(p,"mouseover",b);this._activeTrigger.click=!1,this._activeTrigger[Mi]=!1,this._activeTrigger[ai]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(p){const w=this._getTemplateFactory(p).toHtml();if(!w)return null;w.classList.remove(zt,ti),w.classList.add(`bs-${this.constructor.NAME}-auto`);const R=(ht=>{do{ht+=Math.floor(1e6*Math.random())}while(document.getElementById(ht));return ht})(this.constructor.NAME).toString();return w.setAttribute("id",R),this._isAnimated()&&w.classList.add(zt),w}setContent(p){this._newContent=p,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(p){return this._templateFactory?this._templateFactory.changeContent(p):this._templateFactory=new Je({...this._config,content:p,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(p){return this.constructor.getOrCreateInstance(p.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(zt)}_isShown(){return this.tip&&this.tip.classList.contains(ti)}_createPopper(p){const w=G(this._config.placement,[this,p,this._element]),R=ei[w.toUpperCase()];return a.createPopper(this._element,p,this._getPopperConfig(R))}_getOffset(){const{offset:p}=this._config;return"string"==typeof p?p.split(",").map(w=>Number.parseInt(w,10)):"function"==typeof p?w=>p(w,this._element):p}_resolvePossibleFunction(p){return G(p,[this._element])}_getPopperConfig(p){const w={placement:p,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:R=>{this._getTipElement().setAttribute("data-popper-placement",R.state.placement)}}]};return{...w,...G(this._config.popperConfig,[w])}}_setListeners(){const p=this._config.trigger.split(" ");for(const w of p)if("click"===w)U.on(this._element,this.constructor.eventName("click"),this._config.selector,R=>{this._initializeOnDelegatedTarget(R).toggle()});else if("manual"!==w){const R=this.constructor.eventName(w===ai?"mouseenter":"focusin"),ht=this.constructor.eventName(w===ai?"mouseleave":"focusout");U.on(this._element,R,this._config.selector,bt=>{const kt=this._initializeOnDelegatedTarget(bt);kt._activeTrigger["focusin"===bt.type?Mi:ai]=!0,kt._enter()}),U.on(this._element,ht,this._config.selector,bt=>{const kt=this._initializeOnDelegatedTarget(bt);kt._activeTrigger["focusout"===bt.type?Mi:ai]=kt._element.contains(bt.relatedTarget),kt._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(".modal"),ne,this._hideModalHandler)}_fixTitle(){const p=this._element.getAttribute("title");p&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",p),this._element.setAttribute("data-bs-original-title",p),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(p,w){clearTimeout(this._timeout),this._timeout=setTimeout(p,w)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(p){const w=jt.getDataAttributes(this._element);for(const R of Object.keys(w))Ze.has(R)&&delete w[R];return p={...w,..."object"==typeof p&&p?p:{}},p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p.container=!1===p.container?document.body:o(p.container),"number"==typeof p.delay&&(p.delay={show:p.delay,hide:p.delay}),"number"==typeof p.title&&(p.title=p.title.toString()),"number"==typeof p.content&&(p.content=p.content.toString()),p}_getDelegateConfig(){const p={};for(const[w,R]of Object.entries(this._config))this.constructor.Default[w]!==R&&(p[w]=R);return p.selector=!1,p.trigger="manual",p}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(p){return this.each(function(){const w=De.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===w[p])throw new TypeError(`No method named "${p}"`);w[p]()}})}}F(De);const Oi={...De.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Xe={...De.DefaultType,content:"(null|string|element|function)"};class he extends De{static get Default(){return Oi}static get DefaultType(){return Xe}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(p){return this.each(function(){const w=he.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===w[p])throw new TypeError(`No method named "${p}"`);w[p]()}})}}F(he);const oe=".bs.scrollspy",Ce=`activate${oe}`,ci=`click${oe}`,we=`load${oe}.data-api`,Pt="active",re="[href]",ae=".nav-link",te=`${ae}, .nav-item > ${ae}, .list-group-item`,ii={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ei={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class mi extends Zt{constructor(p,w){super(p,w),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ii}static get DefaultType(){return Ei}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const p of this._observableSections.values())this._observer.observe(p)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(p){return p.target=o(p.target)||document.body,p.rootMargin=p.offset?`${p.offset}px 0px -30%`:p.rootMargin,"string"==typeof p.threshold&&(p.threshold=p.threshold.split(",").map(w=>Number.parseFloat(w))),p}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,ci),U.on(this._config.target,ci,re,p=>{const w=this._observableSections.get(p.target.hash);if(w){p.preventDefault();const R=this._rootElement||window,ht=w.offsetTop-this._element.offsetTop;if(R.scrollTo)return void R.scrollTo({top:ht,behavior:"smooth"});R.scrollTop=ht}}))}_getNewObserver(){return new IntersectionObserver(w=>this._observerCallback(w),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(p){const w=kt=>this._targetLinks.get(`#${kt.target.id}`),R=kt=>{this._previousScrollData.visibleEntryTop=kt.target.offsetTop,this._process(w(kt))},ht=(this._rootElement||document.documentElement).scrollTop,bt=ht>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ht;for(const kt of p){if(!kt.isIntersecting){this._activeTarget=null,this._clearActiveClass(w(kt));continue}const Gt=kt.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(bt&&Gt){if(R(kt),!ht)return}else bt||Gt||R(kt)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const p=gt.find(re,this._config.target);for(const w of p){if(!w.hash||g(w))continue;const R=gt.findOne(decodeURI(w.hash),this._element);u(R)&&(this._targetLinks.set(decodeURI(w.hash),w),this._observableSections.set(w.hash,R))}}_process(p){this._activeTarget!==p&&(this._clearActiveClass(this._config.target),this._activeTarget=p,p.classList.add(Pt),this._activateParents(p),U.trigger(this._element,Ce,{relatedTarget:p}))}_activateParents(p){if(p.classList.contains("dropdown-item"))gt.findOne(".dropdown-toggle",p.closest(".dropdown")).classList.add(Pt);else for(const w of gt.parents(p,".nav, .list-group"))for(const R of gt.prev(w,te))R.classList.add(Pt)}_clearActiveClass(p){p.classList.remove(Pt);const w=gt.find(`${re}.${Pt}`,p);for(const R of w)R.classList.remove(Pt)}static jQueryInterface(p){return this.each(function(){const w=mi.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===w[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);w[p]()}})}}U.on(window,we,()=>{for(const I of gt.find('[data-bs-spy="scroll"]'))mi.getOrCreateInstance(I)}),F(mi);const Ie=".bs.tab",vn=`hide${Ie}`,vi=`hidden${Ie}`,Xn=`show${Ie}`,Fi=`shown${Ie}`,Yi=`click${Ie}`,Ui=`keydown${Ie}`,yn=`load${Ie}`,Vi="ArrowLeft",Gi="ArrowRight",_n="ArrowUp",qi="ArrowDown",$i="Home",A="End",W="active",Q="fade",tt="show",at=".dropdown-toggle",xt=`:not(${at})`,Ct='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Et=`.nav-link${xt}, .list-group-item${xt}, [role="tab"]${xt}, ${Ct}`,wt=`.${W}[data-bs-toggle="tab"], .${W}[data-bs-toggle="pill"], .${W}[data-bs-toggle="list"]`;class Yt extends Zt{constructor(p){super(p),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,Ui,w=>this._keydown(w)))}static get NAME(){return"tab"}show(){const p=this._element;if(this._elemIsActive(p))return;const w=this._getActiveElem(),R=w?U.trigger(w,vn,{relatedTarget:p}):null;U.trigger(p,Xn,{relatedTarget:w}).defaultPrevented||R&&R.defaultPrevented||(this._deactivate(w,p),this._activate(p,w))}_activate(p,w){p&&(p.classList.add(W),this._activate(gt.getElementFromSelector(p)),this._queueCallback(()=>{"tab"===p.getAttribute("role")?(p.removeAttribute("tabindex"),p.setAttribute("aria-selected",!0),this._toggleDropDown(p,!0),U.trigger(p,Fi,{relatedTarget:w})):p.classList.add(tt)},p,p.classList.contains(Q)))}_deactivate(p,w){p&&(p.classList.remove(W),p.blur(),this._deactivate(gt.getElementFromSelector(p)),this._queueCallback(()=>{"tab"===p.getAttribute("role")?(p.setAttribute("aria-selected",!1),p.setAttribute("tabindex","-1"),this._toggleDropDown(p,!1),U.trigger(p,vi,{relatedTarget:w})):p.classList.remove(tt)},p,p.classList.contains(Q)))}_keydown(p){if(![Vi,Gi,_n,qi,$i,A].includes(p.key))return;p.stopPropagation(),p.preventDefault();const w=this._getChildren().filter(ht=>!g(ht));let R;if([$i,A].includes(p.key))R=w[p.key===$i?0:w.length-1];else{const ht=[Gi,qi].includes(p.key);R=k(w,p.target,ht,!0)}R&&(R.focus({preventScroll:!0}),Yt.getOrCreateInstance(R).show())}_getChildren(){return gt.find(Et,this._parent)}_getActiveElem(){return this._getChildren().find(p=>this._elemIsActive(p))||null}_setInitialAttributes(p,w){this._setAttributeIfNotExists(p,"role","tablist");for(const R of w)this._setInitialAttributesOnChild(R)}_setInitialAttributesOnChild(p){p=this._getInnerElement(p);const w=this._elemIsActive(p),R=this._getOuterElement(p);p.setAttribute("aria-selected",w),R!==p&&this._setAttributeIfNotExists(R,"role","presentation"),w||p.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(p,"role","tab"),this._setInitialAttributesOnTargetPanel(p)}_setInitialAttributesOnTargetPanel(p){const w=gt.getElementFromSelector(p);w&&(this._setAttributeIfNotExists(w,"role","tabpanel"),p.id&&this._setAttributeIfNotExists(w,"aria-labelledby",`${p.id}`))}_toggleDropDown(p,w){const R=this._getOuterElement(p);if(!R.classList.contains("dropdown"))return;const ht=(bt,kt)=>{const Gt=gt.findOne(bt,R);Gt&&Gt.classList.toggle(kt,w)};ht(at,W),ht(".dropdown-menu",tt),R.setAttribute("aria-expanded",w)}_setAttributeIfNotExists(p,w,R){p.hasAttribute(w)||p.setAttribute(w,R)}_elemIsActive(p){return p.classList.contains(W)}_getInnerElement(p){return p.matches(Et)?p:gt.findOne(Et,p)}_getOuterElement(p){return p.closest(".nav-item, .list-group-item")||p}static jQueryInterface(p){return this.each(function(){const w=Yt.getOrCreateInstance(this);if("string"==typeof p){if(void 0===w[p]||p.startsWith("_")||"constructor"===p)throw new TypeError(`No method named "${p}"`);w[p]()}})}}U.on(document,Yi,Ct,function(I){["A","AREA"].includes(this.tagName)&&I.preventDefault(),g(this)||Yt.getOrCreateInstance(this).show()}),U.on(window,yn,()=>{for(const I of gt.find(wt))Yt.getOrCreateInstance(I)}),F(Yt);const Ft=".bs.toast",Ht=`mouseover${Ft}`,Vt=`mouseout${Ft}`,It=`focusin${Ft}`,ge=`focusout${Ft}`,_e=`hide${Ft}`,ve=`hidden${Ft}`,je=`show${Ft}`,Re=`shown${Ft}`,$t="show",ni="showing",Ge={animation:"boolean",autohide:"boolean",delay:"number"},Ki={animation:!0,autohide:!0,delay:5e3};class ki extends Zt{constructor(p,w){super(p,w),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ki}static get DefaultType(){return Ge}static get NAME(){return"toast"}show(){U.trigger(this._element,je).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add($t,ni),this._queueCallback(()=>{this._element.classList.remove(ni),U.trigger(this._element,Re),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(U.trigger(this._element,_e).defaultPrevented||(this._element.classList.add(ni),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(ni,$t),U.trigger(this._element,ve)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove($t),super.dispose()}isShown(){return this._element.classList.contains($t)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(p,w){switch(p.type){case"mouseover":case"mouseout":this._hasMouseInteraction=w;break;case"focusin":case"focusout":this._hasKeyboardInteraction=w}if(w)return void this._clearTimeout();const R=p.relatedTarget;this._element===R||this._element.contains(R)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,Ht,p=>this._onInteraction(p,!0)),U.on(this._element,Vt,p=>this._onInteraction(p,!1)),U.on(this._element,It,p=>this._onInteraction(p,!0)),U.on(this._element,ge,p=>this._onInteraction(p,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(p){return this.each(function(){const w=ki.getOrCreateInstance(this,p);if("string"==typeof p){if(void 0===w[p])throw new TypeError(`No method named "${p}"`);w[p](this)}})}}return Kt(ki),F(ki),{Alert:Se,Button:Le,Carousel:Nt,Collapse:pi,Dropdown:Pe,Modal:Ve,Offcanvas:et,Popover:he,ScrollSpy:mi,Tab:Yt,Toast:ki,Tooltip:De}});