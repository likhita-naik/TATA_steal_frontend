"use strict";(self.webpackChunktatasteel=self.webpackChunktatasteel||[]).push([[375],{2375:(ee,E,g)=>{g.r(E),g.d(E,{ConveyorModule:()=>Z});var b=g(9569),f=g(433),y=g(9646),e=g(4650),R=g(7445),I=g(2953),k=g(2216),D=g(6895);const S=["panelNameChangeModal"],W=["panelNameModal"],N=["roiType"],A=["alertRW"],T=["deleteModal"];function V(d,u){if(1&d&&(e.\u0275\u0275elementStart(0,"div",32)(1,"div",26)(2,"div",33)(3,"h5",34),e.\u0275\u0275text(4,"Job Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"h3"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",26)(8,"div",33)(9,"h5",34),e.\u0275\u0275text(10,"Camera Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"h3"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"div",26)(14,"div",35)(15,"h5",34),e.\u0275\u0275text(16,"IP Address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"h3"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",26)(20,"div",35)(21,"h5",34),e.\u0275\u0275text(22,"Sub Area"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"h3"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()()()()),2&d){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.jobType?t.jobType:"None"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.PanelData[0].camera_name),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.PanelData[0].ip_address?t.PanelData[0].ip_address:"None"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentArea?t.currentArea:"None")}}function O(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.SaveEditedChanges())}),e.\u0275\u0275text(1,"Save changes"),e.\u0275\u0275elementEnd()}}function M(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.PanelName())}),e.\u0275\u0275text(1,"Confirm Panel"),e.\u0275\u0275elementEnd()}}function j(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.OnAddingNewRw())}),e.\u0275\u0275text(1,"Confirm RW"),e.\u0275\u0275elementEnd()}}function $(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().index,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.EditRW(n))}),e.\u0275\u0275text(1,"Edit RW"),e.\u0275\u0275elementEnd()}}function J(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().index,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.DeletePanelRW(n))}),e.\u0275\u0275text(1,"Delete RW"),e.\u0275\u0275elementEnd()}}function F(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",40),e.\u0275\u0275listener("dblclick",function(){const i=e.\u0275\u0275restoreView(t).index,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.AlterPanelName(i))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"button",41),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.Edit(i))}),e.\u0275\u0275text(7,"Edit Panel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,$,2,0,"button",42),e.\u0275\u0275elementStart(9,"button",43),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.AddNewRW(i))}),e.\u0275\u0275text(10,"Add RW"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",44),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.isDelete(i))}),e.\u0275\u0275text(12,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,J,2,0,"button",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td")(15,"div",46)(16,"div",47)(17,"input",48),e.\u0275\u0275listener("change",function(n){const s=e.\u0275\u0275restoreView(t).index,o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.UnallocatedJobConfig(n,s))}),e.\u0275\u0275elementEnd()()()()()}if(2&d){const t=u.$implicit,a=u.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.panel_id," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.rw.length>0),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.rw.length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("checked",t.roi_data.roi_data.unallocated_job_status)}}function B(d,u){if(1&d&&(e.\u0275\u0275elementStart(0,"table",37)(1,"thead")(2,"tr")(3,"th",38),e.\u0275\u0275text(4,"S.No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th",38),e.\u0275\u0275text(6,"Panel Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",38),e.\u0275\u0275text(8,"Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10,"Unallocated Job"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"tbody"),e.\u0275\u0275template(12,F,18,5,"tr",39),e.\u0275\u0275elementEnd()()),2&d){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngForOf",t.allPanelData)}}function Y(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22)(1,"div",23)(2,"h4"),e.\u0275\u0275text(3," Change Panel No"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",49)(5,"form"),e.\u0275\u0275element(6,"input",50),e.\u0275\u0275elementStart(7,"button",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.ChangePanelName())}),e.\u0275\u0275text(8,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",52),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Cross click"))}),e.\u0275\u0275text(10,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&d){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("formControl",t.tempPanelID),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",""==t.tempPanelID.value)}}const X=function(d){return{"is-invalid":d}};function z(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22)(1,"div",23)(2,"h4",53),e.\u0275\u0275text(3,"Enter Panel Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",12)(5,"div",47)(6,"input",48),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onChange(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",54),e.\u0275\u0275text(8,"Unallocated Job"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",49)(10,"form"),e.\u0275\u0275element(11,"input",55),e.\u0275\u0275elementStart(12,"div",56),e.\u0275\u0275text(13," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.nameSubmit())}),e.\u0275\u0275text(15,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",52),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Cross click"))}),e.\u0275\u0275text(17,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&d){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("checked",t.unallocatedJobStatus),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,X,t.panelNameControl.invalid&&t.panelNameControl.touched&&t.panelNameControl.dirty))("formControl",t.panelNameControl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.panelNameControl.invalid&&t.panelNameControl.touched&&t.panelNameControl.dirty?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.panelNameControl.invalid)}}function L(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",57)(1,"div",58)(2,"div",59)(3,"div",60)(4,"h4",61),e.\u0275\u0275text(5,"Please draw the rack window for respective panels."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",57)(7,"p"),e.\u0275\u0275text(8,"Otherwise you will not get the proper output."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",62)(10,"button",63),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Cross click"))}),e.\u0275\u0275text(11,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",64),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Cross click"))}),e.\u0275\u0275text(13,"Got it"),e.\u0275\u0275elementEnd()()()()()}}function Q(d,u){1&d&&(e.\u0275\u0275elementStart(0,"div",57)(1,"div",58)(2,"div",59)(3,"div",60)(4,"h4",61),e.\u0275\u0275text(5,"Please Select the ROI Type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",57)(7,"div",65),e.\u0275\u0275element(8,"h1"),e.\u0275\u0275elementStart(9,"form",66)(10,"section",67),e.\u0275\u0275element(11,"input",68),e.\u0275\u0275elementStart(12,"label",69),e.\u0275\u0275text(13,"HT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",70),e.\u0275\u0275elementStart(15,"label",71),e.\u0275\u0275text(16,"Hydraulic"),e.\u0275\u0275elementEnd()()()()()()()())}function H(d,u){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",57)(1,"div",58)(2,"div",59)(3,"div",60)(4,"div",72)(5,"i",73),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",61),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",57)(10,"p"),e.\u0275\u0275text(11,"Do you really want to delete these ROI? This process cannot be undone."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",62)(13,"button",63),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Cross click"))}),e.\u0275\u0275text(14,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",74),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.DeletePanel())}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()}}let U=(()=>{class d{constructor(t,a,n,i){this.ActiveRoute=t,this.server=a,this.router=n,this.modalService=i,this.PanelData={},this.PanelDataObservable=(0,y.of)({}),this.isPanelData=!1,this.PanelsRoiPoints=[],this.newPanelPoints=[],this.isAddPanel=!1,this.isChanges=!1,this.isPolygonDrawn=!1,this.isEdit=!1,this.isLock1=!1,this.isTag=!1,this.isLock2=!1,this.isRackWindow=!1,this.AllPanels=[],this.isDeleteRW=!1,this.tempData=[],this.allPanelData=[],this.isEditText=!1,this.tempRectPoints=[],this.tempPanelID=new f.NI("",f.kI.required),this.rwCount=0,this.panel_key_id=0,this.polygonOptions={fill:"rgba(0,0, 0,0)",strokeWidth:2,stroke:"rgb(127, 255, 0)",scaleX:1,scaleY:1,hoverCursor:"crosshair",objectCaching:!1,selectable:!1,transparentCorners:!1,cornerColor:"blue"},this.polygonOptions2={fill:"rgba(0,0,0,0)",strokeWidth:2,stroke:"rgba(15, 227, 242)",scaleX:1,scaleY:1,hoverCursor:"crosshair",objectCaching:!1,selectable:!1,transparentCorners:!1,cornerColor:"blue"},this.isEditPanel=!1,this.iseditRW=!1,this.isLoading=!1,this.newRWPoints=[],this.isAddRW=!1,this.unallocatedJobStatus=!1,this.panelNameControl=new f.NI("",f.kI.required),this.IP=a.IP,this.ActiveRoute.queryParams.subscribe(s=>{console.log(s),this.ID=s.id,this.imageName=s.image_name,this.currentArea=s.area,this.currentPlant=s.plant,this.jobType=s.type,"false"==s.isNewJob?this.server.GetPanelCameraData(this.ID,this.imageName).subscribe(o=>{console.log(o.message),o.success?(this.PanelData=o.message.data,console.log(this.imageName),this.PanelDataObservable=(0,y.of)(o.message),this.isPanelData=!0,this.PanelData.length>0&&this.GetPanelPoints(),console.log(this.PanelData)):(this.PanelData[0]={},this.PanelData[0].panel_data=[],this.server.notification(o.message,"Retry"))},o=>{this.server.notification("Error while fetching the data","Retry")}):(this.unallocatedJobStatus=!0,this.server.GetNewJobData(this.ID,this.imageName).subscribe(o=>{console.log(o.message),o.success?(this.PanelData=o.message,console.log(this.imageName),this.PanelDataObservable=(0,y.of)(o.message),this.isPanelData=!0,this.PanelData.length>0&&this.GetPanelPoints(),console.log(this.PanelData)):(this.PanelData[0]={},this.PanelData[0].panel_data=[],this.server.notification(o.message,"Retry"))},o=>{this.server.notification("Error while fetching the data","Retry")}))})}ngAfterViewInit(){this.canvasSetup(),this.makeNewPanel(),this.makeNewRW(),this.canvas.on("mouse:up",t=>{1===t.button&&!(null!=t.transform&&"modifyPolygon"!==t.transform.action)&&!this.isEdit&&(console.log("polygon  is 1creating"),this.isAddPanel&&(console.log("panel cords"),this.getClickCoords(t.e)),this.isAddRW&&(console.log("rw cords"),this.getClickCoordsForRW(t.e))),3===t.button&&(this.isAddPanel&&(this.newPanelPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0)),this.isAddRW&&(this.newRWPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0)))}),this.canvas.on("mouse:down",t=>{console.log(t),1===t.button&&!(null!=t.transform&&"modifyPolygon"!==t.transform.action)&&!this.isEdit&&console.log("polygon  is 1creating"),this.isAddPanel&&3===t.button&&(this.newPanelPoints.length<3?this.isPolygonDrawn=!1:(this.PanelName(),this.isPolygonDrawn=!0)),this.isAddRW&&3===t.button&&(this.newRWPoints.length<3?this.isPolygonDrawn=!1:(console.log("rw is created"),this.OnAddingNewRw(),this.isPolygonDrawn=!0))}),this.canvas.on("object:selected",t=>{console.log("selected Object",t)}),this.canvas.on("object:moving",t=>{console.log(t.target),console.log(this.iseditRW),this.isEditPanel=!1,this.iseditRW&&(console.log(this.allPanelData[this.selectedPanelforRW].rw_canvas.points),console.log(t),console.log(this.canvas),console.log(this.allPanelData[this.selectedPanelforRW].rw_canvas),this.allPanelData[this.selectedPanelforRW].rw_canvas.setCoords(),this.allPanelData[this.selectedPanelforRW].rw_canvas.calcTransformMatrix(),this.allPanelData[this.selectedPanelforRW].rw_canvas._calcDimensions(),this.canvas.renderAll())}),this.canvas.on("object:scaling",t=>{console.log(t.target)})}PanelName(){this.isAddPanel&&(this.isPolygonDrawn=!0,this.isAddPanel=!1,this.modalService.open(this.panelNameModal,{size:"small",centered:!0,backdrop:"static"}).result.then(t=>{this.panelNameControl.setValue(""),this.panelNameControl.updateValueAndValidity(),this.panelNameControl.markAsUntouched(),this.DeleteNewPanel()},t=>{this.panelNameControl.markAsUntouched()}))}Confirm(){this.isAddRW&&this.OnAddingNewPanel(),this.isAddPanel&&this.OnAddingNewRw()}SaveChanges(){console.log(this.isLoading=!0),console.log(this.allPanelData);var t=[];this.PanelData.forEach((n,i)=>{t.push({...n.roi_data,panel_key_id:i+1})}),console.log(t);var a={id:this.ID,imagename:this.imageName,roi_data:t};console.log(a),this.server.AddROI(a).subscribe(n=>{console.log(n),this.isLoading=!1})}DeleteNewPanel(){this.newPanelPoints.splice(0,this.newPanelPoints.length),this.newRWPoints.splice(0,this.newRWPoints.length),this.canvas.renderAll()}OnAddingNewPanel(){this.isAddPanel=!1;var t=!1;if(console.log(this.panelNameControl.value),console.log(this.allPanelData),this.allPanelData.forEach(r=>{console.log(r),r.panel_id==this.panelNameControl.value&&(t=!0)}),console.log(t),t)this.server.notification("Job for that panel already exist"),this.DeleteNewPanel(),this.isPolygonDrawn=!1;else{fabric.util.resetObjectTransform(this.newPanel);var a=[];const r=[...this.newPanelPoints];console.log(r);var n=this.newPanel._calcDimensions();const c=new fabric.Polygon(r,this.polygonOptions);var i=this.panelNameControl.value;if(null!=i){console.log(i),this.canvas.add(c),this.canvas.renderAll(),console.log(this.newPanel);for(let p=0;p<this.newPanelPoints.length;p++)a.push(`${this.newPanelPoints[p].x};${this.newPanelPoints[p].y};`);var o=a.toString().replace(/,/g,"");console.log(o);var h=new fabric.Text(i,{fontSize:20,backgroundColor:"black",left:n.left,top:n.top,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(h),this.canvas.add(h),this.canvas.renderAll();var m={panel_name_canvas:h,roi_canvas:c,panel_id:i,rw:[],roi_data:{panel_id:i,panel_status:!1,isolation_status:null,flasher_status:null,roi_data:{panel_no:i,bbox:o,panel_key_id:++this.panel_key_id,RW:[],unallocated_job_status:!!this.unallocatedJobStatus}}};console.log(m.roi_data),this.PanelData[0].panel_data.push(m.roi_data),this.allPanelData.push(m),console.log(this.allPanelData.length),this.newPanelPoints.splice(0,this.newPanelPoints.length),this.panelNameControl.setValue(null),this.panelNameControl.updateValueAndValidity(),this.panelNameControl.markAsUntouched(),this.panelNameControl.reset(),this.panelNameControl.addValidators(f.kI.required),console.log(this.selectedEditId),this.SaveAddedPanel()}else this.DeleteNewPanel(),this.isPolygonDrawn=!1}}OnAddingNewRw(){this.isAddPanel=!1,this.isAddRW=!1,this.isChanges=!0,console.log("rw added"),fabric.util.resetObjectTransform(this.newRw);var t=[];const a=[...this.newRWPoints];console.log(a),this.newRw._calcDimensions();const i=new fabric.Polygon(a,this.polygonOptions2);console.log(this.panelNameControl.value),this.canvas.add(i),this.canvas.renderAll(),console.log(this.newPanel);for(let m=0;m<this.newRWPoints.length;m++)t.push(`${this.newRWPoints[m].x};${this.newRWPoints[m].y};`);var h=t.toString().replace(/,/g,"");console.log(h),this.PanelData[0].panel_data[this.selectedPanelforRW].roi_data.RW=h,this.allPanelData[this.selectedPanelforRW].rw_canvas=i,console.log(this.allPanelData.length),this.newRWPoints.splice(0,this.newRWPoints.length),this.panelNameControl.setValue(null),this.selectedEditId=this.selectedPanelforRW,console.log(this.selectedEditId),this.SaveEditedChanges()}nameSubmit(){this.modalService.dismissAll(),this.OnAddingNewPanel()}AddNewPanel(){this.polygonOptions.stroke="rgb(127, 255, 0)",this.newPanel.stroke="rgb(127, 255, 0)",this.newPanelPoints.splice(0,this.newPanelPoints.length),this.isDeleteRW=!1,this.isAddPanel=!0,this.isAddRW=!1,this.isEdit=!1,this.iseditRW=!1}AddNewRW(t){this.isDeleteRW=!1,this.selectedPanelforRW=t,this.selectedId=t,this.selectedEditId=t,this.isAddPanel=!1,this.isAddRW=!0,this.isEdit=!1,this.iseditRW=!1,this.canvas.remove(this.allPanelData[this.selectedPanelforRW].rw_canvas)}SaveEditedChanges(){console.log(this.canvas.getObjects()),console.log(this.allPanelData[this.selectedEditId].panel_id),"NA"==this.allPanelData[this.selectedEditId].panel_id?this.AlterPanelName(this.selectedEditId):this.SaveEditedPanel()}Edit(t){this.isEditPanel=!0,this.selectedEditId=t,this.iseditRW=!1,this.isAddPanel=!1,this.isAddRW=!1;var a=this.allPanelData[t].roi_canvas;if(this.isEdit=!0,this.isEdit){var n=(o,h)=>(m,r,c,p)=>{this.isEditPanel=!0,this.iseditRW=!1;var l=r.target,_=fabric.util.transformPoint(new fabric.Point(l.points[o].x-l.pathOffset.x,l.points[o].y-l.pathOffset.y),l.calcTransformMatrix()),v=h(m,r,c,p),w=(l._setPositionDimensions({}),l._getNonTransformedDimensions());return l.setPositionByOrigin(_,(l.points[o].x-l.pathOffset.x)/w.x+.5,(l.points[o].y-l.pathOffset.y)/w.y+.5),v},i=(o,h,m,r)=>{console.log(o),this.isEditPanel=!0,this.iseditRW=!1;var c=h.target,p=c.controls[c.__corner],l=c.toLocalPoint(new fabric.Point(m,r),"center","center"),_=c._getNonTransformedDimensions(),v=c._getTransformedDimensions(0,0);return c.points[p.pointIndex]={x:l.x*_.x/v.x+c.pathOffset.x,y:l.y*_.y/v.y+c.pathOffset.y},console.log(c.points),!0};let s=a;console.log(s),this.canvas.setActiveObject(a),s=this.canvas.getActiveObject(),console.log(s);{console.log("poly first");let o=s.points.length-1;s.cornerStyle="circle",s.cornerColor="rgba(0,0,255,0.5)",this.iseditRW=!1,this.isEditPanel=!0,this.allPanelData[t].roi_canvas.controls=s.points.reduce((h,m,r)=>(h["p"+r]=new fabric.Control({pointIndex:r,positionHandler:(c,p,l)=>(console.log(c),console.log(p),console.log(l),console.log(l),this.iseditRW=!1,fabric.util.transformPoint(new fabric.Point(l.points[r].x-l.pathOffset.x,l.points[r].y-l.pathOffset.y),fabric.util.multiplyTransformMatrices(l.canvas.viewportTransform,l.calcTransformMatrix()))),actionHandler:n(r>0?r-1:o,i),actionName:"modifyPolygon"}),console.log(h),h),{})}console.log(new fabric.Control),this.canvas.renderAll()}}EditRW(t){this.SaveChanges(),this.canvas.requestRenderAllBound(),this.selectedPanelforRW=t,this.selectedEditId=t,this.iseditRW=!0,this.isEdit=!0,this.isEditPanel=!1,this.isDeleteRW=!1,console.log(this.allPanelData[this.selectedPanelforRW].roi_canvas,"rw canvas"),this.allPanelData[this.selectedPanelforRW].rw_canvas.selectable=!0,this.allPanelData[this.selectedPanelforRW].rw_canvas.selectionFullyContained=!0}EditRect(t){this.selectedPanelforRW=t,this.selectedEditId=t,this.iseditRW=!0;var a=this.allPanelData[t].rw_canvas;if(this.isEdit=!0,this.isEdit){var n=(o,h)=>(m,r,c,p)=>{var l=r.target,_=fabric.util.transformPoint(new fabric.Point(l.points[o].x-l.pathOffset.x,l.points[o].y-l.pathOffset.y),l.calcTransformMatrix()),v=h(m,r,c,p),w=(l._setPositionDimensions({}),l._getNonTransformedDimensions());return l.setPositionByOrigin(_,(l.points[o].x-l.pathOffset.x)/w.x+.5,(l.points[o].y-l.pathOffset.y)/w.y+.5),v},i=(o,h,m,r)=>{console.log(o);var c=h.target,p=c.controls[c.__corner],l=c.toLocalPoint(new fabric.Point(m,r),"center","center"),_=c._getNonTransformedDimensions(),v=c._getTransformedDimensions(0,0);return c.points[p.pointIndex]={x:l.x*_.x/v.x+c.pathOffset.x,y:l.y*_.y/v.y+c.pathOffset.y},console.log(c.points),!0};let s=a;console.log(s),this.canvas.setActiveObject(a),s=this.canvas.getActiveObject(),console.log(s);{console.log("poly first");let o=s.points.length-1;s.cornerStyle="circle",s.cornerColor="rgba(0,0,255,0.5)",this.allPanelData[t].roi_canvas.controls=s.points.reduce((h,m,r)=>(h["p"+r]=new fabric.Control({pointIndex:r,positionHandler:(c,p,l)=>(console.log(c),console.log(p),console.log(l),console.log(l),fabric.util.transformPoint(new fabric.Point(l.points[r].x-l.pathOffset.x,l.points[r].y-l.pathOffset.y),fabric.util.multiplyTransformMatrices(l.canvas.viewportTransform,l.calcTransformMatrix()))),actionHandler:n(r>0?r-1:o,i),actionName:"modifyPolygon"}),console.log(h),h),{})}console.log(new fabric.Control),this.canvas.renderAll()}}SaveEditedPanel(){console.log("save edited function");var a=[];null!=this.allPanelData[this.selectedEditId].rw_canvas&&fabric.util.resetObjectTransform(this.allPanelData[this.selectedEditId].rw_canvas);var n=null!=this.allPanelData[this.selectedEditId].rw_canvas?this.allPanelData[this.selectedEditId].rw_canvas._calcDimensions():"";console.log(n);for(let l=0;l<this.allPanelData[this.selectedEditId].roi_canvas.points.length;l++){console.log(this.allPanelData[this.selectedEditId].roi_canvas.points);var i=this.allPanelData[this.selectedEditId].roi_canvas.points;let _=Math.round(i[l].x),v=Math.round(i[l].y);a.push(`${_};${v};`)}var s=/,/g,o=a.toString().replace(s,"");console.log(o),console.log(this.allPanelData[this.selectedEditId].roi_data),this.allPanelData[this.selectedEditId].roi_data.bbox=o,this.PanelData[0].panel_data[this.selectedEditId].roi_data.bbox=o;var h=[];if(null!=this.allPanelData[this.selectedEditId].rw_canvas){this.iseditRW&&!this.isEditPanel&&!this.isDeleteRW&&(console.log("editing  rack window"),this.allPanelData[this.selectedPanelforRW].rw_canvas.points[0]=this.canvas._activeObject.aCoords.tl,this.allPanelData[this.selectedPanelforRW].rw_canvas.points[1]=this.canvas._activeObject.aCoords.tr,this.allPanelData[this.selectedPanelforRW].rw_canvas.points[2]=this.canvas._activeObject.aCoords.br,this.allPanelData[this.selectedPanelforRW].rw_canvas.points[3]=this.canvas._activeObject.aCoords.bl);for(let _=0;_<this.allPanelData[this.selectedEditId].rw_canvas.points.length;_++){console.log(this.allPanelData[this.selectedEditId].rw_canvas.points),i=this.allPanelData[this.selectedEditId].rw_canvas.points;let P=Math.round(i[_].x),w=Math.round(i[_].y);h.push(`${P};${w};`)}s=/,/g;var m=h.toString().replace(s,"");console.log(m),console.log(this.allPanelData[this.selectedEditId].roi_data),this.allPanelData[this.selectedEditId].roi_data.RW=m,this.PanelData[0].panel_data[this.selectedEditId].roi_data.RW=m,console.log(this.allPanelData[this.selectedEditId].roi_data)}[].push(this.allPanelData[this.selectedEditId].roi_data),console.log(this.selectedEditId),console.log(this.allPanelData[this.selectedEditId].roi_data.roi_data.panel_key_id);var r=[];r.push({id:this.ID,image_name:this.imageName,flasher_status:null,isolation_status:null,panel_id:this.allPanelData[this.selectedEditId].roi_data.panel_id,panel_key_id:this.allPanelData[this.selectedEditId].roi_data.roi_data.panel_key_id,roi_data:this.allPanelData[this.selectedEditId].roi_data.roi_data}),console.log(r),this.server.UpdatePanelRoi({data:r}).subscribe(l=>{console.log(l),l.success&&(window.location.reload(),this.modalService.dismissAll()),this.server.notification(l.message)})}ChangePanelName(){this.PanelData[0].panel_data[this.selectedId].panel_id=this.tempPanelID.value,this.allPanelData[this.selectedId].panel_id=this.tempPanelID.value,console.log(this.PanelData[0].panel_data[this.selectedId].panel_id),this.PanelData[0].panel_data[this.selectedId].roi_data.panel_number=this.tempPanelID.value,this.allPanelData[this.selectedId].panel_name_canvas.text=this.tempPanelID.value,this.allPanelData[this.selectedId].panel_name_canvas.panel_id=this.tempPanelID.value,this.canvas.renderAll(),this.modalService.dismissAll(),this.SaveEditedPanel()}onChange(t){console.log(t.target.checked),this.unallocatedJobStatus=!!t.target.checked}AlterPanelName(t){console.log(t),this.isEditText=!this.isEditText,this.selectedId=t,this.selectedEditId=t,this.tempPanelID.setValue(this.PanelData[0].panel_data[t].panel_id),this.modalService.open(this.panelChangeModal,{size:"small",animation:!0,centered:!0}).result.then(a=>{},a=>{})}OnDeletePanel(){console.log("save edited function");var a=[];null!=this.allPanelData[this.selectedEditId].rw_canvas&&fabric.util.resetObjectTransform(this.allPanelData[this.selectedEditId].rw_canvas);var n=null!=this.allPanelData[this.selectedEditId].rw_canvas?this.allPanelData[this.selectedEditId].rw_canvas._calcDimensions():"";console.log(n);for(let c=0;c<this.allPanelData[this.selectedEditId].roi_canvas.points.length;c++){console.log(this.allPanelData[this.selectedEditId].roi_canvas.points);var i=this.allPanelData[this.selectedEditId].roi_canvas.points;let p=Math.round(i[c].x),l=Math.round(i[c].y);a.push(`${p};${l};`)}var o=a.toString().replace(/,/g,"");console.log(o),console.log(this.allPanelData[this.selectedEditId].roi_data),this.allPanelData[this.selectedEditId].roi_data.bbox=o,this.PanelData[0].panel_data[this.selectedEditId].roi_data.bbox=o;var h=[],m={id:this.ID,imagename:this.imageName,panel_no:this.allPanelData[this.selectedEditId].roi_data.panel_id,panel_key_id:this.allPanelData[this.selectedEditId].roi_data.roi_data.panel_key_id};h.push(m),console.log(h);var r={data:m};this.server.DeleteJobPanel(m).subscribe(c=>{window.location.reload(),console.log(c),c.success||window.location.reload(),this.server.notification(c.message)},c=>{this.server.notification("Something Went Wrong","Retry")}),console.log(r)}UnallocatedJobConfig(t,a){this.selectedEditId=a,this.allPanelData[a].roi_data.roi_data.unallocated_job_status=!!t.target.checked,this.SaveEditedPanel()}SaveAddedPanel(){var a=[];null!=this.allPanelData[this.allPanelData.length-1].rw_canvas&&fabric.util.resetObjectTransform(this.allPanelData[this.allPanelData.length-1].rw_canvas);var n=null!=this.allPanelData[this.allPanelData.length-1].rw_canvas?this.allPanelData[this.allPanelData.length-1].rw_canvas._calcDimensions():"";console.log(n);for(let l=0;l<this.allPanelData[this.allPanelData.length-1].roi_canvas.points.length;l++){console.log(this.allPanelData[this.allPanelData.length-1].roi_canvas.points);var i=this.allPanelData[this.allPanelData.length-1].roi_canvas.points;let _=Math.round(i[l].x),v=Math.round(i[l].y);a.push(`${_};${v};`)}var s=/,/g,o=a.toString().replace(s,"");console.log(o),console.log(this.allPanelData[this.allPanelData.length-1].roi_data),this.allPanelData[this.allPanelData.length-1].roi_data.bbox=o,this.PanelData[0].panel_data[this.allPanelData.length-1].roi_data.bbox=o;var h=[];if(null!=this.allPanelData[this.allPanelData.length-1].rw_canvas){for(let _=0;_<this.allPanelData[this.allPanelData.length-1].rw_canvas.points.length;_++){console.log(this.allPanelData[this.allPanelData.length-1].rw_canvas.points),i=this.allPanelData[this.allPanelData.length-1].rw_canvas.points;let P=Math.round(i[_].x),w=Math.round(i[_].y);h.push(`${P};${w};`)}s=/,/g;var m=h.toString().replace(s,"");console.log(m),console.log(this.allPanelData[this.allPanelData.length-1].roi_data),this.allPanelData[this.allPanelData.length-1].roi_data.RW=m,this.PanelData[0].panel_data[this.allPanelData.length-1].roi_data.RW=m,console.log(this.allPanelData[this.allPanelData.length-1].roi_data)}[].push(this.allPanelData[this.allPanelData.length-1].roi_data),console.log(this.selectedEditId),console.log(this.allPanelData[this.allPanelData.length-1].roi_data.roi_data.panel_key_id);var r=[];r.push({id:this.ID,image_name:this.imageName,panel_id:this.allPanelData[this.allPanelData.length-1].roi_data.panel_id,panel_key_id:this.allPanelData[this.allPanelData.length-1].roi_data.roi_data.panel_key_id,isolation_status:null,flasher_status:null,roi_data:this.allPanelData[this.allPanelData.length-1].roi_data.roi_data}),console.log(r),this.server.AddPanelRoi({data:r}).subscribe(l=>{console.log(l),l.success?(this.modalService.dismissAll(),this.modalService.open(this.RWAlert,{centered:!0}),window.location.reload()):(this.canvas.remove(this.allPanelData[this.allPanelData.length-1].roi_canvas),this.canvas.remove(this.allPanelData[this.allPanelData.length-1].roi_name_canvas)),this.server.notification(l.message)})}canvasSetup(){var t=document.getElementById("canvas-container");console.log(t.clientWidth),this.canvas=new fabric.Canvas("canvasROI",{fireRightClick:!0}),console.log(this.canvas),this.canvas.selection=!1,this.canvas.viewportTransform=[1,0,0,1,0,0],this.canvas.setWidth(t.clientWidth),fabric.Image.fromURL(this.IP+"/get_roi_image/"+this.imageName,a=>{console.log(a.width),console.log(a.height),this.canvas.setWidth(a.width),this.canvas.setHeight(a.height),this.canvas.setBackgroundImage(a,this.canvas.requestRenderAll.bind(this.canvas),{scaleX:this.canvas.width/a.width,scaleY:this.canvas.height/a.height})})}GetPanelPoints(){this.PanelData[0].panel_data.forEach((t,a)=>{console.log(t),this.panel_key_id=Number(t.roi_data.panel_key_id);var n=t.roi_data.bbox.split(";"),i="string"==typeof t.roi_data.RW?t.roi_data.RW.split(";"):[];0==i.length&&this.rwCount++,console.log(i);var s=[];this.tempRectPoints=[];for(let r=0;r<n.length-1;r+=2){var o={x:Number(n[r]),y:Number(n[r+1])};s.push(o)}for(let r=0;r<i.length-1;r+=2){var h={x:Number(i[r]),y:Number(i[r+1])};this.tempRectPoints.push(h)}console.log(this.tempRectPoints),this.PanelsRoiPoints.push({rw:this.tempRectPoints,panel:s,panel_id:t.panel_id}),console.log(this.PanelsRoiPoints)}),this.DrawExistPanels()}DrawExistPanels(){this.PanelsRoiPoints.forEach((t,a)=>{console.log(t),this.polygonOptions.stroke="rgb(127, 255, 0)";var n=new fabric.Polygon(t.panel,{...this.polygonOptions,id:a});if(t.rw.length>0){var i=new fabric.Polygon(t.rw,{...this.polygonOptions2,id:a});i.set("aCoords",{tl:new fabric.Point(t.rw[0].x,t.rw[0].y),tr:new fabric.Point(t.rw[1].x,t.rw[1].y),br:new fabric.Point(t.rw[2].x,t.rw[2].y),bl:new fabric.Point(t.rw[3].x,t.rw[3].y)})}console.log(n);var s=new fabric.Text("NA"===t.panel_id?a+1+"."+t.panel_id:t.panel_id,{fontSize:20,backgroundColor:"black",left:n.left,top:n.top,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(n);var o={rw_canvas:t.rw.length?i:null,panel_name_canvas:s,roi_canvas:n,rw:t.rw,panel_id:"NA"===this.PanelData[0].panel_data[a].panel_id?this.PanelData[0].panel_data[a].panel_id+(a+1):this.PanelData[0].panel_data[a].panel_id,roi_data:this.PanelData[0].panel_data[a]};console.log(this.panel_key_id),this.allPanelData.push(o),console.log("alllpanelData",this.allPanelData),console.log("panelData[0",this.PanelData),console.log(i),t.rw.length>0?(console.log(t.rw),this.canvas.add(n,s,i)):this.canvas.add(n,s),this.canvas.renderAll()}),this.rwCount>0&&this.modalService.open(this.RWAlert,{centered:!0}),console.log(this.allPanelData)}CalculateRectPoints(t,a,n,i){var s=(t+n)/2,o=(a+i)/2,h=(t-n)/2,m=(a-i)/2,p=s+m,l=o-h,_={x:this.tempRectPoints[1].x,y:this.tempRectPoints[1].x};this.tempRectPoints[1]={x:s-m,y:o+h},this.tempRectPoints[2]=_,this.tempRectPoints[4]={x:p,y:l}}getClickCoords(t){this.newPt={x:t.layerX,y:t.layerY},this.newPanelPoints.push(this.newPt),console.log(this.newPt),console.log(this.newPanel),this.canvas.add(this.newPanel)}getClickCoordsForRW(t){if(this.isAddRW){var a={x:Math.round(t.layerX),y:Math.round(t.layerY)};this.newRWPoints.push(a),console.log(a),console.log(this.newRWPoints),this.canvas.add(this.newRw)}}makeNewPanel(){this.newPanel=new fabric.Polygon(this.newPanelPoints,this.polygonOptions)}makeNewRW(){this.newRw=new fabric.Polygon(this.newRWPoints,this.polygonOptions2)}isDelete(t){this.selectedEditId=t,this.selectedId=t,this.modalService.open(this.deleteModal)}DeletePanel(){if(console.log(this.jobType,"jobtype"),"HT"==this.jobType){this.isDeleteRW=!1;var a=this.allPanelData[this.selectedEditId].rw_canvas,n=this.allPanelData[this.selectedEditId].panel_name_canvas;this.canvas.remove(this.allPanelData[this.selectedEditId].roi_canvas),this.canvas.remove(n),this.canvas.remove(a),console.log(),this.allPanelData[this.selectedEditId].roi_canvas.points=[],this.allPanelData[this.selectedEditId].roi_data.bbox=[],this.canvas.renderAll(),this.OnDeletePanel()}}DeletePanelRW(t){if(this.selectedEditId=t,this.isDeleteRW=!0,confirm("Do you want to delete this Rack window?")){var n=this.allPanelData[t].rw_canvas;this.allPanelData[t].rw_canvas.points=[],this.canvas.remove(n),this.allPanelData[this.selectedEditId].RW=[],console.log(this.PanelData[0].panel_data),console.log(this.allPanelData),this.canvas.renderAll(),this.SaveEditedChanges()}}Back(){window.close()}}return d.\u0275fac=function(t){return new(t||d)(e.\u0275\u0275directiveInject(b.gz),e.\u0275\u0275directiveInject(R.N),e.\u0275\u0275directiveInject(b.F0),e.\u0275\u0275directiveInject(I.FF))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["app-conveyor"]],viewQuery:function(t,a){if(1&t&&(e.\u0275\u0275viewQuery(S,5),e.\u0275\u0275viewQuery(W,5),e.\u0275\u0275viewQuery(N,5),e.\u0275\u0275viewQuery(A,5),e.\u0275\u0275viewQuery(T,5)),2&t){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.panelChangeModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.panelNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.roiType=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.RWAlert=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.deleteModal=n.first)}},decls:51,vars:6,consts:[[1,"container-fluid","dashboard-content"],[1,"page-header","mb-3"],["class","row mt-3","id","analytic",4,"ngIf"],[1,"row"],[1,"col-7"],[1,""],[1,"col-12"],[1,"me-2","btn","success",2,"width","inherit",3,"click"],["icon","plus",1,"me-1"],[1,"col-4"],[1,"me-2","btn","danger",2,"width","inherit",3,"click"],[1,"col-5"],[1,"float-end"],[1,"float-end","btn","primary",3,"click"],["class","btn default me-2",3,"click",4,"ngIf"],[1,"col-1"],[1,"col-12","mb-3"],[1,"card","card-body"],["id","canvas-container",1,"d-flex","justify-content-center"],["canvasContainer",""],["id","canvasROI","height","auto","width","auto",1,"canvas-class"],[1,"row","mb-3"],[1,"card"],[1,"card-header"],["class","table",4,"ngIf"],[1,"offset-9"],[1,"col-3"],["panelNameChangeModal",""],["panelNameModal",""],["alertRW",""],["roiType",""],["deleteModal",""],["id","analytic",1,"row","mt-3"],[1,"card","analytics","card-body"],[1,"text-muted"],[1,"card","analytics","card-body","d-flex","justify-centent-center"],[1,"btn","default","me-2",3,"click"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"dblclick"],[1,"btn","btn-sm","mr-2","text-custome",3,"click"],["class","btn btn-sm mr-2 text-custome",3,"click",4,"ngIf"],[1,"btn","btn-sm","text-custome",3,"click"],[1,"btn","btn-sm","mr-2","text-danger",3,"click"],["class","btn btn-sm mr-2 text-danger",3,"click",4,"ngIf"],[1,"float-center"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",2,"color","var(--label-color)",3,"checked","change"],[1,"card-body","p-4"],["type","text","id","panel",1,"form-control","mb-3",3,"formControl"],["type","submit",1,"btn","success","ms-2","float-end",3,"disabled","click"],[1,"btn","danger","me-2","float-end",3,"click"],[1,"float-start"],["for","flexSwitchCheckDefault",1,"form-check-label"],["type","text","id","panel",1,"form-control","mb-3",3,"ngClass","formControl"],["id","validationServerUsernameFeedback",3,"ngClass"],[1,"modal-body"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","default",3,"click"],[1,"container"],[1,"form","cf"],[1,"plan","cf"],["type","radio","name","radio1","id","free","value","free"],["for","free",1,"free-label","four","col"],["type","radio","name","radio1","id","basic","value","basic","checked",""],["for","basic",1,"basic-label","four","col"],[1,"icon-box"],[1,"material-icons"],["type","button",1,"btn","danger",3,"click"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2"),e.\u0275\u0275text(3,"Job Settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,V,25,4,"div",2),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",3)(9,"div",6)(10,"div",3)(11,"button",7),e.\u0275\u0275listener("click",function(){return a.AddNewPanel()}),e.\u0275\u0275element(12,"fa-icon",8),e.\u0275\u0275text(13,"Add ROI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",9)(15,"button",10),e.\u0275\u0275listener("click",function(){return a.DeleteNewPanel()}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(17,"div",11)(18,"div",12)(19,"button",13),e.\u0275\u0275listener("click",function(){return a.Back()}),e.\u0275\u0275text(20,"Back"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",12),e.\u0275\u0275template(22,O,2,0,"button",14),e.\u0275\u0275template(23,M,2,0,"button",14),e.\u0275\u0275template(24,j,2,0,"button",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"div",15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"div",16)(27,"div",17)(28,"div",18,19),e.\u0275\u0275element(30,"canvas",20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",21)(32,"div",6)(33,"div",22)(34,"div",23)(35,"h4"),e.\u0275\u0275text(36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(37,B,13,1,"table",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",21)(39,"div",25),e.\u0275\u0275element(40,"div",26),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(41,Y,11,2,"ng-template",null,27,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(43,z,18,7,"ng-template",null,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(45,L,14,0,"ng-template",null,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(47,Q,17,0,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(49,H,17,0,"ng-template",null,31,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",a.isPanelData),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngIf",(a.isEdit||a.isChanges)&&!(a.isAddRW||a.isAddPanel)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(a.isEdit||a.isChanges)&&a.isAddPanel&&a.newPanelPoints.length>2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(a.isEdit||a.isChanges)&&a.isAddRW&&a.newRWPoints.length>2),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate1(" ","HT"==a.jobType?"Panels":"Lock Regions",""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","HT"==a.jobType))},dependencies:[f._Y,f.Fj,f.JJ,f.JL,f.oH,k.BN,D.NgClass,D.NgForOf,D.NgIf,f.F]}),d})();var G=g(9174),q=g(8783);const K=[{path:"",component:U}];let Z=(()=>{class d{}return d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=e.\u0275\u0275defineInjector({imports:[b.Bz.forChild(K),G.A,q.LU,b.Bz]}),d})()}}]);