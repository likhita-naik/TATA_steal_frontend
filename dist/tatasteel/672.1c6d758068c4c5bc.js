"use strict";(self.webpackChunktatasteel=self.webpackChunktatasteel||[]).push([[672],{2672:(ee,E,P)=>{P.r(E),P.d(E,{LTModule:()=>Z});var w=P(9569),R=(P(8621),P(9174)),D=P(8783),f=P(433),e=P(4650),k=P(7445),I=P(2953),S=P(2216),x=P(6895);const W=["panelNameChangeModal"],N=["panelNameModal"],A=["roiType"],T=["alertRW"],L=["deleteModal"];function V(r,u){if(1&r&&(e.\u0275\u0275elementStart(0,"div",36)(1,"div",37)(2,"div",38)(3,"h5",39),e.\u0275\u0275text(4,"Job Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"h5"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",37)(8,"div",38)(9,"h5",39),e.\u0275\u0275text(10,"Job Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"h5"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"div",37)(14,"div",38)(15,"h5",39),e.\u0275\u0275text(16,"IP Address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"h5"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",37)(20,"div",38)(21,"h5",39),e.\u0275\u0275text(22,"Camera ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"h5"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",37)(26,"div",38)(27,"h5",39),e.\u0275\u0275text(28,"Sub Area"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"h5"),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",37)(32,"div",38)(33,"h5",39),e.\u0275\u0275text(34,"Department"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"h5"),e.\u0275\u0275text(36),e.\u0275\u0275elementEnd()()()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentData.type?t.currentData.type:"--"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentData.jobNo?t.currentData.jobNo:t.currentData.job_no?t.currentData.job_no:"--"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentData.ip_address?t.currentData.ip_address:"--"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentData.camera_id?t.currentData.camera_id:"--"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentData.area?t.currentData.area:t.currentData.sub_area?t.currentData.sub_area:"--"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentData.department?t.currentData.department:"--")}}function O(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.SaveEditedChanges())}),e.\u0275\u0275text(1,"Save changes"),e.\u0275\u0275elementEnd()}}function j(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.PanelName())}),e.\u0275\u0275text(1,"Confirm Panel"),e.\u0275\u0275elementEnd()}}function M(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.OnAddingNewRw())}),e.\u0275\u0275text(1,"Confirm RW"),e.\u0275\u0275elementEnd()}}function $(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.EditRW(n.index))}),e.\u0275\u0275text(1,"Edit RW"),e.\u0275\u0275elementEnd()}}function J(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",48),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.DeletePanelRW(n.index))}),e.\u0275\u0275text(1,"Delete RW"),e.\u0275\u0275elementEnd()}}function F(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",44),e.\u0275\u0275listener("dblclick",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.AlterPanelName(l.index))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"button",45),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.Edit(l.index))}),e.\u0275\u0275text(7,"Edit Panel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,$,2,0,"button",46),e.\u0275\u0275elementStart(9,"button",47),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.AddNewRW(l.index))}),e.\u0275\u0275text(10,"Add RW"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",48),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.isDelete(l.index))}),e.\u0275\u0275text(12,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,J,2,0,"button",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td")(15,"div",6)(16,"div",50)(17,"input",51),e.\u0275\u0275listener("change",function(n){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.UnallocatedJobConfig(n,s.index))}),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=u.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.index+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.panel_id," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.rw.length>0),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.rw.length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("checked",t.roi_data.roi_data.unallocated_job_status)}}function B(r,u){if(1&r&&(e.\u0275\u0275elementStart(0,"table",41)(1,"thead")(2,"tr")(3,"th",42),e.\u0275\u0275text(4,"S.No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th",42),e.\u0275\u0275text(6,"Panel Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",42),e.\u0275\u0275text(8,"Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th",42),e.\u0275\u0275text(10,"Unplanned Job"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"tbody"),e.\u0275\u0275template(12,F,18,5,"tr",43),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngForOf",t.FilterAllocated(t.allPanelData))}}function U(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",44),e.\u0275\u0275listener("dblclick",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.AlterPanelName(l.index))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"button",45),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.Edit(l.index))}),e.\u0275\u0275text(7,"Edit Panel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",48),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.isDelete(l.index))}),e.\u0275\u0275text(9,"Delete ROI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"td")(11,"div",52)(12,"div",50)(13,"input",51),e.\u0275\u0275listener("change",function(n){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.UnallocatedJobConfig(n,s.index))}),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=u.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.index+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.panel_id," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("checked",t.roi_data.roi_data.unallocated_job_status)}}function Y(r,u){if(1&r&&(e.\u0275\u0275elementStart(0,"table",41)(1,"thead")(2,"tr")(3,"th",42),e.\u0275\u0275text(4,"S.No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th",42),e.\u0275\u0275text(6,"ROI Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",42),e.\u0275\u0275text(8,"Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th",42),e.\u0275\u0275text(10,"Unplanned Job"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"tbody"),e.\u0275\u0275template(12,U,14,3,"tr",43),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngForOf",t.FilterUnallocated(t.allPanelData))}}function X(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"div",25)(2,"h4"),e.\u0275\u0275text(3," Change Panel No"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",54)(5,"form"),e.\u0275\u0275element(6,"input",55),e.\u0275\u0275elementStart(7,"button",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.ChangePanelName())}),e.\u0275\u0275text(8,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",57),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Cross click"))}),e.\u0275\u0275text(10,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("formControl",t.tempPanelID),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",""==t.tempPanelID.value)}}const z=function(r){return{"is-invalid":r}};function Q(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"div",25)(2,"h4",58),e.\u0275\u0275text(3,"Enter Panel Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",14)(5,"div",50)(6,"input",51),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onChange(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",59),e.\u0275\u0275text(8,"Unallocated Job"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",54)(10,"form"),e.\u0275\u0275element(11,"input",60),e.\u0275\u0275elementStart(12,"div",61),e.\u0275\u0275text(13," Please enter roi name. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.nameSubmit())}),e.\u0275\u0275text(15,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",57),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Cross click"))}),e.\u0275\u0275text(17,"cancel"),e.\u0275\u0275elementEnd()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("checked",t.unallocatedJobStatus),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,z,t.panelNameControl.invalid&&t.panelNameControl.touched&&t.panelNameControl.dirty))("formControl",t.panelNameControl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.panelNameControl.invalid&&t.panelNameControl.touched&&t.panelNameControl.dirty?"invalid-feedback":"visually-hidden"),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.panelNameControl.invalid)}}function H(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",62)(1,"div",63)(2,"div",64)(3,"div",65)(4,"h4",66),e.\u0275\u0275text(5,"Please draw the rack window for respective panels."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",62)(7,"p"),e.\u0275\u0275text(8,"Otherwise you will not get the proper output."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",67)(10,"button",68),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Cross click"))}),e.\u0275\u0275text(11,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",69),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Cross click"))}),e.\u0275\u0275text(13,"Got it"),e.\u0275\u0275elementEnd()()()()()}}function G(r,u){1&r&&(e.\u0275\u0275elementStart(0,"div",62)(1,"div",63)(2,"div",64)(3,"div",65)(4,"h4",66),e.\u0275\u0275text(5,"Please Select the ROI Type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",62)(7,"div",70),e.\u0275\u0275element(8,"h1"),e.\u0275\u0275elementStart(9,"form",71)(10,"section",72),e.\u0275\u0275element(11,"input",73),e.\u0275\u0275elementStart(12,"label",74),e.\u0275\u0275text(13,"HT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",75),e.\u0275\u0275elementStart(15,"label",76),e.\u0275\u0275text(16,"Hydraulic"),e.\u0275\u0275elementEnd()()()()()()()())}function q(r,u){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",62)(1,"div",63)(2,"div",64)(3,"div",65)(4,"div",77)(5,"i",78),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",66),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",62)(10,"p"),e.\u0275\u0275text(11,"Do you really want to delete these ROI? This process cannot be undone."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",67)(13,"button",68),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Cross click"))}),e.\u0275\u0275text(14,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.DeletePanel())}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd()()()()()}}const K=[{path:"",component:(()=>{class r{constructor(t,a,n,l){this.ActiveRoute=t,this.server=a,this.router=n,this.modalService=l,this.PanelData={},this.isPanelData=!1,this.currentData=null,this.PanelsRoiPoints=[],this.newPanelPoints=[],this.isAddPanel=!1,this.isChanges=!1,this.isPolygonDrawn=!1,this.isEdit=!1,this.isLock1=!1,this.isTag=!1,this.isLock2=!1,this.isRackWindow=!1,this.AllPanels=[],this.isDeleteRW=!1,this.tempData=[],this.allPanelData=[],this.isEditText=!1,this.tempRectPoints=[],this.tempPanelID=new f.NI("",f.kI.required),this.rwCount=0,this.panel_key_id=0,this.polygonOptions={fill:"rgba(0,0, 0,0)",strokeWidth:2,stroke:"rgb(127, 255, 0)",scaleX:1,scaleY:1,hoverCursor:"crosshair",objectCaching:!1,selectable:!1,transparentCorners:!1,cornerColor:"blue"},this.polygonOptions2={fill:"rgba(0,0,0,0)",strokeWidth:2,stroke:"rgba(15, 227, 242)",scaleX:1,scaleY:1,hoverCursor:"crosshair",objectCaching:!1,selectable:!1,transparentCorners:!1,cornerColor:"blue"},this.isEditPanel=!1,this.iseditRW=!1,this.isLoading=!1,this.newRWPoints=[],this.isAddRW=!1,this.unallocatedJobStatus=!1,this.panelNameControl=new f.NI("",f.kI.required),this.IP=a.IP}ngAfterViewInit(){this.ActiveRoute.queryParams.subscribe(t=>{console.log(t),this.currentData=t,this.ID=t.id,this.imageName=t.image_name,this.currentArea=t.area,this.currentPlant=t.plant,this.jobType=t.type;var a=document.getElementById("page");a.classList.add("loading"),"false"==t.isNewJob?this.server.GetPanelCameraData(this.ID,this.imageName).subscribe(n=>{console.log(n.message),a.classList.remove("loading"),n.success?(this.PanelData=n.message.data,this.currentData=n.message,console.log(this.imageName),this.isPanelData=!0,0!==Object.keys(this.PanelData).length&&this.GetPanelPoints(),console.log(this.PanelData)):(this.PanelData={},this.PanelData.panel_data=[],this.server.notification(n.message,"Retry"))},n=>{a.classList.remove("loading"),this.server.notification("Error while fetching the data","Retry")}):(this.unallocatedJobStatus=!0,this.server.GetNewJobData(this.ID,this.imageName).subscribe(n=>{console.log(n.message),a.classList.remove("loading"),n.success?(this.PanelData=n.message.data,this.currentData=n.message,console.log(this.imageName),this.isPanelData=!0,0!==Object.keys(this.PanelData).length&&this.GetPanelPoints(),console.log(this.PanelData)):(this.PanelData={},this.PanelData.panel_data=[],this.server.notification(n.message,"Retry"))},n=>{a.classList.remove("loading"),this.server.notification("Error while fetching the data","Retry")}))}),this.canvasSetup(),this.makeNewPanel(),this.makeNewRW(),this.canvas.on("mouse:up",t=>{1===t.button&&!(null!=t.transform&&"modifyPolygon"!==t.transform.action)&&!this.isEdit&&(console.log("polygon  is 1creating"),this.isAddPanel&&(console.log("panel cords"),this.getClickCoords(t.e)),this.isAddRW&&(console.log("rw cords"),this.getClickCoordsForRW(t.e))),3===t.button&&(this.isAddPanel&&(this.newPanelPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0)),this.isAddRW&&(this.newRWPoints.length<4?(console.log("polygon is  3creating"),this.isPolygonDrawn=!1):(console.log("polygon is  3creating"),this.isPolygonDrawn=!0)))}),this.canvas.on("mouse:down",t=>{console.log(t),1===t.button&&!(null!=t.transform&&"modifyPolygon"!==t.transform.action)&&!this.isEdit&&console.log("polygon  is 1creating"),this.isAddPanel&&3===t.button&&(this.newPanelPoints.length<3?this.isPolygonDrawn=!1:(this.PanelName(),this.isPolygonDrawn=!0)),this.isAddRW&&3===t.button&&(this.newRWPoints.length<3?this.isPolygonDrawn=!1:(console.log("rw is created"),this.OnAddingNewRw(),this.isPolygonDrawn=!0))}),this.canvas.on("object:selected",t=>{console.log("selected Object",t)}),this.canvas.on("object:moving",t=>{console.log(t.target),console.log(this.iseditRW),this.isEditPanel=!1,this.iseditRW&&(console.log(this.allPanelData[this.selectedPanelforRW].rw_canvas.points),console.log(t),console.log(this.canvas),console.log(this.allPanelData[this.selectedPanelforRW].rw_canvas),this.allPanelData[this.selectedPanelforRW].rw_canvas.setCoords(),this.allPanelData[this.selectedPanelforRW].rw_canvas.calcTransformMatrix(),this.allPanelData[this.selectedPanelforRW].rw_canvas._calcDimensions(),this.canvas.renderAll())}),this.canvas.on("object:scaling",t=>{console.log(t.target)})}PanelName(){this.isAddPanel&&(this.isPolygonDrawn=!0,this.isAddPanel=!1,this.modalService.open(this.panelNameModal,{size:"small",centered:!0,backdrop:"static"}).result.then(t=>{this.panelNameControl.setValue(""),this.panelNameControl.updateValueAndValidity(),this.panelNameControl.markAsUntouched(),this.DeleteNewPanel()},t=>{this.panelNameControl.markAsUntouched()}))}Confirm(){this.isAddRW&&this.OnAddingNewPanel(),this.isAddPanel&&this.OnAddingNewRw()}SaveChanges(){console.log(this.isLoading=!0),console.log(this.allPanelData);var t=[];this.PanelData.panel_data.forEach((n,l)=>{t.push({...n.roi_data,panel_key_id:l+1})}),console.log(t);var a={id:this.ID,imagename:this.imageName,roi_data:t};console.log(a),this.server.AddROI(a).subscribe(n=>{console.log(n),this.isLoading=!1})}DeleteNewPanel(){this.newPanelPoints.splice(0,this.newPanelPoints.length),this.newRWPoints.splice(0,this.newRWPoints.length),this.canvas.renderAll()}OnAddingNewPanel(){this.isAddPanel=!1;var t=!1;if(console.log(this.panelNameControl.value),console.log(this.allPanelData),this.allPanelData.forEach(o=>{console.log(o),o.panel_id==this.panelNameControl.value&&(t=!0)}),console.log(t),t)this.server.notification("Job for that panel already exist"),this.DeleteNewPanel(),this.isPolygonDrawn=!1;else{fabric.util.resetObjectTransform(this.newPanel);var a=[];const o=[...this.newPanelPoints];console.log(o);var n=this.newPanel._calcDimensions();const c=new fabric.Polygon(o,this.polygonOptions);var l=this.panelNameControl.value;if(null!=l){console.log(l),this.canvas.add(c),this.canvas.renderAll(),console.log(this.newPanel);for(let p=0;p<this.newPanelPoints.length;p++)a.push(`${this.newPanelPoints[p].x};${this.newPanelPoints[p].y};`);var d=a.toString().replace(/,/g,"");console.log(d);var h=new fabric.Text(l,{fontSize:20,backgroundColor:"black",left:n.left,top:n.top,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(h),this.canvas.add(h),this.canvas.renderAll();var m={panel_name_canvas:h,roi_canvas:c,panel_id:l,index:this.allPanelData.length,rw:[],roi_data:{panel_id:l,panel_status:!1,isolation_status:null,flasher_status:null,roi_data:{panel_no:l,bbox:d,panel_key_id:++this.panel_key_id,RW:[],unallocated_job_status:!!this.unallocatedJobStatus}}};console.log(m.roi_data),this.PanelData.panel_data.push(m.roi_data),this.allPanelData.push(m),console.log(this.allPanelData.length),this.newPanelPoints.splice(0,this.newPanelPoints.length),this.panelNameControl.setValue(null),this.panelNameControl.updateValueAndValidity(),this.panelNameControl.markAsUntouched(),this.panelNameControl.reset(),this.panelNameControl.addValidators(f.kI.required),console.log(this.selectedEditId),this.SaveAddedPanel()}else this.DeleteNewPanel(),this.isPolygonDrawn=!1}}OnAddingNewRw(){this.isAddPanel=!1,this.isAddRW=!1,this.isChanges=!0,console.log("rw added"),fabric.util.resetObjectTransform(this.newRw);var t=[];const a=[...this.newRWPoints];console.log(a),this.newRw._calcDimensions();const l=new fabric.Polygon(a,this.polygonOptions2);console.log(this.panelNameControl.value),this.canvas.add(l),this.canvas.renderAll(),console.log(this.newPanel);for(let m=0;m<this.newRWPoints.length;m++)t.push(`${this.newRWPoints[m].x};${this.newRWPoints[m].y};`);var h=t.toString().replace(/,/g,"");console.log(h),this.PanelData.panel_data[this.selectedPanelforRW].roi_data.RW=h,this.allPanelData[this.selectedPanelforRW].rw_canvas=l,console.log(this.allPanelData.length),this.newRWPoints.splice(0,this.newRWPoints.length),this.panelNameControl.setValue(null),this.selectedEditId=this.selectedPanelforRW,console.log(this.selectedEditId),this.SaveEditedChanges()}nameSubmit(){this.modalService.dismissAll(),this.OnAddingNewPanel()}AddNewPanel(){this.polygonOptions.stroke="rgb(127, 255, 0)",this.newPanel.stroke="rgb(127, 255, 0)",this.newPanelPoints.splice(0,this.newPanelPoints.length),this.isDeleteRW=!1,this.isAddPanel=!0,this.isAddRW=!1,this.isEdit=!1,this.iseditRW=!1}AddNewRW(t){this.isDeleteRW=!1,this.selectedPanelforRW=t,this.selectedId=t,this.selectedEditId=t,this.isAddPanel=!1,this.isAddRW=!0,this.isEdit=!1,this.iseditRW=!1,this.canvas.remove(this.allPanelData[this.selectedPanelforRW].rw_canvas)}SaveEditedChanges(){console.log(this.canvas.getObjects()),console.log(this.allPanelData[this.selectedEditId].panel_id),"NA"==this.allPanelData[this.selectedEditId].panel_id?this.AlterPanelName(this.selectedEditId):this.SaveEditedPanel()}Edit(t){this.isEditPanel=!0,this.selectedEditId=t,this.iseditRW=!1,this.isAddPanel=!1,this.isAddRW=!1;var a=this.allPanelData[t].roi_canvas;if(this.isEdit=!0,this.isEdit){var n=(d,h)=>(m,o,c,p)=>{this.isEditPanel=!0,this.iseditRW=!1;var i=o.target,_=fabric.util.transformPoint(new fabric.Point(i.points[d].x-i.pathOffset.x,i.points[d].y-i.pathOffset.y),i.calcTransformMatrix()),g=h(m,o,c,p),b=(i._setPositionDimensions({}),i._getNonTransformedDimensions());return i.setPositionByOrigin(_,(i.points[d].x-i.pathOffset.x)/b.x+.5,(i.points[d].y-i.pathOffset.y)/b.y+.5),g},l=(d,h,m,o)=>{console.log(d),this.isEditPanel=!0,this.iseditRW=!1;var c=h.target,p=c.controls[c.__corner],i=c.toLocalPoint(new fabric.Point(m,o),"center","center"),_=c._getNonTransformedDimensions(),g=c._getTransformedDimensions(0,0);return c.points[p.pointIndex]={x:i.x*_.x/g.x+c.pathOffset.x,y:i.y*_.y/g.y+c.pathOffset.y},console.log(c.points),!0};let s=a;console.log(s),this.canvas.setActiveObject(a),s=this.canvas.getActiveObject(),console.log(s);{console.log("poly first");let d=s.points.length-1;s.cornerStyle="circle",s.cornerColor="rgba(0,0,255,0.5)",this.iseditRW=!1,this.isEditPanel=!0,this.allPanelData[t].roi_canvas.controls=s.points.reduce((h,m,o)=>(h["p"+o]=new fabric.Control({pointIndex:o,positionHandler:(c,p,i)=>(console.log(c),console.log(p),console.log(i),console.log(i),this.iseditRW=!1,fabric.util.transformPoint(new fabric.Point(i.points[o].x-i.pathOffset.x,i.points[o].y-i.pathOffset.y),fabric.util.multiplyTransformMatrices(i.canvas.viewportTransform,i.calcTransformMatrix()))),actionHandler:n(o>0?o-1:d,l),actionName:"modifyPolygon"}),console.log(h),h),{})}console.log(new fabric.Control),this.canvas.renderAll()}}EditRW(t){this.SaveChanges(),this.canvas.requestRenderAllBound(),this.selectedPanelforRW=t,this.selectedEditId=t,this.iseditRW=!0,this.isEdit=!0,this.isEditPanel=!1,this.isDeleteRW=!1,console.log(this.allPanelData[this.selectedPanelforRW].roi_canvas,"rw canvas"),this.allPanelData[this.selectedPanelforRW].rw_canvas.selectable=!0,this.allPanelData[this.selectedPanelforRW].rw_canvas.selectionFullyContained=!0}EditRect(t){this.selectedPanelforRW=t,this.selectedEditId=t,this.iseditRW=!0;var a=this.allPanelData[t].rw_canvas;if(this.isEdit=!0,this.isEdit){var n=(d,h)=>(m,o,c,p)=>{var i=o.target,_=fabric.util.transformPoint(new fabric.Point(i.points[d].x-i.pathOffset.x,i.points[d].y-i.pathOffset.y),i.calcTransformMatrix()),g=h(m,o,c,p),b=(i._setPositionDimensions({}),i._getNonTransformedDimensions());return i.setPositionByOrigin(_,(i.points[d].x-i.pathOffset.x)/b.x+.5,(i.points[d].y-i.pathOffset.y)/b.y+.5),g},l=(d,h,m,o)=>{console.log(d);var c=h.target,p=c.controls[c.__corner],i=c.toLocalPoint(new fabric.Point(m,o),"center","center"),_=c._getNonTransformedDimensions(),g=c._getTransformedDimensions(0,0);return c.points[p.pointIndex]={x:i.x*_.x/g.x+c.pathOffset.x,y:i.y*_.y/g.y+c.pathOffset.y},console.log(c.points),!0};let s=a;console.log(s),this.canvas.setActiveObject(a),s=this.canvas.getActiveObject(),console.log(s);{console.log("poly first");let d=s.points.length-1;s.cornerStyle="circle",s.cornerColor="rgba(0,0,255,0.5)",this.allPanelData[t].roi_canvas.controls=s.points.reduce((h,m,o)=>(h["p"+o]=new fabric.Control({pointIndex:o,positionHandler:(c,p,i)=>(console.log(c),console.log(p),console.log(i),console.log(i),fabric.util.transformPoint(new fabric.Point(i.points[o].x-i.pathOffset.x,i.points[o].y-i.pathOffset.y),fabric.util.multiplyTransformMatrices(i.canvas.viewportTransform,i.calcTransformMatrix()))),actionHandler:n(o>0?o-1:d,l),actionName:"modifyPolygon"}),console.log(h),h),{})}console.log(new fabric.Control),this.canvas.renderAll()}}SaveEditedPanel(){console.log("save edited function");var a=[];null!=this.allPanelData[this.selectedEditId].rw_canvas&&fabric.util.resetObjectTransform(this.allPanelData[this.selectedEditId].rw_canvas);var n=null!=this.allPanelData[this.selectedEditId].rw_canvas?this.allPanelData[this.selectedEditId].rw_canvas._calcDimensions():"";console.log(n);for(let i=0;i<this.allPanelData[this.selectedEditId].roi_canvas.points.length;i++){console.log(this.allPanelData[this.selectedEditId].roi_canvas.points);var l=this.allPanelData[this.selectedEditId].roi_canvas.points;let _=Math.round(l[i].x),g=Math.round(l[i].y);a.push(`${_};${g};`)}var s=/,/g,d=a.toString().replace(s,"");console.log(d),console.log(this.allPanelData[this.selectedEditId].roi_data),this.allPanelData[this.selectedEditId].roi_data.bbox=d,this.PanelData.panel_data[this.selectedEditId].roi_data.bbox=d;var h=[];if(null!=this.allPanelData[this.selectedEditId].rw_canvas){this.iseditRW&&!this.isEditPanel&&!this.isDeleteRW&&(console.log("editing  rack window"),this.allPanelData[this.selectedPanelforRW].rw_canvas.points[0]=this.canvas._activeObject.aCoords.tl,this.allPanelData[this.selectedPanelforRW].rw_canvas.points[1]=this.canvas._activeObject.aCoords.tr,this.allPanelData[this.selectedPanelforRW].rw_canvas.points[2]=this.canvas._activeObject.aCoords.br,this.allPanelData[this.selectedPanelforRW].rw_canvas.points[3]=this.canvas._activeObject.aCoords.bl);for(let _=0;_<this.allPanelData[this.selectedEditId].rw_canvas.points.length;_++){console.log(this.allPanelData[this.selectedEditId].rw_canvas.points),l=this.allPanelData[this.selectedEditId].rw_canvas.points;let v=Math.round(l[_].x),b=Math.round(l[_].y);h.push(`${v};${b};`)}s=/,/g;var m=h.toString().replace(s,"");console.log(m),console.log(this.allPanelData[this.selectedEditId].roi_data),this.allPanelData[this.selectedEditId].roi_data.RW=m,this.PanelData.panel_data[this.selectedEditId].roi_data.RW=m,console.log(this.allPanelData[this.selectedEditId].roi_data)}[].push(this.allPanelData[this.selectedEditId].roi_data),console.log(this.selectedEditId),console.log(this.allPanelData[this.selectedEditId].roi_data.roi_data.panel_key_id);var o=[],c={id:this.ID,image_name:this.imageName,flasher_status:null,isolation_status:null,panel_id:this.allPanelData[this.selectedEditId].roi_data.panel_id,panel_key_id:this.allPanelData[this.selectedEditId].roi_data.roi_data.panel_key_id,roi_data:this.allPanelData[this.selectedEditId].roi_data.roi_data};o.push(c),console.log(o),this.server.UpdatePanelRoi({data:c}).subscribe(i=>{console.log(i),i.success&&(window.location.reload(),this.modalService.dismissAll()),this.server.notification(i.message)})}ChangePanelName(){this.PanelData.panel_data[this.selectedId].panel_id=this.tempPanelID.value,this.allPanelData[this.selectedId].panel_id=this.tempPanelID.value,console.log(this.PanelData.panel_data[this.selectedId].panel_id),this.PanelData.panel_data[this.selectedId].roi_data.panel_number=this.tempPanelID.value,this.allPanelData[this.selectedId].panel_name_canvas.text=this.tempPanelID.value,this.allPanelData[this.selectedId].panel_name_canvas.panel_id=this.tempPanelID.value,this.canvas.renderAll(),this.modalService.dismissAll(),this.SaveEditedPanel()}onChange(t){console.log(t.target.checked),this.unallocatedJobStatus=!!t.target.checked}AlterPanelName(t){console.log(t),this.isEditText=!this.isEditText,this.selectedId=t,this.selectedEditId=t,this.tempPanelID.setValue(this.PanelData.panel_data[t].panel_id),this.modalService.open(this.panelChangeModal,{size:"small",animation:!0,centered:!0}).result.then(a=>{},a=>{})}OnDeletePanel(){console.log("save edited function");var a=[];null!=this.allPanelData[this.selectedEditId].rw_canvas&&fabric.util.resetObjectTransform(this.allPanelData[this.selectedEditId].rw_canvas);var n=null!=this.allPanelData[this.selectedEditId].rw_canvas?this.allPanelData[this.selectedEditId].rw_canvas._calcDimensions():"";console.log(n);for(let c=0;c<this.allPanelData[this.selectedEditId].roi_canvas.points.length;c++){console.log(this.allPanelData[this.selectedEditId].roi_canvas.points);var l=this.allPanelData[this.selectedEditId].roi_canvas.points;let p=Math.round(l[c].x),i=Math.round(l[c].y);a.push(`${p};${i};`)}var d=a.toString().replace(/,/g,"");console.log(d),console.log(this.allPanelData[this.selectedEditId].roi_data),this.allPanelData[this.selectedEditId].roi_data.bbox=d,this.PanelData.panel_data[this.selectedEditId].roi_data.bbox=d;var h=[],m={id:this.ID,imagename:this.imageName,panel_no:this.allPanelData[this.selectedEditId].roi_data.panel_id,panel_key_id:this.allPanelData[this.selectedEditId].roi_data.roi_data.panel_key_id};h.push(m),console.log(h);var o={data:m};this.server.DeleteJobPanel(m).subscribe(c=>{window.location.reload(),console.log(c),c.success||window.location.reload(),this.server.notification(c.message)},c=>{this.server.notification("Something Went Wrong","Retry")}),console.log(o)}UnallocatedJobConfig(t,a){this.selectedEditId=a,this.allPanelData[a].roi_data.roi_data.unallocated_job_status=!!t.target.checked,this.SaveEditedPanel()}SaveAddedPanel(){var a=[];null!=this.allPanelData[this.allPanelData.length-1].rw_canvas&&fabric.util.resetObjectTransform(this.allPanelData[this.allPanelData.length-1].rw_canvas);var n=null!=this.allPanelData[this.allPanelData.length-1].rw_canvas?this.allPanelData[this.allPanelData.length-1].rw_canvas._calcDimensions():"";console.log(n);for(let i=0;i<this.allPanelData[this.allPanelData.length-1].roi_canvas.points.length;i++){console.log(this.allPanelData[this.allPanelData.length-1].roi_canvas.points);var l=this.allPanelData[this.allPanelData.length-1].roi_canvas.points;let _=Math.round(l[i].x),g=Math.round(l[i].y);a.push(`${_};${g};`)}var s=/,/g,d=a.toString().replace(s,"");console.log(d),console.log(this.allPanelData[this.allPanelData.length-1].roi_data),this.allPanelData[this.allPanelData.length-1].roi_data.bbox=d,this.PanelData.panel_data[this.allPanelData.length-1].roi_data.bbox=d;var h=[];if(null!=this.allPanelData[this.allPanelData.length-1].rw_canvas){for(let _=0;_<this.allPanelData[this.allPanelData.length-1].rw_canvas.points.length;_++){console.log(this.allPanelData[this.allPanelData.length-1].rw_canvas.points),l=this.allPanelData[this.allPanelData.length-1].rw_canvas.points;let v=Math.round(l[_].x),b=Math.round(l[_].y);h.push(`${v};${b};`)}s=/,/g;var m=h.toString().replace(s,"");console.log(m),console.log(this.allPanelData[this.allPanelData.length-1].roi_data),this.allPanelData[this.allPanelData.length-1].roi_data.RW=m,this.PanelData.panel_data[this.allPanelData.length-1].roi_data.RW=m,console.log(this.allPanelData[this.allPanelData.length-1].roi_data)}[].push(this.allPanelData[this.allPanelData.length-1].roi_data),console.log(this.selectedEditId),console.log(this.allPanelData[this.allPanelData.length-1].roi_data.roi_data.panel_key_id);var o=[],c={id:this.ID,image_name:this.imageName,panel_id:this.allPanelData[this.allPanelData.length-1].roi_data.panel_id,panel_key_id:this.allPanelData[this.allPanelData.length-1].roi_data.roi_data.panel_key_id,isolation_status:null,flasher_status:null,roi_data:this.allPanelData[this.allPanelData.length-1].roi_data.roi_data};o.push(c),console.log(o),this.server.AddPanelRoi({data:c}).subscribe(i=>{console.log(i),i.success?(this.modalService.dismissAll(),this.modalService.open(this.RWAlert,{centered:!0}),window.location.reload()):(this.canvas.remove(this.allPanelData[this.allPanelData.length-1].roi_canvas),this.canvas.remove(this.allPanelData[this.allPanelData.length-1].roi_name_canvas)),this.server.notification(i.message)})}canvasSetup(){var t=document.getElementById("canvas-container");console.log(t.clientWidth),this.canvas=new fabric.Canvas("canvasROI",{fireRightClick:!0}),console.log(this.canvas),this.canvas.selection=!1,this.canvas.viewportTransform=[1,0,0,1,0,0],this.canvas.setWidth(t.clientWidth),fabric.Image.fromURL(this.IP+"/get_roi_image/"+this.imageName,a=>{console.log(a.width),console.log(a.height),this.canvas.setWidth(a.width),this.canvas.setHeight(a.height),this.canvas.setBackgroundImage(a,this.canvas.requestRenderAll.bind(this.canvas),{scaleX:this.canvas.width/a.width,scaleY:this.canvas.height/a.height})})}GetPanelPoints(){this.panel_key_id=0,this.PanelData.panel_data.forEach((t,a)=>{console.log(t),this.panel_key_id<t.roi_data.panel_key_id&&(this.panel_key_id=Number(t.roi_data.panel_key_id)),console.log(this.panel_key_id,"panel_key_id");var n=t.roi_data.bbox.split(";"),l="string"==typeof t.roi_data.RW?t.roi_data.RW.split(";"):[];0==l.length&&this.rwCount++,console.log(l);var s=[];this.tempRectPoints=[];for(let o=0;o<n.length-1;o+=2){var d={x:Number(n[o]),y:Number(n[o+1])};s.push(d)}for(let o=0;o<l.length-1;o+=2){var h={x:Number(l[o]),y:Number(l[o+1])};this.tempRectPoints.push(h)}console.log(this.tempRectPoints),this.PanelsRoiPoints.push({rw:this.tempRectPoints,panel:s,panel_id:t.panel_id}),console.log(this.PanelsRoiPoints)}),this.DrawExistPanels()}DrawExistPanels(){this.PanelsRoiPoints.forEach((t,a)=>{this.polygonOptions.stroke="rgb(127, 255, 0)";var n=new fabric.Polygon(t.panel,{...this.polygonOptions,id:a});if(t.rw.length>0){var l=new fabric.Polygon(t.rw,{...this.polygonOptions2,id:a});l.set("aCoords",{tl:new fabric.Point(t.rw[0].x,t.rw[0].y),tr:new fabric.Point(t.rw[1].x,t.rw[1].y),br:new fabric.Point(t.rw[2].x,t.rw[2].y),bl:new fabric.Point(t.rw[3].x,t.rw[3].y)})}console.log(n);var s=new fabric.Text("NA"===t.panel_id?a+1+"."+t.panel_id:t.panel_id,{fontSize:20,backgroundColor:"black",left:n.left,top:n.top,stroke:"rgb(127, 255, 0)",fill:"rgb(127, 255, 0)"});console.log(n),this.allPanelData.push({rw_canvas:t.rw.length?l:null,panel_name_canvas:s,roi_canvas:n,index:this.allPanelData.length,rw:t.rw,panel_id:"NA"===this.PanelData.panel_data[a].panel_id?this.PanelData.panel_data[a].panel_id+(a+1):this.PanelData.panel_data[a].panel_id,roi_data:this.PanelData.panel_data[a]}),t.rw.length>0?(console.log(t.rw),this.canvas.add(n,s,l)):this.canvas.add(n,s),this.canvas.renderAll()}),this.rwCount>0&&this.modalService.open(this.RWAlert,{centered:!0}),console.log(this.allPanelData)}CalculateRectPoints(t,a,n,l){var s=(t+n)/2,d=(a+l)/2,h=(t-n)/2,m=(a-l)/2,p=s+m,i=d-h,_={x:this.tempRectPoints[1].x,y:this.tempRectPoints[1].x};this.tempRectPoints[1]={x:s-m,y:d+h},this.tempRectPoints[2]=_,this.tempRectPoints[4]={x:p,y:i}}getClickCoords(t){this.newPt={x:t.layerX,y:t.layerY},this.newPanelPoints.push(this.newPt),console.log(this.newPt),console.log(this.newPanel),this.canvas.add(this.newPanel)}getClickCoordsForRW(t){if(this.isAddRW){var a={x:Math.round(t.layerX),y:Math.round(t.layerY)};this.newRWPoints.push(a),console.log(a),console.log(this.newRWPoints),this.canvas.add(this.newRw)}}makeNewPanel(){this.newPanel=new fabric.Polygon(this.newPanelPoints,this.polygonOptions)}makeNewRW(){this.newRw=new fabric.Polygon(this.newRWPoints,this.polygonOptions2)}isDelete(t){this.selectedEditId=t,this.selectedId=t,this.modalService.open(this.deleteModal)}DeletePanel(){if(console.log(this.jobType,"jobtype"),"HT"==this.jobType){this.isDeleteRW=!1;var a=this.allPanelData[this.selectedEditId].rw_canvas,n=this.allPanelData[this.selectedEditId].panel_name_canvas;this.canvas.remove(this.allPanelData[this.selectedEditId].roi_canvas),this.canvas.remove(n),this.canvas.remove(a),console.log(),this.allPanelData[this.selectedEditId].roi_canvas.points=[],this.allPanelData[this.selectedEditId].roi_data.bbox=[],this.canvas.renderAll(),this.OnDeletePanel()}}DeletePanelRW(t){if(this.selectedEditId=t,this.isDeleteRW=!0,confirm("Do you want to delete this Rack window?")){var n=this.allPanelData[t].rw_canvas;this.allPanelData[t].rw_canvas.points=[],this.canvas.remove(n),this.allPanelData[this.selectedEditId].RW=[],console.log(this.PanelData.panel_data),console.log(this.allPanelData),this.canvas.renderAll(),this.SaveEditedChanges()}}Back(){window.close()}FilterUnallocated(t){return t.filter(a=>1==a.roi_data.roi_data.unallocated_job_status)}FilterAllocated(t){return t.filter(a=>0==a.roi_data.roi_data.unallocated_job_status)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(w.gz),e.\u0275\u0275directiveInject(k.N),e.\u0275\u0275directiveInject(w.F0),e.\u0275\u0275directiveInject(I.FF))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-lt-panel"]],viewQuery:function(t,a){if(1&t&&(e.\u0275\u0275viewQuery(W,5),e.\u0275\u0275viewQuery(N,5),e.\u0275\u0275viewQuery(A,5),e.\u0275\u0275viewQuery(T,5),e.\u0275\u0275viewQuery(L,5)),2&t){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.panelChangeModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.panelNameModal=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.roiType=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.RWAlert=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(a.deleteModal=n.first)}},decls:56,vars:7,consts:[["id","page",1,"container-fluid","dashboard-content"],[1,"page-header","mb-3"],["class","row","id","info-card",4,"ngIf"],["id","data-card",1,"card","card-body","mb-2"],[1,"row"],[1,"col-7"],[1,""],[1,"row","me-2","ms-2","mt-2"],[1,"col-12"],[1,"me-2","btn","success",2,"width","inherit",3,"click"],["icon","plus",1,"me-1"],[1,"col-4"],[1,"me-2","btn","danger",2,"width","inherit",3,"click"],[1,"col-5"],[1,"float-end"],[1,"float-end","btn","primary",3,"click"],["class","btn default me-2",3,"click",4,"ngIf"],[1,"col-1"],[1,"col-12","mb-3"],["id","data-card",1,"card","card-body"],["id","canvas-container",1,"d-flex","justify-content-center"],["canvasContainer",""],["id","canvasROI","height","auto","width","auto",1,"canvas-class"],[1,"row","mb-3"],["id","data-card",1,"card"],[1,"card-header"],["header","Planned Job's Panels"],["class","table",4,"ngIf"],["header","Unplanned Job's Region"],[1,"offset-9"],[1,"col-3"],["panelNameChangeModal",""],["panelNameModal",""],["alertRW",""],["roiType",""],["deleteModal",""],["id","info-card",1,"row"],[1,"col-2"],["id","data-card",1,"card","analytics","card-body"],[1,"text-muted"],[1,"btn","default","me-2",3,"click"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"dblclick"],[1,"btn","btn-sm","mr-2","text-custome",3,"click"],["class","btn btn-sm mr-2 text-custome",3,"click",4,"ngIf"],[1,"btn","btn-sm","text-custome",3,"click"],[1,"btn","btn-sm","mr-2","text-danger",3,"click"],["class","btn btn-sm mr-2 text-danger",3,"click",4,"ngIf"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",2,"color","var(--label-color)",3,"checked","change"],[1,"float-center"],[1,"card"],[1,"card-body","p-4"],["type","text","id","panel",1,"form-control","mb-3",3,"formControl"],["type","submit",1,"btn","success","ms-2","float-end",3,"disabled","click"],[1,"btn","danger","me-2","float-end",3,"click"],[1,"float-start"],["for","flexSwitchCheckDefault",1,"form-check-label"],["type","text","id","panel",1,"form-control","mb-3",3,"ngClass","formControl"],["id","validationServerUsernameFeedback",3,"ngClass"],[1,"modal-body"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","default",3,"click"],[1,"container"],[1,"form","cf"],[1,"plan","cf"],["type","radio","name","radio1","id","free","value","free"],["for","free",1,"free-label","four","col"],["type","radio","name","radio1","id","basic","value","basic","checked",""],["for","basic",1,"basic-label","four","col"],[1,"icon-box"],[1,"material-icons"],["type","button",1,"btn","danger",3,"click"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3,"Job Settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,V,37,6,"div",2),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",4)(12,"button",9),e.\u0275\u0275listener("click",function(){return a.AddNewPanel()}),e.\u0275\u0275element(13,"fa-icon",10),e.\u0275\u0275text(14,"Add ROI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",11)(16,"button",12),e.\u0275\u0275listener("click",function(){return a.DeleteNewPanel()}),e.\u0275\u0275text(17,"Delete"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(18,"div",13)(19,"div",14)(20,"button",15),e.\u0275\u0275listener("click",function(){return a.Back()}),e.\u0275\u0275text(21,"Back"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",14),e.\u0275\u0275template(23,O,2,0,"button",16),e.\u0275\u0275template(24,j,2,0,"button",16),e.\u0275\u0275template(25,M,2,0,"button",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"div",17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",18)(28,"div",19)(29,"div",20,21),e.\u0275\u0275element(31,"canvas",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"div",23)(33,"div",8)(34,"div",24)(35,"div",25)(36,"h4"),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"p-tabView")(39,"p-tabPanel",26),e.\u0275\u0275template(40,B,13,1,"table",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"p-tabPanel",28),e.\u0275\u0275template(42,Y,13,1,"table",27),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(43,"div",23)(44,"div",29),e.\u0275\u0275element(45,"div",30),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(46,X,11,2,"ng-template",null,31,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(48,Q,18,7,"ng-template",null,32,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(50,H,14,0,"ng-template",null,33,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(52,G,17,0,"ng-template",null,34,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(54,q,17,0,"ng-template",null,35,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null!=a.currentData),e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",(a.isEdit||a.isChanges)&&!(a.isAddRW||a.isAddPanel)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(a.isEdit||a.isChanges)&&a.isAddPanel&&a.newPanelPoints.length>2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(a.isEdit||a.isChanges)&&a.isAddRW&&a.newRWPoints.length>2),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate1(" ","Job Details",""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","HT"==a.jobType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","HT"==a.jobType))},dependencies:[f._Y,f.Fj,f.JJ,f.JL,f.oH,S.BN,x.NgClass,x.NgForOf,x.NgIf,f.F,D.xf,D.x4]}),r})()}];let Z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[R.A,w.Bz.forChild(K),D.LU,w.Bz]}),r})()}}]);